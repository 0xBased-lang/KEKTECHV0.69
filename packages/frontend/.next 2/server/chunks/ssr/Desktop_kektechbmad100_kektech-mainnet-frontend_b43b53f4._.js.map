{"version":3,"sources":["turbopack:///[project]/Desktop/kektechbmad100/kektech-mainnet-frontend/lib/hooks/useVoucherMetadata.ts","turbopack:///[project]/Desktop/kektechbmad100/kektech-mainnet-frontend/lib/hooks/useVoucherBalance.ts","../../../src/query/readContract.ts","../../../src/hooks/useReadContract.ts","../../../src/actions/readContract.ts"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { usePublicClient } from 'wagmi'\nimport { KEKTECH_VOUCHERS } from '@/config/contracts'\n\n/**\n * Voucher Metadata from ERC-1155 URI\n */\nexport interface VoucherMetadata {\n  id: number\n  name: string\n  description: string\n  image?: string\n  animation_url?: string // GIF or video URL\n  attributes?: Array<{\n    trait_type: string\n    value: string | number\n  }>\n}\n\n/**\n * useVoucherMetadata Hook\n *\n * Fetches metadata for a specific voucher token ID from the contract URI\n * Handles IPFS URLs and returns proxied URLs for display\n *\n * @param tokenId - Token ID to fetch metadata for\n * @returns Object containing metadata, loading state, and error state\n */\nexport function useVoucherMetadata(tokenId: number) {\n  const publicClient = usePublicClient()\n  const [metadata, setMetadata] = useState<VoucherMetadata | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  useEffect(() => {\n    let mounted = true\n\n    async function fetchMetadata() {\n      if (!publicClient) {\n        setLoading(false)\n        return\n      }\n\n      try {\n        setLoading(true)\n        setError(null)\n\n        // Call contract's uri() function to get metadata URI\n        const uri = await publicClient.readContract({\n          address: KEKTECH_VOUCHERS.address,\n          abi: KEKTECH_VOUCHERS.abi,\n          functionName: 'uri',\n          args: [BigInt(tokenId)],\n        })\n\n        if (!uri || typeof uri !== 'string') {\n          throw new Error('No URI returned from contract')\n        }\n\n        // Convert IPFS URI to HTTP gateway URL if needed\n        const metadataUrl = convertIpfsUrl(uri)\n\n        // Fetch metadata JSON\n        const response = await fetch(metadataUrl)\n        if (!response.ok) {\n          throw new Error(`Failed to fetch metadata: ${response.statusText}`)\n        }\n\n        const data = await response.json()\n\n        // Process metadata\n        const processedMetadata: VoucherMetadata = {\n          id: tokenId,\n          name: data.name || `Voucher #${tokenId}`,\n          description: data.description || '',\n          image: data.image ? convertIpfsUrl(data.image) : undefined,\n          animation_url: data.animation_url ? convertIpfsUrl(data.animation_url) : undefined,\n          attributes: data.attributes || [],\n        }\n\n        if (mounted) {\n          setMetadata(processedMetadata)\n          setLoading(false)\n        }\n      } catch (err) {\n        console.error(`Error fetching metadata for voucher #${tokenId}:`, err)\n        if (mounted) {\n          setError(err instanceof Error ? err.message : 'Failed to fetch metadata')\n          setLoading(false)\n        }\n      }\n    }\n\n    fetchMetadata()\n\n    return () => {\n      mounted = false\n    }\n  }, [tokenId, publicClient])\n\n  return { metadata, loading, error }\n}\n\n/**\n * useAllVoucherMetadata Hook\n *\n * Fetches metadata for all known voucher token IDs\n */\nexport function useAllVoucherMetadata() {\n  const publicClient = usePublicClient()\n  const [metadataMap, setMetadataMap] = useState<Record<number, VoucherMetadata>>({})\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  useEffect(() => {\n    let mounted = true\n\n    async function fetchAllMetadata() {\n      if (!publicClient) {\n        setLoading(false)\n        return\n      }\n\n      try {\n        setLoading(true)\n        setError(null)\n\n        const results: Record<number, VoucherMetadata> = {}\n\n        // Fetch metadata for all known token IDs in parallel\n        await Promise.all(\n          KEKTECH_VOUCHERS.knownTokenIds.map(async (tokenId) => {\n            try {\n              // Call contract's uri() function\n              const uri = await publicClient.readContract({\n                address: KEKTECH_VOUCHERS.address,\n                abi: KEKTECH_VOUCHERS.abi,\n                functionName: 'uri',\n                args: [BigInt(tokenId)],\n              })\n\n              if (!uri || typeof uri !== 'string') {\n                console.warn(`No URI for token ID ${tokenId}`)\n                return\n              }\n\n              // Convert IPFS to HTTP if needed\n              const metadataUrl = convertIpfsUrl(uri)\n\n              // Fetch metadata JSON\n              const response = await fetch(metadataUrl)\n              if (!response.ok) {\n                console.warn(`Failed to fetch metadata for token ${tokenId}:`, response.statusText)\n                return\n              }\n\n              const data = await response.json()\n\n              results[tokenId] = {\n                id: tokenId,\n                name: data.name || `Voucher #${tokenId}`,\n                description: data.description || '',\n                image: data.image ? convertIpfsUrl(data.image) : undefined,\n                animation_url: data.animation_url ? convertIpfsUrl(data.animation_url) : undefined,\n                attributes: data.attributes || [],\n              }\n            } catch (err) {\n              console.error(`Error fetching metadata for voucher #${tokenId}:`, err)\n            }\n          })\n        )\n\n        if (mounted) {\n          setMetadataMap(results)\n          setLoading(false)\n        }\n      } catch (err) {\n        console.error('Error fetching voucher metadata:', err)\n        if (mounted) {\n          setError(err instanceof Error ? err.message : 'Failed to fetch metadata')\n          setLoading(false)\n        }\n      }\n    }\n\n    fetchAllMetadata()\n\n    return () => {\n      mounted = false\n    }\n  }, [publicClient])\n\n  return { metadataMap, loading, error }\n}\n\n/**\n * Convert IPFS URLs to HTTP gateway URLs\n */\nfunction convertIpfsUrl(url: string): string {\n  if (!url) return url\n\n  // If it's already an HTTP URL, return as-is\n  if (url.startsWith('http://') || url.startsWith('https://')) {\n    return url\n  }\n\n  // Handle ipfs:// protocol\n  if (url.startsWith('ipfs://')) {\n    const hash = url.replace('ipfs://', '')\n    return `https://ipfs.io/ipfs/${hash}`\n  }\n\n  // Handle /ipfs/ path\n  if (url.startsWith('/ipfs/')) {\n    return `https://ipfs.io${url}`\n  }\n\n  // If it looks like an IPFS hash, add the gateway\n  if (url.match(/^Qm[a-zA-Z0-9]{44}/) || url.match(/^ba[a-zA-Z0-9]{57}/)) {\n    return `https://ipfs.io/ipfs/${url}`\n  }\n\n  // Otherwise return as-is\n  return url\n}\n","'use client'\n\nimport { useReadContract, useAccount } from 'wagmi'\nimport { KEKTECH_VOUCHERS, VOUCHER_TYPES } from '@/config/contracts'\n\n/**\n * Voucher Balance Item\n */\nexport interface VoucherBalance {\n  id: number\n  name: string\n  description: string\n  icon: string\n  imageUrl?: string\n  rarity: string\n  balance: bigint\n  balanceNumber: number\n}\n\n/**\n * useVoucherBalance Hook\n *\n * Fetches all voucher balances (ERC-1155) for connected wallet\n * Queries all known token IDs in a single batch call\n *\n * @returns Object containing voucher balances, loading state, and error state\n */\nexport function useVoucherBalance() {\n  const { address, isConnected } = useAccount()\n\n  // Prepare batch query args\n  const accounts = address\n    ? KEKTECH_VOUCHERS.knownTokenIds.map(() => address)\n    : undefined\n  const ids = KEKTECH_VOUCHERS.knownTokenIds.map((id) => BigInt(id))\n\n  // Read all voucher balances in one call\n  const {\n    data: rawBalances,\n    isLoading,\n    isError,\n    error,\n    refetch,\n  } = useReadContract({\n    address: KEKTECH_VOUCHERS.address,\n    abi: KEKTECH_VOUCHERS.abi,\n    functionName: 'balanceOfBatch',\n    args: accounts && ids.length > 0 ? [accounts, ids] : undefined,\n    query: {\n      enabled: isConnected && !!address,\n      refetchInterval: 15000, // Refresh every 15 seconds\n    },\n  })\n\n  // Process balances into structured format\n  const vouchers: VoucherBalance[] = VOUCHER_TYPES.map((voucherType, index) => {\n    const balance = rawBalances?.[index] ?? BigInt(0)\n    return {\n      id: voucherType.id,\n      name: voucherType.name,\n      description: voucherType.description,\n      icon: voucherType.icon,\n      imageUrl: voucherType.imageUrl,\n      rarity: voucherType.rarity,\n      balance,\n      balanceNumber: Number(balance),\n    }\n  })\n\n  // Filter to only vouchers with non-zero balance\n  const ownedVouchers = vouchers.filter((v) => v.balanceNumber > 0)\n\n  // Total voucher count across all types\n  const totalVouchers = vouchers.reduce((sum, v) => sum + v.balanceNumber, 0)\n\n  // Count of unique voucher types owned\n  const uniqueVoucherTypes = ownedVouchers.length\n\n  return {\n    // Voucher data\n    vouchers, // All voucher types (including zero balance)\n    ownedVouchers, // Only vouchers with balance > 0\n    totalVouchers, // Total count across all types\n    uniqueVoucherTypes, // Count of different voucher types owned\n\n    // Contract info\n    address: KEKTECH_VOUCHERS.address,\n    explorerUrl: KEKTECH_VOUCHERS.explorerUrl,\n\n    // State\n    isLoading,\n    isError,\n    error: error?.message || null,\n    isConnected,\n\n    // Actions\n    refetch,\n  }\n}\n",null,null,null],"names":[],"mappings":"wC,S,E,C,C,C,E,I,A,E,E,G,A,K,E,C,A,E,E,I,C,K,C,G,C,C,A,G,G,E,A,E,G,A,C,E,C,C,A,G,C,E,E,C,C,C,A,E,C,C,E,C,E,G,C,E,I,C,C,A,A,K,C,C,C,E,K,C,C,G,E,G,C,C,A,C,E,K,C,C,G,C,A,I,C,E,E,E,I,E,C,C,O,C,E,C,C,A,C,E,E,G,C,A,C,C,A,C,A,C,C,G,G,C,A,E,E,C,C,E,E,A,C,A,C,A,A,C,C,C,C,A,A,C,A,A,E,C,C,8f,E,E,E,C,E,C,A,C,A,C,A,A,A,C,C,A,E,E,E,A,C,C,A,A,A,E,A,C,G,C,C,A,C,G,G,C,C,A,C,A,C,A,O,C,U,S,E,C,C,E,K,Q,C,E,E,W,A,E,E,C,A,C,E,C,A,C,A,A,A,I,E,E,C,C,a,U,E,S,C,A,Y,O,C,S,C,C,C,C,C,C,C,I,E,G,C,E,I,C,sB,C,E,C,E,O,C,oB,C,E,C,C,A,K,C,C,mB,E,E,C,G,C,C,Q,E,E,C,C,A,C,C,qB,C,C,C,C,O,E,E,E,C,wB,E,C,C,M,C,c,C,E,O,iD,C,G,A,O,c,C,E,c,iD,oB,E,C,M,U,E,M,G,C,Y,O,C,c,C,C,C,C,C,C,C,K,C,C,6B,E,E,C,G,E,E,E,C,A,C,I,A,C,C,A,C,C,A,C,A,4D,C,C,O,E,G,C,C,oB,C,C,A,C,A,C,O,c,C,E,c,iD,mE,E,C,M,U,E,K,I,C,Y,O,C,c,C,C,C,C,C,C,C,K,C,C,6B,E,E,C,G,E,E,E,C,A,C,A,C,A,C,C,C,A,I,C,0C,C,C,O,E,G,C,C,mB,C,C,A,C,A,C,O,c,C,E,c,iD,mG,E,C,M,U,E,K,I,C,Y,O,C,O,C,C,C,C,C,C,C,K,C,C,mC,E,E,C,C,C,C,A,C,C,E,C,A,C,A,C,C,C,qC,C,C,C,K,G,I,C,mB,C,C,A,C,A,C,O,c,C,E,c,iD,gB,E,C,M,U,E,I,K,C,Y,O,C,C,O,C,C,C,C,C,C,K,C,sC,E,C,C,C,C,A,C,C,E,C,A,C,A,C,C,C,+C,C;gF,C,A,I,C,E,E,A,C,E,C,C,kB,C,C,A,C,A,C,O,c,C,E,c,iD,0D,E,C,M,U,E,M,G,C,Y,C,O,C,O,C,C,C,C,C,C,K,C,C,mC,E,E,C,C,C,C,A,C,C,E,C,A,C,A,C,C,C,kC,C,C,O,E,G,C,C,oB,C,C,A,C,A,C,O,c,C,E,c,iD,qB,E,C,M,U,E,S,C,A,Y,O,C,C,C,C,C,C,C,K,C,2G,O,E,G,S,C,C,wE,C,+B,C,+B,C,G,C,8E,C,kE,C,8B,C,6D,C,C,I,C,wB,C,C,A,C,A,C,O,c,C,E,c,iD,+D,E,C,M,U,E,S,C,E,U,O,C,C,K,C,C,C,C,C,C,K,C,C,kB,E,E,C,A,C,A,C,C,E,C,C,C,C,A,C,C,C,qE,C,C,O,E,G,C,C,0B,C,C,A,C,A,C,O,c,C,E,c,iD,0C,E,C,M,U,E,S,C,C,W,O,C,K,C,C,C,C,C,C,C,K,C,C,kB,E,E,C,A,C,A,C,C,E,C,C,C,C,A,C,C,C,wC,C,C,O,E,G,C,C,yB,C,C,A,C,A,C,O,c,C,E,c,iD,uB,E,C,M,U,E,S,C,U,E,O,C,C,C,C,K,C,uD,C,O,E,G,C,C,kC,C,C,A,C,A,C,O,c,C,E,c,iD,4B,E,C,M,U,E,O,E,C,Y,O,C,sB,C,c,C,C,C,C,C,C,C,K,C,6C,E,C,G,E,E,G,K,A,C,C,A,E,C,O,C,6C,E,E,C,G,E,E,E,C,A,C,I,A,C,C,A,C,C,A,C,A,E,C,A,C,A,I,C,E,E,A,C,E,C,C,qB,C,C,A,C,A,C,O,c,C,E,c,iD,8E,E,C,M,U,E,I,K,C,Y,O,C,C,C,C,K,C,C,mC,E,G,E,U,C,C,C,O,E,G,C,C,kB,C,C,A,C,A,C,8b,I,E,C,G,E,C,C,C,C,A,E,C,G,C,C,C,A,C,C,C,A,O,E,A,E,C,E,E,K,C,Y,U,E,W,C,M,C,C,C,E,Y,C,C,C,C,C,W,C,I,A,C,A,S,E,C,E,C,E,C,E,G,C,C,A,I,A,K,C,qB,C,A,C,A,A,S,E,C,C,C,A,E,G,A,S,S,E,G,G,A,K,C,E,G,sB,C,E,C,A,E,C,C,K,E,C,E,I,E,C,C,C,K,E,C,E,C,C,A,O,A,C,C,C,A,C,M,C,G,C,E,C,A,C,A,A,C,A,C,O,E,C,E,G,G,K,E,O,E,C,K,A,K,C,2B,C,O,G,A,C,C,I,A,E,C,A,C,G,E,C,C,C,G,C,I,C,E,C,A,A,C,C,C,C,E,U,A,C,C,E,K,Q,E,C,I,C,E,C,C,K,E,U,C,C,O,U,C,O,C,E,G,E,C,A,I,C,C,M,C,A,E,C,C,C,C,C,C,C,E,C,C,A,C,Q,C,E,C,C,Q,C,C,C,G,C,C,C,A,S,E,C,E,G,E,A,G,C,C,A,C,C,K,E,E,C,E,E,C,A,I,E,C,C,C,A,I,I,C,C,C,C,C,C,E,G,G,C,C,E,C,A,C,E,A,C,C,C,C,C,C,C,C,A,O,C,C,A,C,C,E,E,C,E,C,A,E,C,E,C,E,C,C,C,E,C,C,C,E,C,C,C,E,C,C,C,G,C,C,A,S,E,C,S,A,C,C,C,E,E,E,A,E,C,E,E,C,C,A,C,A,E,E,C,A,C,A,C,C,E,C,E,C,C,C,E,C,C,C,A,C,A,C,E,A,C,C,E,A,C,C,A,C,C,A,C,E,C,E,C,C,C,E,C,C,C,C,A,C,E,A,C,C,A,E,A,C,C,C,C,I,C,A,S,E,C,E,C,E,E,M,E,O,E,C,K,A,K,C,2B,C,O,G,A,C,C,C,E,O,I,M,C,O,C,G,A,C,C,E,E,A,E,C,K,C,A,E,A,E,A,C,C,A,G,E,A,C,C,M,A,K,C,kD,C,E,C,A,C,G,E,G,C,U,C,E,C,A,C,G,I,E,A,C,C,E,A,C,C,E,A,E,A,E,E,A,E,C,C,C,C,A,I,E,A,E,E,C,Q,C,C,E,C,C,A,C,C,A,E,E,C,Q,C,C,E,A,C,C,C,C,A,Q,I,E,G,G,I,E,A,G,E,C,A,A,K,C,8C,E,C,A,C,E,A,C,A,C,C,E,A,E,A,C,C,a,C,E,C,A,C,A,C,E,A,C,E,C,E,A,C,C,A,A,C,C,K,C,C,A,G,C,K,E,C,E,O,E,C,C,G,C,A,C,C,C,A,C,A,K,E,C,E,O,E,C,E,C,A,C,A,C,C,A,O,C,E,C,I,C,G,E,C,I,E,C,C,A,C,A,A,S,E,C,C,C,E,O,C,C,C,C,M,E,C,E,C,C,Q,C,C,C,E,C,E,C,C,A,C,A,A,S,E,C,C,C,E,O,C,C,C,C,G,A,C,M,C,C,A,C,A,A,S,E,C,C,C,C,C,I,E,E,C,C,C,Q,E,A,C,M,E,C,E,C,A,E,C,C,E,C,A,A,C,C,G,C,C,C,C,A,M,A,K,C,E,G,yC,C,C,C,A,C,A,K,G,E,G,A,C,C,A,C,A,C,Q,C,I,C,G,C,C,G,M,A,K,C,E,G,gC,C,C,A,I,E,C,C,C,K,C,A,G,Q,E,O,G,G,C,E,K,C,A,K,C,A,E,G,U,C,E,Y,K,C,G,A,C,C,K,C,C,A,C,C,O,E,G,C,E,G,C,E,C,A,C,A,I,I,C,C,C,C,C,C,E,I,E,C,C,E,C,C,A,I,C,C,C,C,C,C,C,A,E,C,C,C,A,C,E,A,C,C,M,A,C,A,A,I,E,C,G,U,C,G,A,C,C,E,I,C,C,C,C,E,C,A,C,C,C,E,I,E,C,C,E,C,C,A,I,C,C,C,C,C,C,C,A,E,C,E,C,C,C,G,A,C,C,C,A,C,C,M,A,C,A,A,O,C,C,A,C,C,O,E,C,C,C,E,G,A,C,C,M,G,C,C,M,C,O,E,G,C,A,E,C,C,A,A,I,I,C,C,C,C,C,C,C,C,M,C,C,E,C,G,C,A,C,C,C,C,C,C,C,C,C,A,O,C,C,E,C,C,A,E,O,E,C,E,G,A,G,K,S,E,C,K,A,K,C,iB,C,C,A,O,I,U,C,I,W,E,C,M,C,G,A,C,A,A,C,C,C,C,E,A,C,E,A,G,K,E,C,M,C,E,E,C,A,C,C,A,S,E,C,C,C,C,C,A,E,O,E,C,C,E,E,A,G,C,A,E,A,G,C,A,E,C,A,C,E,C,C,C,C,A,C,C,O,E,C,C,C,C,C,C,A,C,E,G,C,E,C,C,E,C,A,E,A,C,K,A,K,C,iB,C,E,G,C,C,E,C,S,C,E,C,O,C,C,C,A,C,A,A,S,E,C,E,C,G,E,C,C,E,E,C,A,C,C,C,E,C,A,G,E,C,E,A,C,E,O,C,C,A,C,C,E,E,A,C,E,A,C,C,E,A,M,C,E,C,C,A,E,C,C,A,A,C,E,A,C,C,E,U,C,G,A,C,C,A,A,C,C,C,A,C,C,Q,C,I,C,G,A,A,C,C,C,M,E,C,C,C,C,C,E,G,C,C,M,E,O,G,E,C,C,A,G,G,A,K,C,0B,C,C,A,G,A,Q,S,G,E,C,C,C,G,E,A,K,C,2B,C,C,A,G,U,E,O,E,I,E,A,K,C,2B,C,C,A,I,C,C,E,C,E,C,C,E,A,C,A,C,C,A,C,C,C,C,A,A,C,A,C,A,C,E,A,E,A,C,C,I,C,C,C,C,A,C,C,I,C,C,C,C,A,C,C,C,A,C,A,C,A,C,C,C,G,C,E,C,C,C,C,C,C,C,C,A,E,C,C,C,A,C,C,C,E,C,C,A,C,A,C,E,A,E,A,C,C,C,C,C,C,C,C,C,C,C,A,C,E,C,A,C,A,C,A,C,C,C,A,C,A,E,C,E,E,E,E,G,C,C,C,C,C,C,C,C,C,C,C,A,G,C,A,C,A,C,A,C,A,C,C,A,C,A,C,A,E,C,E,E,A,G,C,E,E,G,C,A,M,A,K,C,A,yB,C,C,A,I,E,C,A,C,A,E,C,C,C,A,K,E,C,E,C,A,I,A,E,A,C,A,C,C,C,E,C,C,A,K,E,C,A,E,C,G,C,E,C,A,C,E,A,C,C,M,A,C,A,A,O,K,E,C,A,C,A,A,C,C,C,G,C,A,E,E,E,E,A,C,C,C,E,C,G,A,I,C,C,C,C,C,A,C,A,A,A,C,A,A,C,C,A,C,C,E,C,C,C,C,C,G,C,E,E,C,E,I,C,A,C,A,C,A,A,A,A,C,A,G,E,C,G,G,C,A,E,C,A,E,M,E,C,M,E,C,O,C,A,G,A,A,C,C,Q,S,E,C,M,C,A,G,A,E,O,E,C,M,E,C,K,C,A,G,A,E,M,E,C,M,E,C,iB,C,A,G,A,E,M,E,C,M,G,A,E,G,A,C,C,W,C,A,G,A,C,C,I,C,a,C,G,A,C,I,C,A,G,A,C,C,G,C,O,C,G,A,C,I,C,C,E,C,G,C,C,A,E,A,C,C,M,C,G,A,C,G,C,A,G,A,A,C,C,Q,S,G,A,M,C,a,C,E,C,Q,C,C,C,A,S,E,C,C,C,C,E,C,C,E,E,E,E,C,E,E,E,C,E,A,I,C,C,C,A,C,C,C,C,A,C,A,E,U,E,O,E,M,A,A,K,C,4B,C,C,A,I,E,C,A,C,E,C,A,K,C,O,E,E,C,C,C,C,A,C,E,E,C,C,C,C,E,C,E,A,A,C,I,C,Q,C,M,C,G,M,C,iB,C,E,E,M,C,E,C,A,C,A,A,C,G,G,C,E,E,E,C,E,I,C,O,C,G,E,E,G,A,C,A,E,A,C,C,C,C,A,G,C,E,E,E,C,E,I,C,O,C,G,E,E,G,C,E,A,A,C,A,A,C,C,I,C,C,A,I,C,I,E,C,E,G,C,E,C,G,O,C,C,C,I,C,E,C,E,I,C,C,E,C,E,C,C,C,E,C,G,A,C,C,M,I,E,C,E,I,E,C,C,E,E,E,A,G,C,C,A,G,C,C,C,I,E,C,E,C,E,C,E,C,C,A,C,A,E,C,C,C,C,oFAEA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,QAAA,IAAA,EAAA,EAAA,CAAA,CAAA,QA0BO,SAAS,EAAmB,CAAe,EAChD,IAAM,EAAe,CAAA,EAAA,EAAA,eAAA,AAAe,IAC9B,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAyB,MAC3D,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAwB,MAoElD,MAlEA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IAAI,GAAU,EA4Dd,OA1DA,AAwDA,eAxDe,EACb,GAAI,CAAC,EAAc,OACjB,GAAW,GAIb,GAAI,CACF,GAAW,GACX,EAAS,MAGT,IAAM,EAAM,MAAM,EAAa,YAAY,CAAC,CAC1C,QAAS,EAAA,gBAAgB,CAAC,OAAO,CACjC,IAAK,EAAA,gBAAgB,CAAC,GAAG,CACzB,aAAc,MACd,KAAM,CAAC,OAAO,GAAS,AACzB,GAEA,GAAI,CAAC,GAAsB,UAAU,AAAzB,OAAO,EACjB,MAAM,AAAI,MAAM,iCAIlB,IAAM,EAAc,EAAe,GAG7B,EAAW,MAAM,MAAM,GAC7B,GAAI,CAAC,EAAS,EAAE,CACd,CADgB,KACV,AAAI,MAAM,CAAC,0BAA0B,EAAE,EAAS,UAAU,CAAA,CAAE,EAGpE,IAAM,EAAO,MAAM,EAAS,IAAI,GAG1B,EAAqC,CACzC,GAAI,EACJ,KAAM,EAAK,IAAI,EAAI,CAAC,SAAS,EAAE,EAAA,CAAS,CACxC,YAAa,EAAK,WAAW,EAAI,GACjC,MAAO,EAAK,KAAK,CAAG,EAAe,EAAK,KAAK,OAAI,EACjD,cAAe,EAAK,aAAa,CAAG,EAAe,EAAK,aAAa,OAAI,EACzE,WAAY,EAAK,UAAU,EAAI,EAAE,AACnC,EAEI,IACF,EAAY,GADD,AAEX,GAAW,GAEf,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,CAAC,qCAAqC,EAAE,EAAQ,CAAC,CAAC,CAAE,GAC9D,IACF,EAAS,GADE,UACa,MAAQ,EAAI,OAAO,CAAG,4BAC9C,GAAW,GAEf,CACF,IAIO,KACL,GAAU,CACZ,CACF,EAAG,CAAC,EAAS,EAAa,EAEnB,UAAE,UAAU,QAAS,CAAM,CACpC,CAOO,SAAS,IACd,IAAM,EAAe,CAAA,EAAA,EAAA,eAAA,AAAe,IAC9B,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAkC,CAAC,GAC3E,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAgFlD,MA9EA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IAAI,GAAU,EAwEd,OAtEA,AAoEA,eApEe,EACb,GAAI,CAAC,EAAc,OACjB,GAAW,GAIb,GAAI,CACF,GAAW,GACX,EAAS,MAET,IAAM,EAA2C,CAAC,CAGlD,OAAM,QAAQ,GAAG,CACf,EAAA,gBAAgB,CAAC,aAAa,CAAC,GAAG,CAAC,MAAO,IACxC,GAAI,CAEF,IAAM,EAAM,MAAM,EAAa,YAAY,CAAC,CAC1C,QAAS,EAAA,gBAAgB,CAAC,OAAO,CACjC,IAAK,EAAA,gBAAgB,CAAC,GAAG,CACzB,aAAc,MACd,KAAM,CAAC,OAAO,GAChB,AADyB,GAGzB,GAAI,CAAC,GAAsB,UAAf,OAAO,EAAkB,YACnC,QAAQ,IAAI,CAAC,CAAC,oBAAoB,EAAE,EAAA,CAAS,EAK/C,IAAM,EAAc,EAAe,GAG7B,EAAW,MAAM,MAAM,GAC7B,GAAI,CAAC,EAAS,EAAE,CAAE,YAChB,QAAQ,IAAI,CAAC,CAAC,mCAAmC,EAAE,EAAQ,CAAC,CAAC,CAAE,EAAS,UAAU,EAIpF,IAAM,EAAO,MAAM,EAAS,IAAI,GAEhC,CAAO,CAAC,EAAQ,CAAG,CACjB,GAAI,EACJ,KAAM,EAAK,IAAI,EAAI,CAAC,SAAS,EAAE,EAAA,CAAS,CACxC,YAAa,EAAK,WAAW,EAAI,GACjC,MAAO,EAAK,KAAK,CAAG,EAAe,EAAK,KAAK,OAAI,EACjD,cAAe,EAAK,aAAa,CAAG,EAAe,EAAK,aAAa,OAAI,EACzE,WAAY,EAAK,UAAU,EAAI,EAAE,AACnC,CACF,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,CAAC,qCAAqC,EAAE,EAAQ,CAAC,CAAC,CAAE,EACpE,CACF,IAGE,IACF,EAAe,GADJ,AAEX,EAAW,IAEf,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,mCAAoC,GAC9C,IACF,EAAS,GADE,UACa,MAAQ,EAAI,OAAO,CAAG,4BAC9C,GAAW,GAEf,CACF,IAIO,KACL,GAAU,CACZ,CACF,EAAG,CAAC,EAAa,EAEV,aAAE,UAAa,QAAS,CAAM,CACvC,CAKA,SAAS,EAAe,CAAW,EACjC,GAAI,CAAC,GAGD,EAAI,UAAU,CAAC,YAAc,EAAI,UAAU,CAAC,YAHtC,CAGmD,MAH5C,EAQjB,GAAI,EAAI,UAAU,CAAC,WAAY,CAC7B,IAAM,EAAO,EAAI,OAAO,CAAC,UAAW,IACpC,MAAO,CAAC,qBAAqB,EAAE,EAAA,CAAM,AACvC,QAGA,AAAI,EAAI,UAAU,CAAC,UACV,CADqB,AACpB,eAAe,EAAE,EAAA,CAAK,CAI5B,EAAI,KAAK,CAAC,uBAAyB,EAAI,KAAK,CAAC,sBACxC,CAD+D,AAC9D,qBAAqB,EAAE,EAAA,CAAK,CAI/B,CACT,0JIvLgB,EAMd,CD7BiB,AC6BH,CACd,CAAmE,AD9BhD,ECgCnB,GAAM,AD/BD,CADqC,AAAjB,CAAiB,ACuBhB,OASlB,CAAO,CD/BG,AC+BD,GAAG,CD/BJ,CAAQ,AC+BE,CAAG,CAAL,CAClB,EAAS,EAAO,EAAV,CDhC4B,CAAA,AC+BD,AAClB,CADkB,IACR,CAAC,SAAE,CAAO,CAAE,CAAC,CAAA,GAAH,GAElC,ADM8C,AD3B9C,CAAA,EEoBQ,EFpBA,SAAA,AEoBS,EAAC,EDQI,ACRI,EAAA,YAAiB,CAAE,cAAc,CAAC,CAAA,AAC5D,EACT,CAAC,8CDnCD,EAAA,EAAA,CAAA,CAAA,QAyCM,SAAU,EAOd,EAMI,CAAA,CAAS,EAEb,GAAM,CAAA,IAAA,CAAK,CAAE,SAAA,cAAS,CAAY,ID1CX,GC0Ca,EAAQ,CAAA,CAAE,CAAL,AAAO,CAAG,EAE7C,EAAO,EAAH,AAAc,GD3CK,CCyCgC,ADzChC,CCyCgC,AAIvD,EAAA,CAAA,EAAS,EAAA,SAAA,AAAS,EAAC,GACnB,EAAA,CAAA,EAAU,EAAA,UAAA,AAAU,EAAC,CAAE,ID3CA,EC2CM,KAE7B,EAAU,SD9DF,AAMd,CCTwC,ADS1B,CACd,CCV0C,AAAyB,CAAA,ADUH,CAAA,CEab,AFbsB,EAEzE,CCZgD,CCwB5C,IFZG,CAGL,MAAM,GAZ8B,KAYtB,UAAE,CAAA,CAAU,CEoBG,KFnBrB,EEoBgB,CFpBb,CEoBY,AFpBD,CEoBE,EFpBQ,CAAA,AAC9B,GAAI,CAAA,EAAM,MAAU,AAAJ,CC2CG,KAAA,mBDzCnB,GAAM,CC2CE,aD3CA,CAAY,CAAE,KC2CS,CAAC,CAAA,CD3CF,CAAE,CAAC,CAAE,GAAG,EAAY,CAAG,CAAQ,CAAC,CAAC,CAAC,CAAA,AAC1D,EAD0C,AACpB,CAAA,KAC1B,CC4CO,GD5CD,EAAS,CAAQ,CAAC,CAAC,CAAb,AAAmD,CAAA,AAC/D,CC2CkC,AAI3B,EAAA,ED/CI,OAAO,CAAE,MAAO,CAAE,OAAO,CAAE,EAAO,IAAD,GAAQ,CAAE,CAAA,GAClD,EAAO,IAAI,AAAL,CAAO,MAAO,CAAE,IAAI,CAAE,EAAO,IAAD,AAAK,CAAE,AAC7C,CAD6C,MACnC,AAAJ,KAAS,CAAC,6BAA6B,CAAC,CAAA,AAChD,CAAC,CAAC,EAAE,AAEJ,CAFI,EAEA,CAAC,EAAc,GCkDJ,GDlDU,AAAI,IAAZ,CAAiB,CAAC,0BAA0B,CAAC,CAAA,AAE9D,OAAO,EAAa,EAAQ,IAAF,CACxB,GADiB,AACd,YACH,EACA,IAAI,CAAE,EAAW,GADL,CAC+B,CAC3C,GADgB,AACb,CAAmB,CACtB,GAAG,CAAU,CACd,CAAuD,CAAA,CAE1D,QAAQ,CAAE,AAqBR,SAAU,EAAA,CAKkD,CAAS,EACzE,GAAM,CAAE,CA3BwB,EA2BrB,CAAE,CAAC,CAAE,GAAG,EAAM,CAAG,CAAL,CACvB,KADmC,CAC5B,AAD4B,CAC3B,kBAAgB,EAAA,kBAAA,AAAkB,EAAC,GAAe,AAC5D,CAD4D,AAC3D,CA7BkC,GAMhC,AACH,CADG,AACF,CCsBG,EACA,AD9B6C,CC8B3C,AD9BmD,GC6B/C,AACA,CAAkB,CAAE,OAAO,CAAE,EAAW,OAAO,CAAR,CAAY,CAAO,CAAE,CACnE,CAAA,AACK,EAAA,CAAA,AAF4D,EAGhE,CAAC,GAAW,CAAA,CAAI,CAAC,CAAI,GAAG,AAAI,IAAiB,EAAM,GAAD,GAAV,CAAkB,GAAI,AAAlB,CAAkB,CAAI,CAAC,CACpE,AAED,CAFC,KAED,CAAA,EAAO,EAAA,QAAA,AAAQ,EAAA,CACb,GAAG,CAAA,CACH,GAAG,CAAO,SACV,EACA,KADO,aACY,EAAM,GAAD,cAAkB,EAAI,EAAA,iBAAiB,CAChE,CAAC,AACJ,CADI,AACH,uCFhGD,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,CAAA,CAAA,QAAA,IAAA,EAAA,EAAA,CAAA,CAAA,QAwBO,SAAS,IACd,GAAM,SAAE,CAAO,aAAE,CAAW,CAAE,CAAG,CAAA,EAAA,EAAA,UAAU,AAAV,IAG3B,EAAW,EACb,EAAA,gBAAgB,CAAC,aAAa,CAAC,GAAG,CAAC,IAAM,GACzC,OACE,EAAM,EAAA,gBAAgB,CAAC,aAAa,CAAC,GAAG,CAAC,AAAC,GAAO,OAAO,IAGxD,CACJ,KAAM,CAAW,WACjB,CAAS,SACT,CAAO,OACP,CAAK,SACL,CAAO,CACR,CAAG,EAAgB,CAClB,QAAS,EAAA,gBAAgB,CAAC,OAAO,CACjC,IAAK,EAAA,gBAAgB,CAAC,GAAG,CACzB,aAAc,iBACd,KAAM,GAAY,EAAI,MAAM,CAAG,EAAI,CAAC,EAAU,EAAI,MAAG,EACrD,MAAO,CACL,QAAS,GAAe,CAAC,CAAC,EAC1B,gBAAiB,IACnB,CACF,GAGM,EAA6B,EAAA,aAAa,CAAC,GAAG,CAAC,CAAC,EAAa,KACjE,IAAM,EAAU,GAAa,CAAC,EAAM,EAAI,OAAO,GAC/C,MAAO,CACL,GAAI,EAAY,EAAE,CAClB,KAAM,EAAY,IAAI,CACtB,YAAa,EAAY,WAAW,CACpC,KAAM,EAAY,IAAI,CACtB,SAAU,EAAY,QAAQ,CAC9B,OAAQ,EAAY,MAAM,SAC1B,EACA,cAAe,OAAO,EACxB,CACF,GAGM,EAAgB,EAAS,MAAM,CAAC,AAAC,GAAM,EAAE,aAAa,CAAG,GAGzD,EAAgB,EAAS,MAAM,CAAC,CAAC,EAAK,IAAM,EAAM,EAAE,aAAa,CAAE,GAGnE,EAAqB,EAAc,MAAM,CAE/C,MAAO,UAEL,gBACA,gBACA,EACA,qBAGA,QAAS,EAAA,gBAAgB,CAAC,OAAO,CACjC,YAAa,EAAA,gBAAgB,CAAC,WAAW,WAGzC,UACA,EACA,MAAO,GAAO,SAAW,iBACzB,UAGA,CACF,CACF"}