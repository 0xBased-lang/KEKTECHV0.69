{"version":3,"sources":["turbopack:///[project]/Desktop/kektechbmad100/kektech-mainnet-frontend/config/contracts/kektv-marketplace.ts","turbopack:///[project]/Desktop/kektechbmad100/kektech-mainnet-frontend/lib/hooks/useKektvListings.ts","turbopack:///[project]/Desktop/kektechbmad100/kektech-mainnet-frontend/lib/hooks/useKektvOffers.ts","turbopack:///[project]/Desktop/kektechbmad100/kektech-mainnet-frontend/lib/hooks/useKektvMarketplace.ts","turbopack:///[project]/Desktop/kektechbmad100/kektech-mainnet-frontend/lib/hooks/useKektvOffersApproval.ts","turbopack:///[project]/Desktop/kektechbmad100/kektech-mainnet-frontend/lib/hooks/useMarketplaceListing.ts","turbopack:///[project]/Desktop/kektechbmad100/kektech-mainnet-frontend/components/marketplace/UserActivityPage.tsx","../../../src/actions/readContracts.ts","../../../src/query/readContracts.ts","../../../src/actions/multicall.ts","../../../src/hooks/useReadContracts.ts","turbopack:///[project]/Desktop/kektechbmad100/kektech-mainnet-frontend/lib/hooks/useAllReceivableOffers.ts","turbopack:///[project]/Desktop/kektechbmad100/kektech-mainnet-frontend/lib/hooks/useActiveOfferCount.ts"],"sourcesContent":["/**\n * KEKTV Marketplace Configuration (ERC-1155 Voucher Trading)\n *\n * ‚úÖ V6 DEPLOYED: October 19, 2025\n * Contract: 0x2d79106D60f92F3a6b7B17E3cAd3Df0D4bdcE062\n * Network: BasedAI (Chain ID: 32323)\n * Status: PRODUCTION - V6 with reordered operations (CRITICAL FIX)\n *\n * V6 Changes from V2/V4:\n * - ‚úÖ BREAKTHROUGH FIX: Pay seller BEFORE NFT transfer\n * - ‚úÖ Fixes \"Insufficient balance\" error by avoiding msg.value context loss during ERC1155 callback\n * - ‚úÖ Follows proper Checks-Effects-Interactions pattern\n * - ‚úÖ BasedAI-specific fix for msg.value handling during safeTransferFrom callbacks\n *\n * Features:\n * - ‚úÖ Real-time NFT balance validation before every transaction\n * - ‚úÖ Auto-cancel invalid listings with clear error messages\n * - ‚úÖ Try-catch NFT transfers with automatic rollback\n * - ‚úÖ Comprehensive error handling (SellerInsufficientBalance, MarketplaceNotApproved, etc.)\n * - ‚úÖ Listing validation tracking (createdAt, lastValidated timestamps)\n * - Buy/Sell ERC-1155 vouchers\n * - Listings with quantity support\n * - 2.5% platform fee (deducted from seller)\n * - Correct fee model (buyer pays listing price only)\n * - ERC1155 validation & security hardened\n * - Pausable & secure\n */\n\nexport const KEKTV_MARKETPLACE_ADDRESS = '0x2d79106D60f92F3a6b7B17E3cAd3Df0D4bdcE062' as const\n\n// Voucher contract address\nexport const KEKTV_VOUCHERS_ADDRESS = '0x7FEF981beE047227f848891c6C9F9dad11767a48' as const\n\n// V6 Marketplace ABI (Simplified)\nexport const KEKTV_MARKETPLACE_ABI = [\n  // Constructor\n  {\n    inputs: [\n      { internalType: 'address', name: '_voucherContract', type: 'address' },\n      { internalType: 'address', name: '_feeRecipient', type: 'address' },\n    ],\n    stateMutability: 'nonpayable',\n    type: 'constructor',\n  },\n\n  // View Functions\n  {\n    inputs: [],\n    name: 'voucherContract',\n    outputs: [{ internalType: 'contract IERC1155', name: '', type: 'address' }],\n    stateMutability: 'view',\n    type: 'function',\n  },\n  {\n    inputs: [],\n    name: 'FEE_PERCENTAGE',\n    outputs: [{ internalType: 'uint256', name: '', type: 'uint256' }],\n    stateMutability: 'view',\n    type: 'function',\n  },\n  {\n    inputs: [\n      { internalType: 'address', name: '', type: 'address' },\n      { internalType: 'uint256', name: '', type: 'uint256' },\n    ],\n    name: 'listings',\n    outputs: [\n      { internalType: 'uint256', name: 'amount', type: 'uint256' },\n      { internalType: 'uint256', name: 'pricePerItem', type: 'uint256' },\n      { internalType: 'bool', name: 'active', type: 'bool' },\n    ],\n    stateMutability: 'view',\n    type: 'function',\n  },\n  {\n    inputs: [],\n    name: 'feeRecipient',\n    outputs: [{ internalType: 'address', name: '', type: 'address' }],\n    stateMutability: 'view',\n    type: 'function',\n  },\n  {\n    inputs: [],\n    name: 'paused',\n    outputs: [{ internalType: 'bool', name: '', type: 'bool' }],\n    stateMutability: 'view',\n    type: 'function',\n  },\n  {\n    inputs: [],\n    name: 'owner',\n    outputs: [{ internalType: 'address', name: '', type: 'address' }],\n    stateMutability: 'view',\n    type: 'function',\n  },\n\n  // Write Functions\n  {\n    inputs: [\n      { internalType: 'uint256', name: 'tokenId', type: 'uint256' },\n      { internalType: 'uint256', name: 'amount', type: 'uint256' },\n      { internalType: 'uint256', name: 'pricePerItem', type: 'uint256' },\n    ],\n    name: 'listVoucher',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function',\n  },\n  {\n    inputs: [\n      { internalType: 'address', name: 'seller', type: 'address' },\n      { internalType: 'uint256', name: 'tokenId', type: 'uint256' },\n      { internalType: 'uint256', name: 'amount', type: 'uint256' },\n    ],\n    name: 'buyVoucher',\n    outputs: [],\n    stateMutability: 'payable',\n    type: 'function',\n  },\n  {\n    inputs: [{ internalType: 'uint256', name: 'tokenId', type: 'uint256' }],\n    name: 'cancelListing',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function',\n  },\n  {\n    inputs: [{ internalType: 'address', name: '_newFeeRecipient', type: 'address' }],\n    name: 'updateFeeRecipient',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function',\n  },\n  {\n    inputs: [],\n    name: 'pause',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function',\n  },\n  {\n    inputs: [],\n    name: 'unpause',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function',\n  },\n  {\n    inputs: [],\n    name: 'emergencyWithdraw',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function',\n  },\n\n  // Events\n  {\n    anonymous: false,\n    inputs: [\n      { indexed: true, internalType: 'address', name: 'seller', type: 'address' },\n      { indexed: true, internalType: 'uint256', name: 'tokenId', type: 'uint256' },\n      { indexed: false, internalType: 'uint256', name: 'amount', type: 'uint256' },\n      { indexed: false, internalType: 'uint256', name: 'pricePerItem', type: 'uint256' },\n    ],\n    name: 'VoucherListed',\n    type: 'event',\n  },\n  {\n    anonymous: false,\n    inputs: [\n      { indexed: true, internalType: 'address', name: 'seller', type: 'address' },\n      { indexed: true, internalType: 'address', name: 'buyer', type: 'address' },\n      { indexed: true, internalType: 'uint256', name: 'tokenId', type: 'uint256' },\n      { indexed: false, internalType: 'uint256', name: 'amount', type: 'uint256' },\n      { indexed: false, internalType: 'uint256', name: 'totalPrice', type: 'uint256' },\n    ],\n    name: 'VoucherSold',\n    type: 'event',\n  },\n  {\n    anonymous: false,\n    inputs: [\n      { indexed: true, internalType: 'address', name: 'seller', type: 'address' },\n      { indexed: true, internalType: 'uint256', name: 'tokenId', type: 'uint256' },\n    ],\n    name: 'ListingCancelled',\n    type: 'event',\n  },\n] as const\n\nexport const KEKTV_MARKETPLACE_CONFIG = {\n  address: KEKTV_MARKETPLACE_ADDRESS,\n  abi: KEKTV_MARKETPLACE_ABI,\n\n  // Contract features\n  platformFee: 250n, // 2.5% (250 basis points)\n  vouchersAddress: KEKTV_VOUCHERS_ADDRESS,\n\n  // Feature flags (query from contract in production)\n  enabled: true,\n  listingsEnabled: true,\n  offersEnabled: false, // Can be enabled by owner\n  paused: false,\n\n  // Network info\n  chainId: 32323,\n  network: 'BasedAI',\n  blockExplorer: 'https://explorer.bf1337.org',\n\n  // Deployment info\n  deployedAt: 2439532,\n  deployedDate: '2025-10-17',\n  txHash: '0xd892c6297e2e6423eb171d63d3133d994bbdae9dfdc14a4a0b50c80006592e69',\n} as const\n\nexport type KektvMarketplaceConfig = typeof KEKTV_MARKETPLACE_CONFIG\n\n// Voucher types\nexport const VOUCHER_TYPES = [\n  { id: 0, name: 'Genesis', description: 'Genesis tier voucher' },\n  { id: 1, name: 'Silver', description: 'Silver tier voucher' },\n  { id: 2, name: 'Gold', description: 'Gold tier voucher' },\n  { id: 3, name: 'Platinum', description: 'Platinum tier voucher' },\n] as const\n\n// Helper function to calculate total price with fee\nexport function calculateTotalPrice(pricePerItem: bigint, amount: bigint, platformFee: bigint = 250n): bigint {\n  const subtotal = pricePerItem * amount\n  const fee = (subtotal * platformFee) / 10000n\n  return subtotal + fee\n}\n\n// Helper function to calculate fee only\nexport function calculateFee(price: bigint, platformFee: bigint = 250n): bigint {\n  return (price * platformFee) / 10000n\n}\n","import { useState, useEffect } from 'react'\nimport { useAccount, usePublicClient, useReadContract } from 'wagmi'\nimport { KEKTV_MARKETPLACE_ADDRESS, KEKTV_MARKETPLACE_ABI } from '@/config/contracts/kektv-marketplace'\nimport { KEKTECH_VOUCHERS, VOUCHER_TYPES } from '@/config/contracts/kektech-vouchers'\n\nexport type VoucherListing = {\n  seller: `0x${string}`\n  tokenId: number\n  voucherName: string\n  voucherIcon: string\n  rarity: string\n  amount: bigint\n  pricePerItem: bigint\n  totalPrice: bigint\n  active: boolean\n}\n\n// Known sellers list (temporary solution - will be replaced with event indexing)\nconst KNOWN_SELLERS: `0x${string}`[] = [\n  '0xD90e78886b165d0a5497409528042Fc22bB33d2E', // Creator wallet\n  // Add more seller addresses as they list items\n]\n\n/**\n * Hook to fetch KEKTV voucher marketplace listings\n *\n * Mode 1: Single Seller (when sellerAddress provided) - for \"Your Listings\"\n * Mode 2: All Sellers (when no sellerAddress) - for \"Browse & Buy\"\n *\n * Note: ERC-1155 marketplaces require seller address + tokenId for lookups\n * This temporary solution checks known sellers. Future: event indexing or backend API\n */\nexport function useKektvListings(sellerAddress?: `0x${string}`) {\n  const publicClient = usePublicClient()\n  const [listings, setListings] = useState<VoucherListing[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  // If seller address provided, check only that seller (for \"Your Listings\")\n  // If not provided, check ALL known sellers (for \"Browse & Buy\")\n  const targetAddresses = sellerAddress ? [sellerAddress] : KNOWN_SELLERS\n\n  useEffect(() => {\n    const fetchListings = async () => {\n      if (!publicClient || targetAddresses.length === 0) {\n        setListings([])\n        setIsLoading(false)\n        return\n      }\n\n      try {\n        setIsLoading(true)\n        setError(null)\n\n        const activeListings: VoucherListing[] = []\n\n        // Check all target addresses\n        for (const sellerAddr of targetAddresses) {\n          // Check all known voucher types (0-3) for each seller\n          for (const voucher of VOUCHER_TYPES) {\n            try {\n              const listing = await publicClient.readContract({\n                address: KEKTV_MARKETPLACE_ADDRESS,\n                abi: KEKTV_MARKETPLACE_ABI,\n                functionName: 'listings',\n                args: [sellerAddr, BigInt(voucher.id)],\n              })\n\n              if (listing && Array.isArray(listing)) {\n                // listings returns a tuple: [amount, pricePerItem, active]\n                const [amount, pricePerItem, active] = listing as [bigint, bigint, boolean]\n\n                if (active && amount > 0n && pricePerItem > 0n) {\n                  activeListings.push({\n                    seller: sellerAddr,\n                    tokenId: voucher.id,\n                    voucherName: voucher.name,\n                    voucherIcon: voucher.icon,\n                    rarity: voucher.rarity,\n                    amount,\n                    pricePerItem,\n                    totalPrice: amount * pricePerItem,\n                    active: true,\n                  })\n                }\n              }\n            } catch {\n              // Skip vouchers that error (not listed)\n              continue\n            }\n          }\n        }\n\n        setListings(activeListings)\n        setIsLoading(false)\n      } catch {\n        setError('Failed to fetch marketplace listings')\n        setIsLoading(false)\n      }\n    }\n\n    fetchListings()\n  }, [publicClient, ...targetAddresses])\n\n  return {\n    listings,\n    isLoading,\n    error,\n    refetch: () => {\n      setIsLoading(true)\n    },\n  }\n}\n\n/**\n * Hook to check user's voucher balances\n * Used to determine which vouchers they can list\n */\nexport function useUserVoucherBalances() {\n  const { address } = useAccount()\n\n  // Read balances for all voucher types\n  const { data: balances, isLoading, error } = useReadContract({\n    address: KEKTECH_VOUCHERS.address,\n    abi: KEKTECH_VOUCHERS.abi,\n    functionName: 'balanceOfBatch',\n    args: address ? [\n      [address, address, address, address],\n      [0n, 1n, 2n, 3n],\n    ] : undefined,\n  })\n\n  const vouchersWithBalances = VOUCHER_TYPES.map((voucher, index) => ({\n    ...voucher,\n    balance: balances ? balances[index] : 0n,\n  }))\n\n  return {\n    vouchers: vouchersWithBalances,\n    isLoading,\n    error,\n    hasVouchers: vouchersWithBalances.some(v => v.balance > 0n),\n  }\n}\n","import {\n  useAccount,\n  useWriteContract,\n  useWaitForTransactionReceipt,\n  useSwitchChain,\n  useReadContract,\n} from 'wagmi'\nimport { Address } from 'viem'\nimport { KEKTV_OFFERS_ADDRESS, KEKTV_OFFERS_ABI, type Offer } from '@/config/contracts/kektv-offers'\nimport { basedChain } from '@/config/chains'\n\n/**\n * Hook for KEKTV Offers operations (V2 - BASED Payments)\n *\n * Handles:\n * - Making offers on KEKTV vouchers (uses BASED native token)\n * - Accepting offers (if you own the vouchers)\n * - Canceling offers (if you made them)\n * - Rejecting offers (if they're on your vouchers)\n * - Querying offers by token, user, etc.\n * - Auto network switching to BasedAI\n *\n * V2 Changes:\n * - Uses BASED (native token) instead of TECH (ERC-20)\n * - No token approval needed\n * - Simpler UX for users\n */\nexport function useKektvOffers() {\n  const { address, chainId } = useAccount()\n  const { switchChainAsync } = useSwitchChain()\n  const { writeContractAsync, data: hash, isPending, error } = useWriteContract()\n\n  const { isLoading: isConfirming, isSuccess } = useWaitForTransactionReceipt({\n    hash,\n  })\n\n  /**\n   * Make an offer on a KEKTV voucher (V2 - pays in BASED)\n   * @param tokenId - Voucher type ID (0-3: Genesis, Silver, Gold, Platinum)\n   * @param amount - Number of vouchers to offer on\n   * @param totalBasedString - Total BASED to offer (e.g., \"500\" = 500 BASED total)\n   * @param voucherOwner - Address that owns the vouchers (can be zero address for general offers)\n   */\n  const makeOffer = async (\n    tokenId: number,\n    amount: bigint,\n    totalBasedString: string,\n    voucherOwner: string = '0x0000000000000000000000000000000000000000'\n  ) => {\n    if (!address) throw new Error('Wallet not connected')\n\n    try {\n      // Auto-switch to BasedAI Chain if on wrong network\n      if (chainId !== basedChain.id) {\n        await switchChainAsync({ chainId: basedChain.id })\n      }\n\n      // Convert BASED string to wei (1 BASED = 10^18 wei)\n      const totalBased = BigInt(totalBasedString) * BigInt(10 ** 18)\n\n      console.log('üí∞ Make Offer (V2 - BASED):', {\n        tokenId,\n        amount: amount.toString(),\n        totalBased: (totalBased / BigInt(10 ** 18)).toString() + ' BASED',\n        voucherOwner,\n      })\n\n      // Make the offer (send BASED as value, escrowed in contract)\n      const hash = await writeContractAsync({\n        address: KEKTV_OFFERS_ADDRESS,\n        abi: KEKTV_OFFERS_ABI,\n        functionName: 'makeOffer',\n        args: [BigInt(tokenId), amount, voucherOwner as `0x${string}`],\n        value: totalBased, // Send BASED as payment\n        gas: 500000n, // Fixed gas limit to avoid RPC estimation issues\n      })\n\n      return hash\n    } catch (error) {\n      throw error\n    }\n  }\n\n  /**\n   * Accept an offer on your vouchers\n   * @param offerId - The offer ID to accept\n   */\n  const acceptOffer = async (offerId: bigint) => {\n    if (!address) throw new Error('Wallet not connected')\n\n    try {\n      // Auto-switch to BasedAI Chain if on wrong network\n      if (chainId !== basedChain.id) {\n        await switchChainAsync({ chainId: basedChain.id })\n      }\n\n      console.log('‚úÖ Accepting Offer:', offerId.toString())\n\n      // Accept the offer (transfers vouchers to buyer, BASED to seller)\n      const hash = await writeContractAsync({\n        address: KEKTV_OFFERS_ADDRESS,\n        abi: KEKTV_OFFERS_ABI,\n        functionName: 'acceptOffer',\n        args: [offerId],\n        gas: 500000n,\n      })\n\n      return hash\n    } catch (error) {\n      throw error\n    }\n  }\n\n  /**\n   * Cancel your own offer\n   * @param offerId - The offer ID to cancel\n   */\n  const cancelOffer = async (offerId: bigint) => {\n    if (!address) throw new Error('Wallet not connected')\n\n    try {\n      // Auto-switch to BasedAI Chain if on wrong network\n      if (chainId !== basedChain.id) {\n        await switchChainAsync({ chainId: basedChain.id })\n      }\n\n      console.log('‚ùå Canceling Offer:', offerId.toString())\n\n      // Cancel the offer (refunds BASED to offerer)\n      const hash = await writeContractAsync({\n        address: KEKTV_OFFERS_ADDRESS,\n        abi: KEKTV_OFFERS_ABI,\n        functionName: 'cancelOffer',\n        args: [offerId],\n        gas: 300000n, // Lower gas for cancel\n      })\n\n      return hash\n    } catch (error) {\n      throw error\n    }\n  }\n\n  /**\n   * Reject an offer on your vouchers\n   * @param offerId - The offer ID to reject\n   */\n  const rejectOffer = async (offerId: bigint) => {\n    if (!address) throw new Error('Wallet not connected')\n\n    try {\n      // Auto-switch to BasedAI Chain if on wrong network\n      if (chainId !== basedChain.id) {\n        await switchChainAsync({ chainId: basedChain.id })\n      }\n\n      console.log('üö´ Rejecting Offer:', offerId.toString())\n\n      // Reject the offer (refunds BASED to offerer)\n      const hash = await writeContractAsync({\n        address: KEKTV_OFFERS_ADDRESS,\n        abi: KEKTV_OFFERS_ABI,\n        functionName: 'rejectOffer',\n        args: [offerId],\n        gas: 300000n, // Lower gas for reject\n      })\n\n      return hash\n    } catch (error) {\n      throw error\n    }\n  }\n\n  return {\n    // Write functions\n    makeOffer,\n    acceptOffer,\n    cancelOffer,\n    rejectOffer,\n\n    // Transaction states\n    isPending,\n    isConfirming,\n    isSuccess,\n    error,\n    hash,\n  }\n}\n\n/**\n * Hook to query offers by token ID\n * @param tokenId - Voucher type ID (0-3)\n */\nexport function useTokenOffers(tokenId: number | null) {\n  const { data, isLoading, error, refetch } = useReadContract({\n    address: KEKTV_OFFERS_ADDRESS,\n    abi: KEKTV_OFFERS_ABI,\n    functionName: 'getTokenOffers',\n    args: tokenId !== null ? [BigInt(tokenId)] : undefined,\n    query: {\n      enabled: tokenId !== null,\n      refetchInterval: 5000, // Auto-refetch every 5 seconds\n      staleTime: 0, // Always consider data stale\n    },\n  })\n\n  return {\n    offerIds: (data as bigint[]) || [],\n    isLoading,\n    error,\n    refetch,\n  }\n}\n\n/**\n * Hook to query offers by user (offers user made)\n * @param userAddress - User's wallet address\n */\nexport function useUserOffers(userAddress: `0x${string}` | undefined) {\n  const { data, isLoading, error, refetch } = useReadContract({\n    address: KEKTV_OFFERS_ADDRESS,\n    abi: KEKTV_OFFERS_ABI,\n    functionName: 'getUserOffers',\n    args: userAddress ? [userAddress] : undefined,\n    query: {\n      enabled: !!userAddress,\n      refetchInterval: 5000, // Auto-refetch every 5 seconds\n      staleTime: 0, // Always consider data stale\n    },\n  })\n\n  return {\n    offerIds: (data as bigint[]) || [],\n    isLoading,\n    error,\n    refetch,\n  }\n}\n\n/**\n * Hook to query received offers (offers on user's vouchers)\n * @param userAddress - User's wallet address\n */\nexport function useReceivedOffers(userAddress: `0x${string}` | undefined) {\n  const { data, isLoading, error, refetch } = useReadContract({\n    address: KEKTV_OFFERS_ADDRESS,\n    abi: KEKTV_OFFERS_ABI,\n    functionName: 'getReceivedOffers',\n    args: userAddress ? [userAddress] : undefined,\n    query: {\n      enabled: !!userAddress,\n      refetchInterval: 5000, // Auto-refetch every 5 seconds\n      staleTime: 0, // Always consider data stale\n    },\n  })\n\n  return {\n    offerIds: (data as bigint[]) || [],\n    isLoading,\n    error,\n    refetch,\n  }\n}\n\n/**\n * Hook to get details of a specific offer\n * @param offerId - The offer ID to fetch\n */\nexport function useOfferDetails(offerId: bigint | null) {\n  const { data, isLoading, error, refetch } = useReadContract({\n    address: KEKTV_OFFERS_ADDRESS,\n    abi: KEKTV_OFFERS_ABI,\n    functionName: 'getOffer',\n    args: offerId !== null ? [offerId] : undefined,\n    query: {\n      enabled: offerId !== null,\n    },\n  })\n\n  // Wagmi v2 returns struct data as an object with named properties, NOT as a tuple array!\n  // Contract returns struct with named fields\n  console.log('üîç useOfferDetails raw data:', { offerId: offerId?.toString(), data, typeofData: typeof data })\n\n  // Handle both object (Wagmi v2 struct) and array (old tuple) formats\n  const rawData = data as unknown\n  const dataAsObject = rawData as Record<string, unknown>\n  const dataAsArray = rawData as unknown[]\n\n  const offer: Offer | undefined = data\n    ? {\n        // Try object properties first (Wagmi v2), fallback to array indices (old format)\n        offerId: (dataAsObject.offerId as bigint) || (dataAsArray[0] as bigint),\n        offerer: ((dataAsObject.offerer as string) || (dataAsArray[1] as string)) as Address,\n        voucherOwner: ((dataAsObject.voucherOwner as string) || (dataAsArray[2] as string)) as Address,\n        tokenId: (dataAsObject.tokenId as bigint) || (dataAsArray[3] as bigint),\n        amount: (dataAsObject.amount as bigint) || (dataAsArray[4] as bigint),\n        offerPrice: (dataAsObject.offerPrice as bigint) || (dataAsArray[5] as bigint),\n        createdAt: (dataAsObject.createdAt as bigint) || (dataAsArray[6] as bigint),\n        active: dataAsObject.active !== undefined ? (dataAsObject.active as boolean) : (dataAsArray[7] as boolean),\n      }\n    : undefined\n\n  console.log('üîç useOfferDetails transformed offer:', offer)\n\n  return {\n    offer,\n    isLoading,\n    error,\n    refetch,\n  }\n}\n","import {\n  useAccount,\n  useWriteContract,\n  useWaitForTransactionReceipt,\n  useSwitchChain,\n} from 'wagmi'\nimport { KEKTV_MARKETPLACE_ADDRESS, KEKTV_MARKETPLACE_ABI } from '@/config/contracts/kektv-marketplace'\nimport { basedChain } from '@/config/chains'\n\n/**\n * Hook for KEKTV Marketplace operations (ERC-1155 vouchers)\n *\n * Handles:\n * - Listing vouchers for sale (with quantity)\n * - Buying vouchers from listings\n * - Cancelling listings\n * - Auto network switching to BasedAI\n */\nexport function useKektvMarketplace() {\n  const { address, chainId } = useAccount()\n  const { switchChainAsync } = useSwitchChain()\n  const { writeContractAsync, data: hash, isPending, error } = useWriteContract()\n\n  const { isLoading: isConfirming, isSuccess } = useWaitForTransactionReceipt({\n    hash,\n  })\n\n  /**\n   * List KEKTV vouchers for sale\n   * @param tokenId - Voucher type ID (0-3: Genesis, Silver, Gold, Platinum)\n   * @param amount - Number of vouchers to list\n   * @param pricePerItemString - Price per voucher in BASED (e.g., \"1000\")\n   */\n  const listVoucher = async (\n    tokenId: bigint,\n    amount: bigint,\n    pricePerItemString: string\n  ) => {\n    if (!address) throw new Error('Wallet not connected')\n\n    try {\n      // Auto-switch to BasedAI Chain if on wrong network\n      if (chainId !== basedChain.id) {\n        await switchChainAsync({ chainId: basedChain.id })\n      }\n\n      // Convert price string to wei (1 BASED = 10^18 wei)\n      const pricePerItem = BigInt(pricePerItemString) * BigInt(10 ** 18)\n\n      // List the voucher\n      const hash = await writeContractAsync({\n        address: KEKTV_MARKETPLACE_ADDRESS,\n        abi: KEKTV_MARKETPLACE_ABI,\n        functionName: 'listVoucher',\n        args: [tokenId, amount, pricePerItem],\n        gas: 500000n, // Fixed gas limit to avoid RPC estimation issues\n      })\n\n      return hash\n    } catch (error) {\n      throw error\n    }\n  }\n\n  /**\n   * Buy KEKTV vouchers from a listing\n   * @param seller - Address of the seller\n   * @param tokenId - Voucher type ID\n   * @param amount - Number of vouchers to buy\n   * @param totalPrice - Total price in wei (pricePerItem √ó amount, WITHOUT fee)\n   */\n  const buyVoucher = async (\n    seller: `0x${string}`,\n    tokenId: bigint,\n    amount: bigint,\n    totalPrice: bigint\n  ) => {\n    if (!address) throw new Error('Wallet not connected')\n\n    try {\n      // Auto-switch to BasedAI Chain if on wrong network\n      if (chainId !== basedChain.id) {\n        await switchChainAsync({ chainId: basedChain.id })\n      }\n\n      // üîß IMPORTANT: Buyer pays ONLY the listing price!\n      // Contract deducts 2.5% fee FROM THE SELLER's proceeds\n      // Example: 1000 BASED listing\n      //   - Buyer pays: 1000 BASED\n      //   - Seller receives: 975 BASED (1000 - 2.5%)\n      //   - Platform receives: 25 BASED (2.5% fee)\n      const platformFee = (totalPrice * 250n) / 10000n // 2.5%\n      const sellerReceives = totalPrice - platformFee\n\n      console.log('üí∞ Buy Calculation:', {\n        buyerPays: (totalPrice / BigInt(10 ** 18)).toString() + ' BASED',\n        sellerReceives: (sellerReceives / BigInt(10 ** 18)).toString() + ' BASED',\n        platformFee: (platformFee / BigInt(10 ** 18)).toString() + ' BASED',\n      })\n\n      // Buy the voucher - buyer pays ONLY listing price\n      // Fee is deducted from seller's proceeds by the contract\n      const hash = await writeContractAsync({\n        address: KEKTV_MARKETPLACE_ADDRESS,\n        abi: KEKTV_MARKETPLACE_ABI,\n        functionName: 'buyVoucher',\n        args: [seller, tokenId, amount],\n        value: totalPrice, // ‚úÖ Buyer pays ONLY listing price (fee deducted from seller!)\n        gas: 500000n, // Increased gas limit to handle complex operations\n      })\n\n      return hash\n    } catch (error) {\n      throw error\n    }\n  }\n\n  /**\n   * Cancel a voucher listing\n   * @param tokenId - Voucher type ID to cancel\n   */\n  const cancelListing = async (tokenId: bigint) => {\n    if (!address) throw new Error('Wallet not connected')\n\n    try {\n      // Auto-switch to BasedAI Chain if on wrong network\n      if (chainId !== basedChain.id) {\n        await switchChainAsync({ chainId: basedChain.id })\n      }\n\n      // Cancel the listing\n      const hash = await writeContractAsync({\n        address: KEKTV_MARKETPLACE_ADDRESS,\n        abi: KEKTV_MARKETPLACE_ABI,\n        functionName: 'cancelListing',\n        args: [tokenId],\n        gas: 200000n, // Fixed gas limit for cancel transactions\n      })\n\n      return hash\n    } catch (error) {\n      throw error\n    }\n  }\n\n  return {\n    listVoucher,\n    buyVoucher,\n    cancelListing,\n    isPending,\n    isConfirming,\n    isSuccess,\n    error,\n    hash,\n  }\n}\n","import { useAccount, useWriteContract, useWaitForTransactionReceipt, useReadContract } from 'wagmi'\nimport { useEffect } from 'react'\nimport { KEKTECH_VOUCHERS } from '@/config/contracts/kektech-vouchers'\nimport { KEKTV_OFFERS_ADDRESS } from '@/config/contracts/kektv-offers'\n\n/**\n * Hook to manage ERC-1155 voucher approval for the OFFERS contract\n *\n * This is separate from useKektvApproval which is for the marketplace!\n * The offers contract needs approval to transfer vouchers when accepting offers.\n *\n * ERC-1155 uses setApprovalForAll (no single token approval)\n * Once approved, offers contract can transfer all voucher types\n */\nexport function useKektvOffersApproval() {\n  const { address } = useAccount()\n  const { writeContractAsync, data: hash, isPending, error } = useWriteContract()\n\n  const { isLoading: isConfirming, isSuccess } = useWaitForTransactionReceipt({\n    hash,\n  })\n\n  // Check if offers contract is already approved\n  const { data: isApproved, isLoading, refetch } = useReadContract({\n    address: KEKTECH_VOUCHERS.address,\n    abi: KEKTECH_VOUCHERS.abi,\n    functionName: 'isApprovedForAll',\n    args: address ? [address, KEKTV_OFFERS_ADDRESS] : undefined,\n    query: {\n      enabled: !!address, // Only query when wallet connected\n      staleTime: 0, // Always fetch fresh data (no stale cache)\n      gcTime: 0, // Don't cache results (wagmi v2 uses gcTime instead of cacheTime)\n    },\n  })\n\n  // DEBUG: Log approval state changes\n  useEffect(() => {\n    if (address) {\n      console.log('üîê Offers Contract Approval Status:', {\n        userAddress: address,\n        offersContractAddress: KEKTV_OFFERS_ADDRESS,\n        isApprovedRaw: isApproved,\n        isApprovedBoolean: Boolean(isApproved),\n        isLoading,\n      })\n    }\n  }, [address, isApproved, isLoading])\n\n  /**\n   * Approve offers contract to transfer all voucher types\n   * Required before accepting offers!\n   */\n  const approveOffersContract = async () => {\n    if (!address) throw new Error('Wallet not connected')\n\n    try {\n      const hash = await writeContractAsync({\n        address: KEKTECH_VOUCHERS.address,\n        abi: KEKTECH_VOUCHERS.abi,\n        functionName: 'setApprovalForAll',\n        args: [KEKTV_OFFERS_ADDRESS, true],\n      })\n\n      return hash\n    } catch (error) {\n      throw error\n    }\n  }\n\n  return {\n    isApproved: Boolean(isApproved),\n    isLoading,\n    approveOffersContract,\n    isPending,\n    isConfirming,\n    isSuccess,\n    error,\n    hash,\n    refetch,\n  }\n}\n","'use client'\n\nimport { useReadContract, useAccount } from 'wagmi'\nimport { KEKTV_MARKETPLACE_ADDRESS, KEKTV_MARKETPLACE_ABI } from '@/config/contracts/kektv-marketplace'\n\n/**\n * useMarketplaceListing Hook\n * \n * Checks if a specific token is currently listed on the marketplace\n * Used to detect conflicts when accepting offers\n * \n * @param tokenId - The voucher token ID to check\n * @returns Listing details including amount, price, and active status\n */\nexport function useMarketplaceListing(tokenId: number | bigint | null) {\n  const { address } = useAccount()\n\n  const {\n    data: listing,\n    isLoading,\n    refetch,\n  } = useReadContract({\n    address: KEKTV_MARKETPLACE_ADDRESS,\n    abi: KEKTV_MARKETPLACE_ABI,\n    functionName: 'listings',\n    args: address && tokenId !== null ? [address, BigInt(tokenId)] : undefined,\n    query: {\n      enabled: !!address && tokenId !== null,\n      refetchInterval: 5000, // Refresh every 5 seconds\n    },\n  })\n\n  // Parse listing data from contract tuple\n  const isListed = listing ? listing[2] === true && listing[0] > 0n : false\n  const listingAmount = listing ? listing[0] : 0n\n  const listingPrice = listing ? listing[1] : 0n\n\n  return {\n    isListed,\n    listing: {\n      amount: listingAmount,\n      pricePerItem: listingPrice,\n      active: isListed,\n    },\n    isLoading,\n    refetch,\n  }\n}\n","/**\n * User Activity Page\n * Comprehensive trading hub with NFT card-based layout\n * Shows your listings, offers, and offers you can accept as visual cards\n */\n\n'use client'\n\nimport { useState, useRef, useEffect } from 'react'\nimport Image from 'next/image'\nimport { useAccount } from 'wagmi'\nimport { useMyOfferHistory } from '@/lib/hooks/useOfferHistory'\nimport { useKektvListings } from '@/lib/hooks/useKektvListings'\nimport { useKektvOffers } from '@/lib/hooks/useKektvOffers'\nimport { useKektvMarketplace } from '@/lib/hooks/useKektvMarketplace'\nimport { useUserOffers, useOfferDetails } from '@/lib/hooks/useKektvOffers'\nimport { useAllVoucherMetadata } from '@/lib/hooks/useVoucherMetadata'\nimport { useAllReceivableOffers } from '@/lib/hooks/useAllReceivableOffers'\nimport { useVoucherBalance } from '@/lib/hooks/useVoucherBalance'\nimport { useKektvOffersApproval } from '@/lib/hooks/useKektvOffersApproval'\nimport { useMarketplaceListing } from '@/lib/hooks/useMarketplaceListing'\nimport { useActiveOfferCount } from '@/lib/hooks/useActiveOfferCount'\nimport { formatUnits } from 'ethers'\nimport type { TradingEvent } from '@/lib/services/explorer-api'\nimport { VOUCHER_NAMES } from '@/config/contracts/kektv-offers'\n\n// Constants\nconst EXPLORER_BASE_URL = 'https://explorer.bf1337.org'\n\n// Helper function to safely get voucher name\nfunction getVoucherName(tokenId: number | bigint | undefined): string {\n  if (tokenId === undefined) return 'Unknown Voucher'\n  const id = Number(tokenId)\n  if (id in VOUCHER_NAMES) {\n    return VOUCHER_NAMES[id as keyof typeof VOUCHER_NAMES]\n  }\n  return `Voucher #${id}`\n}\n\n// Helper function to safely calculate price per item\nfunction calculatePricePerItem(offerPrice: bigint, amount: bigint): number {\n  const priceNum = Number(offerPrice)\n  const amountNum = Number(amount)\n  if (amountNum === 0 || !isFinite(amountNum) || amountNum < 0) return 0\n  return priceNum / amountNum / 1e18\n}\n\n// Helper function to safely calculate total price\nfunction calculateTotalPrice(offerPrice: bigint): number {\n  return Number(offerPrice) / 1e18\n}\n\nexport function UserActivityPage() {\n  const { address, isConnected } = useAccount()\n  const { data: events, isLoading, refetch: refetchHistory } = useMyOfferHistory()\n  const { listings, refetch: refetchListings } = useKektvListings(address)\n  const { offerIds: madeOfferIds, refetch: refetchMade } = useUserOffers(address)\n  const { offerIds: receivedOfferIds, refetch: refetchReceived } = useAllReceivableOffers() // NEW: Comprehensive offer detection\n  const { metadataMap } = useAllVoucherMetadata()\n  const { ownedVouchers } = useVoucherBalance() // For filtering offers\n  const [activeTab, setActiveTab] = useState<'accept' | 'your-offers' | 'listings'>('accept')\n\n  // FIX: Count only ACTIVE offers (fixes \"shows 2, displays 1\" bug)\n  const { activeCount: activeReceivedCount } = useActiveOfferCount(receivedOfferIds)\n  const { activeCount: activeMadeCount } = useActiveOfferCount(madeOfferIds)\n\n  // DEBUG: Log offer IDs to diagnose display issues\n  console.log('üéØ UserActivityPage - Offer IDs:', {\n    address,\n    madeOfferIds: madeOfferIds.map(id => id.toString()),\n    receivedOfferIds: receivedOfferIds.map(id => id.toString()),\n    madeCount: madeOfferIds.length,\n    receivedCount: receivedOfferIds.length,\n  })\n\n  const handleRefresh = async () => {\n    await Promise.all([refetchHistory(), refetchListings(), refetchMade(), refetchReceived()])\n  }\n\n  if (!isConnected) {\n    return (\n      <div className=\"max-w-4xl mx-auto text-center py-16\">\n        <div className=\"text-6xl mb-4\">üë§</div>\n        <h2 className=\"text-2xl font-bold text-[#daa520] mb-2 font-fredoka\">\n          Connect Your Wallet\n        </h2>\n        <p className=\"text-gray-400\">Connect your wallet to view your trading activity</p>\n      </div>\n    )\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"max-w-4xl mx-auto text-center py-16\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#daa520] mx-auto mb-4\"></div>\n        <p className=\"text-gray-400\">Loading your activity...</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto\">\n      {/* Header */}\n      <div className=\"text-center space-y-2 py-6\">\n        <div className=\"flex items-center justify-center gap-4\">\n          <h1 className=\"text-4xl font-bold text-[#daa520] font-fredoka\">My Trading Activity</h1>\n          <button\n            onClick={handleRefresh}\n            disabled={isLoading}\n            className=\"px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-sm text-gray-300 hover:border-[#daa520] transition disabled:opacity-50\"\n          >\n            üîÑ Refresh\n          </button>\n        </div>\n        <p className=\"text-gray-400\">Manage your offers, listings, and view trading history</p>\n      </div>\n\n      {/* Compact Horizontal Statistics Bar - STICKY (Doubles as navigation) */}\n      <div className=\"sticky top-0 z-20 bg-black/90 backdrop-blur-sm border-b border-gray-700/50\">\n        <div className=\"flex items-center justify-around py-4 px-6\">\n          <StatBarItem\n            icon=\"‚ú®\"\n            label=\"Offers to Accept\"\n            value={activeReceivedCount}\n            highlight={activeReceivedCount > 0}\n            onClick={() => setActiveTab('accept')}\n            isActive={activeTab === 'accept'}\n          />\n          <StatBarItem\n            icon=\"üíº\"\n            label=\"Your Active Offers\"\n            value={activeMadeCount}\n            highlight={activeMadeCount > 0}\n            onClick={() => setActiveTab('your-offers')}\n            isActive={activeTab === 'your-offers'}\n          />\n          <StatBarItem\n            icon=\"üè™\"\n            label=\"Active Listings\"\n            value={listings.length}\n            highlight={listings.length > 0}\n            onClick={() => setActiveTab('listings')}\n            isActive={activeTab === 'listings'}\n          />\n        </div>\n      </div>\n\n      {/* Single Active Section - Conditional Rendering */}\n      <div className=\"p-6\">\n        {activeTab === 'accept' && (\n          <OffersYouCanAcceptSection\n            offerIds={receivedOfferIds}\n            onRefresh={handleRefresh}\n            metadataMap={metadataMap}\n            ownedVouchers={ownedVouchers}\n            userAddress={address}\n          />\n        )}\n\n        {activeTab === 'your-offers' && (\n          <YourOffersSection\n            offerIds={madeOfferIds}\n            onRefresh={handleRefresh}\n            metadataMap={metadataMap}\n          />\n        )}\n\n        {activeTab === 'listings' && (\n          <YourMarketplaceListingsSection\n            listings={listings}\n            onRefresh={handleRefresh}\n            metadataMap={metadataMap}\n          />\n        )}\n      </div>\n\n      {/* Historical Activity - Moved to bottom */}\n      <div className=\"px-6 pb-6 space-y-4 pt-6 border-t border-gray-700\">\n        <h2 className=\"text-2xl font-bold text-[#daa520] font-fredoka\">üìú Activity History</h2>\n        <ActivityHistory events={events || []} userAddress={address!} />\n      </div>\n    </div>\n  )\n}\n\n/**\n * Stat Bar Item - Compact horizontal stat with click-to-navigate\n */\nfunction StatBarItem({\n  icon,\n  label,\n  value,\n  highlight,\n  onClick,\n  isActive,\n}: {\n  icon: string\n  label: string\n  value: number\n  highlight?: boolean\n  onClick: () => void\n  isActive: boolean\n}) {\n  return (\n    <button\n      onClick={onClick}\n      className={`flex items-center gap-3 px-6 py-2 rounded-lg transition-all cursor-pointer ${\n        isActive\n          ? 'bg-[#daa520]/20 border border-[#daa520]/50'\n          : 'border border-transparent hover:bg-gray-800/50'\n      }`}\n    >\n      <span className=\"text-3xl\">{icon}</span>\n      <div className=\"text-left\">\n        <div className={`text-2xl font-bold ${highlight ? 'text-[#daa520]' : 'text-white'}`}>\n          {value}\n        </div>\n        <div className=\"text-xs text-gray-400 whitespace-nowrap\">{label}</div>\n      </div>\n    </button>\n  )\n}\n\n/**\n * Offers You Can Accept Section - NFT Card Grid\n */\nfunction OffersYouCanAcceptSection({\n  offerIds,\n  onRefresh,\n  metadataMap,\n  ownedVouchers,\n  userAddress,\n}: {\n  offerIds: bigint[]\n  onRefresh: () => void\n  metadataMap: ReturnType<typeof useAllVoucherMetadata>['metadataMap']\n  ownedVouchers: ReturnType<typeof useVoucherBalance>['ownedVouchers']\n  userAddress: `0x${string}` | undefined\n}) {\n  if (offerIds.length === 0) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"text-6xl mb-4\">üí∞</div>\n        <p className=\"text-lg text-gray-400\">No offers to accept right now</p>\n        <p className=\"text-sm text-gray-500 mt-2\">Offers on your vouchers will appear here as NFT cards</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-4 gap-5\">\n      {offerIds.map((offerId) => (\n        <AcceptableOfferNFTCard\n          key={offerId.toString()}\n          offerId={offerId}\n          onRefresh={onRefresh}\n          metadataMap={metadataMap}\n          ownedVouchers={ownedVouchers}\n          userAddress={userAddress}\n        />\n      ))}\n    </div>\n  )\n}\n\n/**\n * Acceptable Offer NFT Card - Full voucher card with image\n * NOW WITH SMART FILTERING:\n * - Filters out offers you made yourself\n * - Filters out inactive offers\n * - Filters out general offers for tokens you don't own\n */\nfunction AcceptableOfferNFTCard({\n  offerId,\n  onRefresh,\n  metadataMap,\n  ownedVouchers,\n  userAddress,\n}: {\n  offerId: bigint\n  onRefresh: () => void\n  metadataMap: ReturnType<typeof useAllVoucherMetadata>['metadataMap']\n  ownedVouchers: ReturnType<typeof useVoucherBalance>['ownedVouchers']\n  userAddress: `0x${string}` | undefined\n}) {\n  const { offer, isLoading } = useOfferDetails(offerId)\n  const { acceptOffer, rejectOffer, isPending } = useKektvOffers()\n  const { cancelListing } = useKektvMarketplace()\n  const {\n    isApproved,\n    isLoading: isCheckingApproval,\n    approveOffersContract,\n    isPending: isApprovePending,\n    isConfirming: isApproveConfirming,\n    refetch: refetchApproval\n  } = useKektvOffersApproval()\n\n  // Check if this token is listed on marketplace\n  const { isListed, listing: _listing, refetch: refetchListing } = useMarketplaceListing(\n    offer ? Number(offer.tokenId) : null\n  )\n\n  const [isAccepting, setIsAccepting] = useState(false)\n  const [isRejecting, setIsRejecting] = useState(false)\n  const [isDelisting, setIsDelisting] = useState(false)\n  const isMountedRef = useRef(true)\n\n  useEffect(() => {\n    return () => {\n      isMountedRef.current = false\n    }\n  }, [])\n\n  const handleApprove = async () => {\n    try {\n      await approveOffersContract()\n      // Approval successful - refetch approval status to update UI\n      // Wait longer for blockchain confirmation (3 blocks ~36s)\n      setTimeout(() => {\n        refetchApproval()\n      }, 5000) // Wait 5s for blockchain confirmation\n    } catch (error) {\n      console.error('Failed to approve:', error)\n    }\n  }\n\n  const handleAccept = async () => {\n    if (!offer) return\n\n    try {\n      // Step 1: Check if token is listed on marketplace\n      if (isListed) {\n        console.log('üè™ Token is listed on marketplace - auto-delisting first')\n        setIsDelisting(true)\n\n        try {\n          // Delist from marketplace first\n          await cancelListing(offer.tokenId)\n          console.log('‚úÖ Successfully delisted from marketplace')\n\n          // Wait for blockchain confirmation\n          await new Promise(resolve => setTimeout(resolve, 3000))\n\n          // Refetch listing status to confirm\n          await refetchListing()\n        } catch (delistError) {\n          console.error('‚ùå Failed to delist:', delistError)\n          throw new Error('Failed to delist from marketplace. Please try manually.')\n        } finally {\n          setIsDelisting(false)\n        }\n      }\n\n      // Step 2: Accept the offer\n      setIsAccepting(true)\n      console.log('‚úÖ Accepting offer...')\n      await acceptOffer(offerId)\n\n      if (isMountedRef.current) {\n        onRefresh()\n      }\n    } catch (error) {\n      console.error('Failed to accept offer:', error)\n    } finally {\n      if (isMountedRef.current) {\n        setIsAccepting(false)\n        setIsDelisting(false)\n      }\n    }\n  }\n\n  const handleReject = async () => {\n    try {\n      setIsRejecting(true)\n      await rejectOffer(offerId)\n      if (isMountedRef.current) {\n        onRefresh()\n      }\n    } catch (error) {\n      console.error('Failed to reject offer:', error)\n    } finally {\n      if (isMountedRef.current) {\n        setIsRejecting(false)\n      }\n    }\n  }\n\n  // IMPORTANT: Check loading state FIRST before accessing offer properties\n  if (isLoading || !offer) {\n    return (\n      <div className=\"bg-gradient-to-br from-[#daa520]/10 to-yellow-600/10 rounded-lg border border-[#daa520]/20 p-6\">\n        <div className=\"animate-pulse text-center text-gray-400\">Loading offer...</div>\n      </div>\n    )\n  }\n\n  // CRITICAL: Validate ALL required offer properties exist before using them\n  // The contract might return partial data in edge cases\n  if (!offer.offerer || !offer.voucherOwner || offer.tokenId === undefined || offer.amount === undefined || offer.offerPrice === undefined) {\n    console.log('üö´ Offer filtered: Missing properties', {\n      offerId: offerId.toString(),\n      hasOfferer: !!offer.offerer,\n      hasVoucherOwner: !!offer.voucherOwner,\n      hasTokenId: offer.tokenId !== undefined,\n      hasAmount: offer.amount !== undefined,\n      hasOfferPrice: offer.offerPrice !== undefined,\n    })\n    return null\n  }\n\n  // DEBUG: Log offer details to diagnose filtering\n  console.log('üîç Checking offer:', {\n    offerId: offerId.toString(),\n    tokenId: offer.tokenId.toString(),\n    offerer: offer.offerer,\n    voucherOwner: offer.voucherOwner,\n    amount: offer.amount.toString(),\n    active: offer.active,\n    userAddress: userAddress,\n  })\n\n  // SIMPLIFIED filtering: Only filter out obviously wrong offers\n  // Ownership validation will happen when user tries to accept\n  if (userAddress) {\n    // 1. Filter out offers you made yourself\n    if (offer.offerer.toLowerCase() === userAddress.toLowerCase()) {\n      console.log('üö´ Offer filtered: You made this offer yourself')\n      return null\n    }\n\n    // 2. Filter out inactive offers\n    if (!offer.active) {\n      console.log('üö´ Offer filtered: Offer is inactive')\n      return null\n    }\n\n    // 3. Distinguish GENERAL offers (voucherOwner = 0x0) vs TARGETED offers (voucherOwner = specific address)\n    const isGeneralOffer = offer.voucherOwner === '0x0000000000000000000000000000000000000000'\n    console.log('üìä Offer type check:', {\n      offerId: offerId.toString(),\n      tokenId: offer.tokenId.toString(),\n      voucherOwner: offer.voucherOwner,\n      isGeneralOffer,\n      userAddress,\n      ownedVouchers: ownedVouchers.map(v => ({ id: v.id, balance: v.balanceNumber })),\n    })\n\n    if (!isGeneralOffer) {\n      // TARGETED OFFER - only show if it's targeted at YOU\n      if (offer.voucherOwner.toLowerCase() !== userAddress.toLowerCase()) {\n        console.log('üö´ Offer filtered: Targeted offer not for someone else')\n        return null\n      }\n      // Targeted offer for you - show it (user can accept or reject)\n    } else {\n      // GENERAL OFFER - only show if you own enough vouchers to accept\n      // General offers CANNOT be rejected by users, so don't show if insufficient balance\n      const userVoucher = ownedVouchers.find(v => v.id === Number(offer.tokenId))\n      const hasEnoughVouchers = userVoucher && userVoucher.balanceNumber >= Number(offer.amount)\n\n      if (!hasEnoughVouchers) {\n        console.log('üö´ Offer filtered: General offer but insufficient vouchers', {\n          needed: offer.amount.toString(),\n          owned: userVoucher?.balanceNumber ?? 0,\n        })\n        return null // Don't show general offers if user can't accept them\n      }\n      // General offer and user has enough - show it (user can only accept, not reject)\n    }\n  }\n\n  console.log('‚úÖ Offer PASSED filters - rendering card!')\n\n  const metadata = metadataMap[Number(offer.tokenId)]\n  const mediaUrl = metadata?.animation_url || metadata?.image\n  const voucherName = metadata?.name || getVoucherName(offer.tokenId)\n  const pricePerItem = calculatePricePerItem(offer.offerPrice, offer.amount)\n  const totalPrice = calculateTotalPrice(offer.offerPrice)\n\n  // Determine offer type for UI rendering\n  const isGeneralOffer = offer.voucherOwner === '0x0000000000000000000000000000000000000000'\n\n  // Check if user owns enough vouchers (defensive check, should already be filtered)\n  const userVoucher = ownedVouchers.find(v => v.id === Number(offer.tokenId))\n  const hasEnoughVouchers = userVoucher && userVoucher.balanceNumber >= Number(offer.amount)\n\n  return (\n    <div className=\"bg-gradient-to-br from-green-500/10 to-emerald-600/10 rounded-lg border-2 border-green-500/30 hover:border-green-500/50 transition-all relative shadow-lg\">\n      {/* \"You Can Accept\" Badge */}\n      <div className=\"absolute top-3 right-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white text-xs px-3 py-1 rounded-full font-bold shadow-lg z-10\">\n        ‚ú® Accept This\n      </div>\n\n      <div className=\"p-6 space-y-4\">\n        {/* Voucher Media */}\n        {mediaUrl ? (\n          <div className=\"relative w-full h-48 rounded-lg overflow-hidden bg-black/20 mb-4\">\n            <Image\n              src={mediaUrl}\n              alt={voucherName}\n              fill\n              className=\"object-contain\"\n              unoptimized\n            />\n          </div>\n        ) : (\n          <div className=\"text-center mb-4\">\n            <div className=\"text-6xl mb-2\">üí∞</div>\n          </div>\n        )}\n\n        {/* Voucher Info */}\n        <div className=\"text-center mb-2\">\n          <h3 className=\"text-xl font-bold text-[#daa520] font-fredoka\">\n            {voucherName}\n          </h3>\n          <p className=\"text-xs text-gray-500 mt-1\">\n            #{offer.tokenId.toString()}\n          </p>\n        </div>\n\n        {/* Offer Details */}\n        <div className=\"space-y-2 text-sm bg-black/20 rounded-lg p-4\">\n          <div className=\"flex justify-between text-gray-400\">\n            <span>Offerer:</span>\n            <span className=\"text-white font-mono text-xs\">\n              {offer.offerer.slice(0, 6)}...{offer.offerer.slice(-4)}\n            </span>\n          </div>\n          <div className=\"flex justify-between text-gray-400\">\n            <span>Quantity:</span>\n            <span className=\"text-white font-bold\">{offer.amount.toString()}</span>\n          </div>\n          <div className=\"flex justify-between text-gray-400\">\n            <span>Price/Each:</span>\n            <span className=\"text-white font-bold\">\n              {pricePerItem.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} BASED\n            </span>\n          </div>\n          <div className=\"flex justify-between border-t border-gray-800 pt-2 mt-2\">\n            <span className=\"font-bold text-gray-300\">Total:</span>\n            <span className=\"text-[#daa520] font-bold text-lg\">\n              {totalPrice.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} BASED\n            </span>\n          </div>\n          <div className=\"text-xs text-gray-500 text-center mt-2\">\n            üí∞ BASED escrowed\n          </div>\n        </div>\n\n        {/* Action Buttons */}\n        {!hasEnoughVouchers ? (\n          /* User doesn't own enough vouchers (defensive - should be filtered out) */\n          <div className=\"space-y-3\">\n            <div className=\"text-center bg-red-500/10 border border-red-500/30 rounded-lg p-4\">\n              <div className=\"text-red-400 font-bold mb-1\">‚ùå Insufficient Vouchers</div>\n              <div className=\"text-xs text-gray-400\">\n                You need {offer.amount.toString()} {voucherName} but only have {userVoucher?.balanceNumber ?? 0}\n              </div>\n            </div>\n            {/* Only show reject button for TARGETED offers (general offers can't be rejected) */}\n            {!isGeneralOffer && (\n              <button\n                onClick={handleReject}\n                disabled={isPending || isRejecting}\n                className=\"w-full py-3 rounded-lg font-fredoka font-bold transition-all disabled:opacity-50 disabled:cursor-not-allowed bg-gradient-to-r from-red-500 to-rose-600 text-white hover:scale-105 shadow-lg shadow-red-500/30\"\n              >\n                {isRejecting ? 'Rejecting...' : 'üö´ Reject Offer'}\n              </button>\n            )}\n            {/* General offers: Show explanation instead of reject button */}\n            {isGeneralOffer && (\n              <div className=\"text-center text-xs text-gray-500 p-2\">\n                ‚ÑπÔ∏è General offers cannot be rejected. Only the offerer can cancel.\n              </div>\n            )}\n          </div>\n        ) : !isApproved && !isCheckingApproval ? (\n          /* Show approval button first if not approved */\n          <button\n            onClick={handleApprove}\n            disabled={isApprovePending || isApproveConfirming}\n            className=\"w-full py-3 rounded-lg font-fredoka font-bold transition-all disabled:opacity-50 disabled:cursor-not-allowed bg-gradient-to-r from-yellow-500 to-orange-600 text-white hover:scale-105 shadow-lg shadow-yellow-500/30\"\n          >\n            {isApprovePending || isApproveConfirming ? 'üîÑ Approving...' : 'üîì Approve First'}\n          </button>\n        ) : (\n          /* Show accept/reject buttons once approved */\n          <div className={isGeneralOffer ? \"space-y-3\" : \"grid grid-cols-2 gap-3\"}>\n            {/* Accept Button - with auto-delist support */}\n            <div className={isGeneralOffer ? 'w-full' : ''}>\n              {/* Show marketplace warning if listed */}\n              {isListed && !isDelisting && !isAccepting && (\n                <div className=\"mb-2 text-xs text-yellow-400 text-center p-2 bg-yellow-500/10 border border-yellow-500/30 rounded\">\n                  ‚ö†Ô∏è Listed on marketplace - will auto-delist first\n                </div>\n              )}\n              <button\n                onClick={handleAccept}\n                disabled={isPending || isAccepting || isDelisting || isRejecting || isCheckingApproval}\n                className={`w-full py-3 rounded-lg font-fredoka font-bold transition-all disabled:opacity-50 disabled:cursor-not-allowed bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:scale-105 shadow-lg shadow-green-500/30`}\n              >\n                {isDelisting ? 'üè™ Delisting...' : isAccepting ? '‚úÖ Accepting...' : isListed ? 'üîÑ Delist & Accept' : '‚úÖ Accept'}\n              </button>\n            </div>\n\n            {/* Reject Button - ONLY for targeted offers */}\n            {!isGeneralOffer && (\n              <button\n                onClick={handleReject}\n                disabled={isPending || isAccepting || isRejecting || isCheckingApproval}\n                className=\"py-3 rounded-lg font-fredoka font-bold transition-all disabled:opacity-50 disabled:cursor-not-allowed bg-red-500/20 border border-red-500/50 text-red-400 hover:bg-red-500/30\"\n              >\n                {isRejecting ? 'Rejecting...' : 'üö´ Reject'}\n              </button>\n            )}\n\n            {/* General offers: Show info message */}\n            {isGeneralOffer && (\n              <div className=\"text-center text-xs text-gray-500 p-2\">\n                ‚ÑπÔ∏è General offers cannot be rejected\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\n/**\n * Your Offers Section - NFT Card Grid\n */\nfunction YourOffersSection({\n  offerIds,\n  onRefresh,\n  metadataMap,\n}: {\n  offerIds: bigint[]\n  onRefresh: () => void\n  metadataMap: ReturnType<typeof useAllVoucherMetadata>['metadataMap']\n}) {\n  if (offerIds.length === 0) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"text-6xl mb-4\">üíº</div>\n        <p className=\"text-lg text-gray-400\">You haven&apos;t created any offers yet</p>\n        <p className=\"text-sm text-gray-500 mt-2\">Browse All Offers and make an offer to get started</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-4 gap-5\">\n      {offerIds.map((offerId) => (\n        <YourOfferNFTCard\n          key={offerId.toString()}\n          offerId={offerId}\n          onRefresh={onRefresh}\n          metadataMap={metadataMap}\n        />\n      ))}\n    </div>\n  )\n}\n\n/**\n * Your Offer NFT Card - Full voucher card with image\n */\nfunction YourOfferNFTCard({\n  offerId,\n  onRefresh,\n  metadataMap,\n}: {\n  offerId: bigint\n  onRefresh: () => void\n  metadataMap: ReturnType<typeof useAllVoucherMetadata>['metadataMap']\n}) {\n  const { offer, isLoading } = useOfferDetails(offerId)\n  const { cancelOffer, isPending } = useKektvOffers()\n  const [isCancelling, setIsCancelling] = useState(false)\n  const isMountedRef = useRef(true)\n\n  console.log('üíº YourOfferNFTCard rendering:', {\n    offerId: offerId.toString(),\n    isLoading,\n    hasOffer: !!offer,\n  })\n\n  useEffect(() => {\n    return () => {\n      isMountedRef.current = false\n    }\n  }, [])\n\n  const handleCancel = async () => {\n    try {\n      setIsCancelling(true)\n      await cancelOffer(offerId)\n      if (isMountedRef.current) {\n        onRefresh()\n      }\n    } catch (error) {\n      console.error('Failed to cancel offer:', error)\n    } finally {\n      if (isMountedRef.current) {\n        setIsCancelling(false)\n      }\n    }\n  }\n\n  if (isLoading || !offer) {\n    console.log('üíº YourOfferNFTCard: Still loading or no offer data')\n    return (\n      <div className=\"bg-gradient-to-br from-[#daa520]/10 to-yellow-600/10 rounded-lg border border-[#daa520]/20 p-6\">\n        <div className=\"animate-pulse text-center text-gray-400\">Loading offer...</div>\n      </div>\n    )\n  }\n\n  // CRITICAL: Validate ALL required offer properties exist\n  if (!offer.offerer || !offer.voucherOwner || offer.tokenId === undefined || offer.amount === undefined || offer.offerPrice === undefined) {\n    console.log('üíº YourOfferNFTCard: Missing properties - filtering out', {\n      hasOfferer: !!offer.offerer,\n      hasVoucherOwner: !!offer.voucherOwner,\n      hasTokenId: offer.tokenId !== undefined,\n      hasAmount: offer.amount !== undefined,\n      hasOfferPrice: offer.offerPrice !== undefined,\n    })\n    return null\n  }\n\n  console.log('üíº YourOfferNFTCard: Rendering card for offer', {\n    offerId: offerId.toString(),\n    tokenId: offer.tokenId.toString(),\n    amount: offer.amount.toString(),\n    active: offer.active,\n  })\n\n  // CRITICAL: Filter out inactive (cancelled/accepted/rejected) offers\n  if (!offer.active) {\n    console.log('üíº YourOfferNFTCard: Filtering out inactive offer', {\n      offerId: offerId.toString(),\n      active: offer.active,\n    })\n    return null\n  }\n\n  const metadata = metadataMap[Number(offer.tokenId)]\n  const mediaUrl = metadata?.animation_url || metadata?.image\n  const voucherName = metadata?.name || getVoucherName(offer.tokenId)\n  const pricePerItem = calculatePricePerItem(offer.offerPrice, offer.amount)\n  const totalPrice = calculateTotalPrice(offer.offerPrice)\n\n  return (\n    <div className=\"bg-gradient-to-br from-[#daa520]/10 to-yellow-600/10 rounded-lg border border-[#daa520]/20 hover:border-[#daa520]/40 transition-all shadow-md\">\n      <div className=\"p-6 space-y-4\">\n        {/* Voucher Media */}\n        {mediaUrl ? (\n          <div className=\"relative w-full h-48 rounded-lg overflow-hidden bg-black/20 mb-4\">\n            <Image\n              src={mediaUrl}\n              alt={voucherName}\n              fill\n              className=\"object-contain\"\n              unoptimized\n            />\n          </div>\n        ) : (\n          <div className=\"text-center mb-4\">\n            <div className=\"text-6xl mb-2\">üíº</div>\n          </div>\n        )}\n\n        {/* Voucher Info */}\n        <div className=\"text-center mb-2\">\n          <h3 className=\"text-xl font-bold text-[#daa520] font-fredoka\">\n            {voucherName}\n          </h3>\n          <p className=\"text-xs text-gray-500 mt-1\">\n            #{offer.tokenId.toString()}\n          </p>\n        </div>\n\n        {/* Offer Details */}\n        <div className=\"space-y-2 text-sm bg-black/20 rounded-lg p-4\">\n          <div className=\"flex justify-between text-gray-400\">\n            <span>To:</span>\n            <span className=\"text-white font-mono text-xs\">\n              {offer.voucherOwner === '0x0000000000000000000000000000000000000000'\n                ? 'Anyone'\n                : `${offer.voucherOwner.slice(0, 6)}...${offer.voucherOwner.slice(-4)}`\n              }\n            </span>\n          </div>\n          <div className=\"flex justify-between text-gray-400\">\n            <span>Quantity:</span>\n            <span className=\"text-white font-bold\">{offer.amount.toString()}</span>\n          </div>\n          <div className=\"flex justify-between text-gray-400\">\n            <span>Price/Each:</span>\n            <span className=\"text-white font-bold\">\n              {pricePerItem.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} BASED\n            </span>\n          </div>\n          <div className=\"flex justify-between border-t border-gray-800 pt-2 mt-2\">\n            <span className=\"font-bold text-gray-300\">Total:</span>\n            <span className=\"text-[#daa520] font-bold text-lg\">\n              {totalPrice.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} BASED\n            </span>\n          </div>\n        </div>\n\n        {/* Cancel Button */}\n        <button\n          onClick={handleCancel}\n          disabled={isPending || isCancelling}\n          className=\"w-full py-3 rounded-lg font-fredoka font-bold transition-all disabled:opacity-50 disabled:cursor-not-allowed bg-red-500/20 border border-red-500/50 text-red-400 hover:bg-red-500/30\"\n        >\n          {isPending || isCancelling ? 'Cancelling...' : '‚ùå Cancel Offer'}\n        </button>\n      </div>\n    </div>\n  )\n}\n\n/**\n * Your Marketplace Listings Section - NFT Card Grid\n */\nfunction YourMarketplaceListingsSection({\n  listings,\n  onRefresh,\n  metadataMap,\n}: {\n  listings: ReturnType<typeof useKektvListings>['listings']\n  onRefresh: () => void\n  metadataMap: ReturnType<typeof useAllVoucherMetadata>['metadataMap']\n}) {\n  if (listings.length === 0) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"text-6xl mb-4\">üè™</div>\n        <p className=\"text-lg text-gray-400\">You don&apos;t have any active listings</p>\n        <p className=\"text-sm text-gray-500 mt-2\">List your vouchers for sale to get started</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-4 gap-5\">\n      {listings.map((listing) => (\n        <MarketplaceListingNFTCard\n          key={`${listing.seller}-${listing.tokenId}`}\n          listing={listing}\n          onRefresh={onRefresh}\n          metadataMap={metadataMap}\n        />\n      ))}\n    </div>\n  )\n}\n\n/**\n * Marketplace Listing NFT Card - Full voucher card with image\n */\nfunction MarketplaceListingNFTCard({\n  listing,\n  onRefresh,\n  metadataMap,\n}: {\n  listing: ReturnType<typeof useKektvListings>['listings'][0]\n  onRefresh: () => void\n  metadataMap: ReturnType<typeof useAllVoucherMetadata>['metadataMap']\n}) {\n  const { cancelListing, isPending } = useKektvMarketplace()\n  const [isCancelling, setIsCancelling] = useState(false)\n  const isMountedRef = useRef(true)\n\n  useEffect(() => {\n    return () => {\n      isMountedRef.current = false\n    }\n  }, [])\n\n  const handleCancel = async () => {\n    try {\n      setIsCancelling(true)\n      await cancelListing(BigInt(listing.tokenId))\n      if (isMountedRef.current) {\n        onRefresh()\n      }\n    } catch (error) {\n      console.error('Failed to cancel listing:', error)\n    } finally {\n      if (isMountedRef.current) {\n        setIsCancelling(false)\n      }\n    }\n  }\n\n  // CRITICAL: Validate ALL required listing properties exist\n  if (listing.tokenId === undefined || listing.amount === undefined || listing.pricePerItem === undefined || listing.totalPrice === undefined) {\n    return null\n  }\n\n  const metadata = metadataMap[Number(listing.tokenId)]\n  const mediaUrl = metadata?.animation_url || metadata?.image\n  const voucherName = metadata?.name || getVoucherName(listing.tokenId)\n  const pricePerItem = Number(listing.pricePerItem) / 1e18\n  const totalPrice = Number(listing.totalPrice) / 1e18\n\n  return (\n    <div className=\"bg-gradient-to-br from-[#daa520]/10 to-yellow-600/10 rounded-lg border border-[#daa520]/20 hover:border-[#daa520]/40 transition-all shadow-md\">\n      <div className=\"p-6 space-y-4\">\n        {/* Voucher Media */}\n        {mediaUrl ? (\n          <div className=\"relative w-full h-48 rounded-lg overflow-hidden bg-black/20 mb-4\">\n            <Image\n              src={mediaUrl}\n              alt={voucherName}\n              fill\n              className=\"object-contain\"\n              unoptimized\n            />\n          </div>\n        ) : (\n          <div className=\"text-center mb-4\">\n            <div className=\"text-6xl mb-2\">üè™</div>\n          </div>\n        )}\n\n        {/* Voucher Info */}\n        <div className=\"text-center mb-2\">\n          <h3 className=\"text-xl font-bold text-[#daa520] font-fredoka\">\n            {voucherName}\n          </h3>\n          <p className=\"text-xs text-gray-500 mt-1\">\n            #{listing.tokenId.toString()}\n          </p>\n        </div>\n\n        {/* Listing Details */}\n        <div className=\"space-y-2 text-sm bg-black/20 rounded-lg p-4\">\n          <div className=\"flex justify-between text-gray-400\">\n            <span>Quantity:</span>\n            <span className=\"text-white font-bold\">{listing.amount.toString()} vouchers</span>\n          </div>\n          <div className=\"flex justify-between text-gray-400\">\n            <span>Price/Each:</span>\n            <span className=\"text-white font-bold\">\n              {pricePerItem.toLocaleString()} BASED\n            </span>\n          </div>\n          <div className=\"flex justify-between border-t border-gray-800 pt-2 mt-2\">\n            <span className=\"font-bold text-gray-300\">Total Value:</span>\n            <span className=\"text-[#daa520] font-bold text-lg\">\n              {totalPrice.toLocaleString()} BASED\n            </span>\n          </div>\n        </div>\n\n        {/* Cancel Button */}\n        <button\n          onClick={handleCancel}\n          disabled={isPending || isCancelling}\n          className=\"w-full py-3 rounded-lg font-fredoka font-bold transition-all disabled:opacity-50 disabled:cursor-not-allowed bg-red-500/20 border border-red-500/50 text-red-400 hover:bg-red-500/30\"\n        >\n          {isPending || isCancelling ? 'Cancelling...' : '‚ùå Cancel Listing'}\n        </button>\n      </div>\n    </div>\n  )\n}\n\n/**\n * Activity History Section\n */\nfunction ActivityHistory({\n  events,\n  userAddress,\n}: {\n  events: TradingEvent[]\n  userAddress: string\n}) {\n  if (events.length === 0) {\n    return (\n      <div className=\"bg-gray-900/60 rounded-lg border border-gray-700/50 p-8 text-center\">\n        <div className=\"text-6xl mb-4\">üì≠</div>\n        <p className=\"text-xl font-fredoka text-gray-400 mb-2\">No activity yet</p>\n        <p className=\"text-sm text-gray-500\">Your trading history will appear here</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-3\">\n      {events.map((event, i) => (\n        <ActivityCard\n          key={`${event.transactionHash}-${i}`}\n          event={event}\n          userAddress={userAddress}\n        />\n      ))}\n    </div>\n  )\n}\n\n/**\n * Activity card (historical event)\n */\nfunction ActivityCard({\n  event,\n  userAddress,\n}: {\n  event: TradingEvent\n  userAddress: string\n}) {\n  const normalizedAddress = userAddress.toLowerCase()\n  const isOfferer = 'offerer' in event && event.offerer.toLowerCase() === normalizedAddress\n  const isOwner = 'voucherOwner' in event && event.voucherOwner.toLowerCase() === normalizedAddress\n  const isSeller = 'seller' in event && event.seller.toLowerCase() === normalizedAddress\n  const isBuyer = 'buyer' in event && event.buyer.toLowerCase() === normalizedAddress\n\n  return (\n    <div className=\"bg-gray-900/60 rounded-lg border border-gray-700/50 p-6 hover:border-gray-600/50 transition\">\n      {/* Header Row: Icon, Title, Date, TX Link */}\n      <div className=\"flex items-center justify-between gap-6 mb-4\">\n        <div className=\"flex items-center gap-3\">\n          <span className=\"text-3xl\">{getEventIcon(event.eventType)}</span>\n          <div>\n            <p className=\"text-base font-bold text-[#daa520]\">\n              {getEventLabel(event.eventType, isOfferer, isOwner, isSeller, isBuyer)}\n            </p>\n            <p className=\"text-sm text-gray-500\">{formatDate(event.timestamp)}</p>\n          </div>\n        </div>\n\n        {/* Transaction link */}\n        <a\n          href={`${EXPLORER_BASE_URL}/tx/${event.transactionHash}`}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"flex-shrink-0 px-4 py-2 bg-[#daa520]/10 border border-[#daa520]/30 rounded-lg text-sm text-[#daa520] hover:bg-[#daa520]/20 hover:border-[#daa520]/50 transition font-fredoka font-bold\"\n        >\n          View TX ‚Üí\n        </a>\n      </div>\n\n      {/* Details Grid: Horizontal Layout */}\n      <div className=\"flex items-center gap-6 flex-wrap\">\n        {'tokenId' in event && (\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-sm text-gray-500\">NFT:</span>\n            <span className=\"text-sm font-bold text-white\">ùïÇ∆éùïÇTV #{event.tokenId}</span>\n          </div>\n        )}\n\n        {'offerPrice' in event && (\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-sm text-gray-500\">Price:</span>\n            <span className=\"text-base font-bold text-[#daa520]\">\n              {formatUnits(event.offerPrice, 18)} BASED\n            </span>\n          </div>\n        )}\n\n        {'totalPrice' in event && (\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-sm text-gray-500\">Total:</span>\n            <span className=\"text-base font-bold text-[#daa520]\">\n              {formatUnits(event.totalPrice, 18)} BASED\n            </span>\n          </div>\n        )}\n\n        {'amount' in event && (\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-sm text-gray-500\">Amount:</span>\n            <span className=\"text-sm font-bold text-white\">{event.amount} vouchers</span>\n          </div>\n        )}\n\n        {/* Role badges */}\n        {isOfferer && (\n          <span className=\"text-xs px-3 py-1 rounded-full bg-blue-500/20 text-blue-400 border border-blue-500/30\">\n            You offered\n          </span>\n        )}\n        {isOwner && (\n          <span className=\"text-xs px-3 py-1 rounded-full bg-purple-500/20 text-purple-400 border border-purple-500/30\">\n            Your voucher\n          </span>\n        )}\n        {isSeller && (\n          <span className=\"text-xs px-3 py-1 rounded-full bg-green-500/20 text-green-400 border border-green-500/30\">\n            You sold\n          </span>\n        )}\n        {isBuyer && (\n          <span className=\"text-xs px-3 py-1 rounded-full bg-orange-500/20 text-orange-400 border border-orange-500/30\">\n            You bought\n          </span>\n        )}\n      </div>\n    </div>\n  )\n}\n\n/**\n * Helper functions\n */\nfunction getEventIcon(eventType: TradingEvent['eventType']): string {\n  switch (eventType) {\n    case 'OfferMade':\n      return 'üí∞'\n    case 'OfferAccepted':\n      return '‚úÖ'\n    case 'OfferCancelled':\n      return '‚ùå'\n    case 'OfferRejected':\n      return 'üö´'\n    case 'VoucherSold':\n      return 'üí∏'\n    case 'VoucherListed':\n      return 'üè™'\n    case 'ListingCancelled':\n      return 'üö´'\n  }\n}\n\nfunction getEventLabel(\n  eventType: TradingEvent['eventType'],\n  isOfferer: boolean,\n  isOwner: boolean,\n  isSeller: boolean,\n  isBuyer: boolean\n): string {\n  switch (eventType) {\n    case 'OfferMade':\n      if (isOfferer) return 'You made an offer'\n      if (isOwner) return 'Received an offer'\n      return 'Offer made'\n\n    case 'OfferAccepted':\n      if (isOfferer) return 'Your offer was accepted!'\n      if (isOwner) return 'You accepted an offer'\n      return 'Offer accepted'\n\n    case 'OfferCancelled':\n      if (isOfferer) return 'You cancelled your offer'\n      if (isOwner) return 'Offer was cancelled'\n      return 'Offer cancelled'\n\n    case 'OfferRejected':\n      if (isOfferer) return 'Your offer was rejected'\n      if (isOwner) return 'You rejected an offer'\n      return 'Offer rejected'\n\n    case 'VoucherSold':\n      if (isSeller) return 'You sold vouchers'\n      if (isBuyer) return 'You bought vouchers'\n      return 'Voucher sold'\n\n    case 'VoucherListed':\n      if (isSeller) return 'You listed vouchers'\n      return 'Voucher listed'\n\n    case 'ListingCancelled':\n      if (isSeller) return 'You cancelled your listing'\n      return 'Listing cancelled'\n  }\n}\n\nfunction formatDate(timestamp: number): string {\n  const date = new Date(timestamp * 1000)\n  const now = new Date()\n  const diffMs = now.getTime() - date.getTime()\n  const diffMins = Math.floor(diffMs / (1000 * 60))\n  const diffHours = Math.floor(diffMs / (1000 * 60 * 60))\n  const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24))\n\n  if (diffMins < 1) return 'Just now'\n  if (diffMins < 60) return `${diffMins} minute${diffMins === 1 ? '' : 's'} ago`\n  if (diffHours < 24) return `${diffHours} hour${diffHours === 1 ? '' : 's'} ago`\n  if (diffDays < 7) return `${diffDays} day${diffDays === 1 ? '' : 's'} ago`\n\n  return date.toLocaleDateString()\n}\n",null,null,null,null,"/**\n * useAllReceivableOffers Hook\n *\n * Comprehensive offer detection that includes:\n * 1. Targeted offers (voucherOwner = your address)\n * 2. General offers (voucherOwner = 0x0) for tokens you own\n *\n * This fixes the issue where general offers don't show up in \"Offers You Can Accept\"\n */\n\nimport { useState, useEffect } from 'react'\nimport { useAccount } from 'wagmi'\nimport { useReceivedOffers, useTokenOffers } from './useKektvOffers'\nimport { useVoucherBalance } from './useVoucherBalance'\n\nexport function useAllReceivableOffers() {\n  const { address } = useAccount()\n  const [allOfferIds, setAllOfferIds] = useState<bigint[]>([])\n  const [activeOfferIds, setActiveOfferIds] = useState<bigint[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n\n  // Get targeted offers (voucherOwner = your address)\n  const { offerIds: targetedOffers, isLoading: targetedLoading, refetch: refetchTargeted } = useReceivedOffers(address)\n\n  // Get vouchers you own\n  const { ownedVouchers, isLoading: balanceLoading } = useVoucherBalance()\n\n  // Get general offers for each token you own\n  const tokenId0 = ownedVouchers.find(v => v.id === 0) ? 0 : null\n  const tokenId1 = ownedVouchers.find(v => v.id === 1) ? 1 : null\n  const tokenId2 = ownedVouchers.find(v => v.id === 2) ? 2 : null\n  const tokenId3 = ownedVouchers.find(v => v.id === 3) ? 3 : null\n\n  const { offerIds: token0Offers, isLoading: token0Loading, refetch: refetch0 } = useTokenOffers(tokenId0)\n  const { offerIds: token1Offers, isLoading: token1Loading, refetch: refetch1 } = useTokenOffers(tokenId1)\n  const { offerIds: token2Offers, isLoading: token2Loading, refetch: refetch2 } = useTokenOffers(tokenId2)\n  const { offerIds: token3Offers, isLoading: token3Loading, refetch: refetch3 } = useTokenOffers(tokenId3)\n\n  // Combine and deduplicate all offers\n  useEffect(() => {\n    const combineOffers = async () => {\n      setIsLoading(true)\n\n      // Combine all offer IDs\n      const allIds = new Set<string>()\n\n      // Add targeted offers\n      targetedOffers.forEach(id => allIds.add(id.toString()))\n\n      // Add general offers for tokens you own\n      token0Offers.forEach(id => allIds.add(id.toString()))\n      token1Offers.forEach(id => allIds.add(id.toString()))\n      token2Offers.forEach(id => allIds.add(id.toString()))\n      token3Offers.forEach(id => allIds.add(id.toString()))\n\n      // Convert back to bigint array\n      const uniqueIds = Array.from(allIds).map(id => BigInt(id))\n\n      setAllOfferIds(uniqueIds)\n      setIsLoading(false)\n    }\n\n    if (!targetedLoading && !balanceLoading && !token0Loading && !token1Loading && !token2Loading && !token3Loading) {\n      combineOffers()\n    }\n  }, [\n    targetedOffers,\n    token0Offers,\n    token1Offers,\n    token2Offers,\n    token3Offers,\n    targetedLoading,\n    balanceLoading,\n    token0Loading,\n    token1Loading,\n    token2Loading,\n    token3Loading,\n  ])\n\n  // Note: Active filtering is intentionally done at the component level\n  // The cards already filter inactive offers for display\n  // For counting purposes, UserActivityPage should count the displayed cards\n  // not the raw offer IDs to avoid the \"shows 2, displays 1\" bug\n  useEffect(() => {\n    // For now, set activeOfferIds = allOfferIds\n    // The component will filter them when rendering/counting\n    setActiveOfferIds(allOfferIds)\n  }, [allOfferIds])\n\n  const refetch = async () => {\n    await Promise.all([\n      refetchTargeted(),\n      refetch0(),\n      refetch1(),\n      refetch2(),\n      refetch3(),\n    ])\n  }\n\n  return {\n    offerIds: allOfferIds, // All offers (active + inactive)\n    activeOfferIds, // Only active offers (for accurate counting)\n    isLoading,\n    refetch,\n  }\n}\n\n/**\n * Hook to filter receivable offers to only ones you can actually accept\n * Filters out:\n * - Offers you made yourself\n * - Inactive offers\n * - Offers for tokens you don't own (general offers)\n */\nexport function useFilteredReceivableOffers() {\n  const { address } = useAccount()\n  const { offerIds: allOfferIds, isLoading, refetch } = useAllReceivableOffers()\n  const { ownedVouchers } = useVoucherBalance()\n  const [filteredOfferIds, setFilteredOfferIds] = useState<bigint[]>([])\n\n  useEffect(() => {\n    if (!address || isLoading) return\n\n    const filterOffers = async () => {\n      const filtered: bigint[] = []\n\n      for (const offerId of allOfferIds) {\n        // Note: We can't use hooks in loops, so we'll need to do the filtering\n        // on the component level or accept some offers that aren't valid\n        // For now, just return all offers and let the cards handle filtering\n        filtered.push(offerId)\n      }\n\n      setFilteredOfferIds(filtered)\n    }\n\n    filterOffers()\n  }, [allOfferIds, address, isLoading, ownedVouchers])\n\n  return {\n    offerIds: filteredOfferIds,\n    isLoading,\n    refetch,\n  }\n}\n","/**\n * useActiveOfferCount Hook\n *\n * Counts only ACTIVE offers from a list of offer IDs\n * Fixes the bug where counter shows \"2 offers\" but only 1 card displays\n * (because inactive offers are included in the count)\n */\n\nimport { useState, useEffect } from 'react'\nimport { useReadContracts } from 'wagmi'\nimport type { Abi } from 'viem'\nimport { KEKTV_OFFERS_ADDRESS, KEKTV_OFFERS_ABI } from '@/config/contracts/kektv-offers'\n\nexport function useActiveOfferCount(offerIds: bigint[]) {\n  const [activeCount, setActiveCount] = useState(0)\n\n  // Batch-fetch all offer details efficiently using multicall\n  const { data: offersData, isLoading } = useReadContracts({\n    contracts: offerIds.map(id => ({\n      address: KEKTV_OFFERS_ADDRESS,\n      abi: KEKTV_OFFERS_ABI as Abi,\n      functionName: 'getOffer',\n      args: [id],\n    })),\n    query: {\n      enabled: offerIds.length > 0,\n    },\n  })\n\n  useEffect(() => {\n    if (!offersData || isLoading) {\n      setActiveCount(0)\n      return\n    }\n\n    // Count how many offers are active\n    let count = 0\n    for (const result of offersData) {\n      if (result.status === 'success' && result.result) {\n        // Parse offer struct (can be object or array depending on wagmi version)\n        const offer = result.result as unknown\n        const offerAsObject = offer as Record<string, unknown>\n        const offerAsArray = offer as unknown[]\n\n        // Check if offer.active is true (handle both object and array formats)\n        const isActive = offerAsObject.active !== undefined\n          ? (offerAsObject.active as boolean)\n          : (offerAsArray[7] as boolean)\n\n        if (isActive) {\n          count++\n        }\n      }\n    }\n\n    setActiveCount(count)\n  }, [offersData, isLoading])\n\n  return {\n    activeCount,\n    isLoading,\n  }\n}\n"],"names":[],"mappings":"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"}