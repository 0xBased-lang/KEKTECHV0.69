{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/components/web3/ConnectButton.tsx"],"sourcesContent":["'use client'\n\nimport { useAccount, useConnect, useDisconnect } from 'wagmi'\nimport { useState, useEffect } from 'react'\n\n/**\n * Enhanced Connect Button Component\n *\n * Fixes all wallet connection issues:\n * - Handles provider conflicts gracefully\n * - Shows detailed error messages\n * - Provides fallback options\n * - Supports all wallet types\n */\n\nexport function ConnectButton() {\n  const { address, isConnected, isConnecting, isReconnecting } = useAccount()\n  const { connectors, connect, error: connectError, isPending } = useConnect()\n  const { disconnect } = useDisconnect()\n  const [showDropdown, setShowDropdown] = useState(false)\n  const [lastError, setLastError] = useState<string | null>(null)\n  const [isInitialized, setIsInitialized] = useState(false)\n\n  // Check if Web3 is properly initialized\n  useEffect(() => {\n    const checkInit = () => {\n      const hasProvider = !!(window as Window & { ethereum?: unknown; __SAFE_ETHEREUM_PROVIDER?: unknown }).ethereum || !!(window as Window & { ethereum?: unknown; __SAFE_ETHEREUM_PROVIDER?: unknown }).__SAFE_ETHEREUM_PROVIDER\n      setIsInitialized(hasProvider)\n\n      if (!hasProvider) {\n        console.warn('No ethereum provider detected')\n      }\n    }\n\n    // Check immediately and after a delay\n    checkInit()\n    const timer = setTimeout(checkInit, 1000)\n    return () => clearTimeout(timer)\n  }, [])\n\n  // Handle connection errors\n  useEffect(() => {\n    if (connectError) {\n      let errorMessage = connectError.message\n\n      // Parse specific error types\n      if (errorMessage.includes('not found on Allowlist')) {\n        errorMessage = 'Domain not configured. Please try MetaMask or wait for domain approval.'\n      } else if (errorMessage.includes('User rejected')) {\n        errorMessage = 'Connection cancelled by user'\n      } else if (errorMessage.includes('No provider')) {\n        errorMessage = 'No wallet detected. Please install MetaMask.'\n      }\n\n      setLastError(errorMessage)\n\n      // Clear error after 5 seconds\n      const timer = setTimeout(() => setLastError(null), 5000)\n      return () => clearTimeout(timer)\n    }\n  }, [connectError])\n\n  // Handle connect button click\n  const handleConnect = async (connectorId?: string) => {\n    try {\n      setLastError(null)\n\n      let connector = connectorId\n        ? connectors.find(c => c.id === connectorId)\n        : null\n\n      // Prioritize MetaMask if no specific connector selected\n      if (!connector) {\n        // Try to find MetaMask first\n        connector = connectors.find(c =>\n          c.id === 'metaMask' ||\n          c.id === 'injected' ||\n          (c.name && c.name.toLowerCase().includes('metamask'))\n        )\n\n        // Fallback to any available connector\n        if (!connector) {\n          connector = connectors.find(c => c.ready) || connectors[0]\n        }\n      }\n\n      if (connector) {\n        await connect({ connector })\n        setShowDropdown(false)\n      } else {\n        setLastError('No wallet available. Please install MetaMask or another Web3 wallet.')\n      }\n    } catch (error) {\n      console.error('Connection error:', error)\n      setLastError(error instanceof Error ? error.message : 'Failed to connect')\n    }\n  }\n\n  // If connected, show account info\n  if (isConnected && address) {\n    return (\n      <div className=\"relative\">\n        <button\n          onClick={() => setShowDropdown(!showDropdown)}\n          className=\"flex items-center gap-2 rounded-lg bg-gradient-to-r from-[#3fb8bd] to-[#2a8185] px-4 py-2 text-white hover:from-[#359ea2] hover:to-[#226669] transition-all\"\n        >\n          <span className=\"font-fredoka font-medium\">\n            ‚úì {address.slice(0, 6)}...{address.slice(-4)}\n          </span>\n        </button>\n\n        {showDropdown && (\n          <div className=\"absolute right-0 mt-2 w-48 rounded-lg bg-gray-800 shadow-lg ring-1 ring-gray-700 z-50\">\n            <button\n              onClick={() => {\n                disconnect()\n                setShowDropdown(false)\n              }}\n              className=\"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-700 rounded-lg transition-colors\"\n            >\n              Disconnect\n            </button>\n          </div>\n        )}\n      </div>\n    )\n  }\n\n  // Loading states\n  if (isConnecting || isReconnecting || isPending) {\n    return (\n      <button\n        disabled\n        className=\"flex items-center gap-2 rounded-lg bg-gray-700 px-4 py-2 text-gray-400 cursor-not-allowed\"\n      >\n        <span className=\"inline-block animate-spin\">‚ü≥</span>\n        <span className=\"font-fredoka font-medium\">Connecting...</span>\n      </button>\n    )\n  }\n\n  // Not connected - show connect options\n  return (\n    <div className=\"relative\">\n      <button\n        onClick={() => setShowDropdown(!showDropdown)}\n        className=\"flex items-center gap-2 rounded-lg bg-gradient-to-r from-[#3fb8bd] to-[#2a8185] px-4 py-2 text-white hover:from-[#359ea2] hover:to-[#226669] transition-all\"\n      >\n        <span>üîó</span>\n        <span className=\"font-fredoka font-medium\">Connect Wallet</span>\n      </button>\n\n      {/* Error message */}\n      {lastError && (\n        <div className=\"absolute top-full mt-2 right-0 w-72 p-3 bg-red-900/90 rounded-lg text-sm text-red-100 flex items-start gap-2 z-50\">\n          <span className=\"flex-shrink-0 mt-0.5\">‚ö†Ô∏è</span>\n          <div>\n            <p className=\"font-semibold\">Connection Error</p>\n            <p className=\"text-xs mt-1\">{lastError}</p>\n          </div>\n        </div>\n      )}\n\n      {/* Wallet selection dropdown */}\n      {showDropdown && (\n        <div className=\"absolute right-0 mt-2 w-64 rounded-lg bg-gray-800 shadow-lg ring-1 ring-gray-700 z-50 overflow-hidden\">\n          <div className=\"p-2\">\n            <p className=\"text-xs text-gray-400 px-2 py-1\">Choose wallet</p>\n\n            {/* MetaMask (Priority) */}\n            <button\n              onClick={() => handleConnect('injected')}\n              className=\"w-full flex items-center gap-3 px-3 py-2 text-left text-white hover:bg-gray-700 rounded-lg transition-colors\"\n            >\n              <div className=\"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center\">\n                ü¶ä\n              </div>\n              <div>\n                <p className=\"font-medium\">MetaMask</p>\n                <p className=\"text-xs text-gray-400\">Recommended</p>\n              </div>\n            </button>\n\n            {/* WalletConnect */}\n            <button\n              onClick={() => handleConnect('walletConnect')}\n              className=\"w-full flex items-center gap-3 px-3 py-2 text-left text-white hover:bg-gray-700 rounded-lg transition-colors\"\n            >\n              <div className=\"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center\">\n                üîó\n              </div>\n              <div>\n                <p className=\"font-medium\">WalletConnect</p>\n                <p className=\"text-xs text-gray-400\">Scan with wallet</p>\n              </div>\n            </button>\n\n            {/* Coinbase Wallet */}\n            <button\n              onClick={() => handleConnect('coinbaseWallet')}\n              className=\"w-full flex items-center gap-3 px-3 py-2 text-left text-white hover:bg-gray-700 rounded-lg transition-colors\"\n            >\n              <div className=\"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center\">\n                ü™ô\n              </div>\n              <div>\n                <p className=\"font-medium\">Coinbase Wallet</p>\n                <p className=\"text-xs text-gray-400\">Connect with Coinbase</p>\n              </div>\n            </button>\n\n            {/* Auto-detect */}\n            <button\n              onClick={() => handleConnect()}\n              className=\"w-full flex items-center gap-3 px-3 py-2 text-left text-white hover:bg-gray-700 rounded-lg transition-colors\"\n            >\n              <div className=\"w-8 h-8 bg-gray-600 rounded-lg flex items-center justify-center\">\n                ‚ö°\n              </div>\n              <div>\n                <p className=\"font-medium\">Auto-detect</p>\n                <p className=\"text-xs text-gray-400\">Use any available wallet</p>\n              </div>\n            </button>\n          </div>\n\n          {!isInitialized && (\n            <div className=\"border-t border-gray-700 p-3 bg-yellow-900/20\">\n              <p className=\"text-xs text-yellow-400\">\n                ‚ö†Ô∏è No wallet detected. Please install MetaMask extension.\n              </p>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 474, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/components/web3/NetworkSwitcher.tsx"],"sourcesContent":["'use client'\n\nimport { useAccount, useChainId, useSwitchChain } from 'wagmi'\nimport { AlertTriangle, Network } from 'lucide-react'\nimport { basedChain } from '@/config/chains'\nimport { useEffect, useState } from 'react'\n\n/**\n * Network Switcher Component\n *\n * Detects when user is on wrong network and provides one-click switching.\n * Handles both network switching and adding BasedAI network to MetaMask.\n */\n\ninterface NetworkSwitcherProps {\n  /** Inline mode (smaller, for navbar) */\n  inline?: boolean\n  /** Show even when disconnected */\n  showWhenDisconnected?: boolean\n}\n\nexport function NetworkSwitcher({\n  inline = false,\n  showWhenDisconnected = false\n}: NetworkSwitcherProps) {\n  const { isConnected } = useAccount()\n  const currentChainId = useChainId()\n  const { chains, switchChain, isPending, error } = useSwitchChain()\n  const [showError, setShowError] = useState(false)\n\n  const isWrongNetwork = isConnected && currentChainId !== basedChain.id\n\n  // Debug logging\n  console.log('üåê NetworkSwitcher Debug:', {\n    isConnected,\n    currentChainId,\n    basedChainId: basedChain.id,\n    isWrongNetwork,\n    inline,\n    showWhenDisconnected\n  })\n\n  // Auto-hide error after 5 seconds\n  useEffect(() => {\n    if (error) {\n      setShowError(true)\n      const timer = setTimeout(() => setShowError(false), 5000)\n      return () => clearTimeout(timer)\n    }\n  }, [error])\n\n  // Don't show if not connected (unless explicitly requested)\n  if (!isConnected && !showWhenDisconnected) {\n    return null\n  }\n\n  // Don't show if on correct network\n  if (!isWrongNetwork) {\n    return null\n  }\n\n  const handleSwitchNetwork = async () => {\n    try {\n      // Try to switch to BasedAI chain\n      await switchChain({ chainId: basedChain.id })\n    } catch (err) {\n      const error = err as { code?: number; message?: string }\n      console.error('Failed to switch network:', error)\n\n      // If network doesn't exist in wallet, try to add it\n      if (error?.code === 4902 || error?.message?.includes('Unrecognized chain')) {\n        try {\n          await addBasedAINetwork()\n        } catch (addError) {\n          console.error('Failed to add network:', addError)\n        }\n      }\n    }\n  }\n\n  // Add BasedAI network to MetaMask\n  const addBasedAINetwork = async () => {\n    if (typeof window === 'undefined' || !window.ethereum) {\n      alert('Please install MetaMask to add BasedAI network')\n      return\n    }\n\n    try {\n      await window.ethereum.request({\n        method: 'wallet_addEthereumChain',\n        params: [\n          {\n            chainId: `0x${basedChain.id.toString(16)}`, // Convert to hex\n            chainName: basedChain.name,\n            nativeCurrency: basedChain.nativeCurrency,\n            rpcUrls: [basedChain.rpcUrls.default.http[0]],\n            blockExplorerUrls: [basedChain.blockExplorers.default.url],\n          },\n        ],\n      })\n    } catch (error) {\n      const err = error as { message?: string }\n      throw new Error(`Failed to add network: ${err.message || 'Unknown error'}`)\n    }\n  }\n\n  const currentChainName = chains.find(c => c.id === currentChainId)?.name || 'Unknown Network'\n\n  // Inline mode (for navbar)\n  if (inline) {\n    return (\n      <button\n        onClick={handleSwitchNetwork}\n        disabled={isPending}\n        className=\"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[#3fb8bd]/10 to-[#3fb8bd]/5 border border-[#3fb8bd]/40 rounded-lg hover:from-[#3fb8bd]/20 hover:to-[#3fb8bd]/10 hover:border-[#3fb8bd]/60 hover:shadow-lg hover:shadow-[#3fb8bd]/20 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed font-fredoka\"\n        title={`Switch from ${currentChainName} to BasedAI Network`}\n      >\n        <Network className=\"w-4 h-4 text-[#3fb8bd]\" />\n        <span className=\"text-sm font-medium text-[#3fb8bd]\">\n          {isPending ? 'Switching...' : 'Switch Network'}\n        </span>\n      </button>\n    )\n  }\n\n  // Full banner mode (for main content)\n  return (\n    <div className=\"w-full bg-gradient-to-r from-yellow-500/10 to-orange-500/10 border-2 border-yellow-500/50 rounded-xl p-6 backdrop-blur-sm\">\n      <div className=\"flex items-start gap-4\">\n        <div className=\"flex-shrink-0\">\n          <AlertTriangle className=\"w-8 h-8 text-yellow-500 animate-pulse\" />\n        </div>\n\n        <div className=\"flex-1 space-y-3\">\n          <div>\n            <h3 className=\"text-xl font-bold text-yellow-500 mb-2\">\n              Wrong Network Detected\n            </h3>\n            <p className=\"text-gray-300\">\n              You&apos;re currently connected to <span className=\"font-semibold text-white\">{currentChainName}</span>.\n              <br />\n              Please switch to <span className=\"font-semibold text-cyan-400\">BasedAI Network</span> to mint NFTs.\n            </p>\n          </div>\n\n          <div className=\"flex flex-col sm:flex-row gap-3\">\n            <button\n              onClick={handleSwitchNetwork}\n              disabled={isPending}\n              className=\"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 text-white font-semibold rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-cyan-500/50\"\n            >\n              <Network className=\"w-5 h-5\" />\n              {isPending ? 'Switching Network...' : 'Switch to BasedAI'}\n            </button>\n\n            <button\n              onClick={addBasedAINetwork}\n              className=\"px-6 py-3 bg-white/5 hover:bg-white/10 border border-white/20 text-white font-medium rounded-lg transition-all\"\n            >\n              Add BasedAI Network to MetaMask\n            </button>\n          </div>\n\n          {showError && error && (\n            <div className=\"p-3 bg-red-500/10 border border-red-500/50 rounded-lg\">\n              <p className=\"text-sm text-red-400\">\n                <span className=\"font-semibold\">Error:</span> {error.message}\n              </p>\n            </div>\n          )}\n\n          <div className=\"pt-2 border-t border-white/10\">\n            <p className=\"text-xs text-gray-400\">\n              <span className=\"font-semibold\">Network Details:</span>\n            </p>\n            <ul className=\"mt-1 text-xs text-gray-500 space-y-1\">\n              <li>‚Ä¢ Chain ID: {basedChain.id} (0x{basedChain.id.toString(16)})</li>\n              <li>‚Ä¢ RPC: {basedChain.rpcUrls.default.http[0]}</li>\n              <li>‚Ä¢ Symbol: {basedChain.nativeCurrency.symbol}</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 808, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/components/layout/Header.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport Link from 'next/link'\nimport Image from 'next/image'\nimport { usePathname } from 'next/navigation'\nimport { ConnectButton } from '@/components/web3/ConnectButton'\nimport { NetworkSwitcher } from '@/components/web3/NetworkSwitcher'\n\n/**\n * Header Component\n *\n * Navigation bar with KEKTECH logo, navigation links, and wallet connection\n * Includes mobile hamburger menu for responsive design\n */\nexport function Header() {\n  const pathname = usePathname()\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false)\n\n  const toggleMobileMenu = () => {\n    setMobileMenuOpen(!mobileMenuOpen)\n  }\n\n  const closeMobileMenu = () => {\n    setMobileMenuOpen(false)\n  }\n\n  // Lock body scroll when mobile menu is open\n  useEffect(() => {\n    if (mobileMenuOpen) {\n      document.body.style.overflow = 'hidden'\n      document.body.style.position = 'fixed'\n      document.body.style.width = '100%'\n    } else {\n      document.body.style.overflow = ''\n      document.body.style.position = ''\n      document.body.style.width = ''\n    }\n\n    // Cleanup on unmount\n    return () => {\n      document.body.style.overflow = ''\n      document.body.style.position = ''\n      document.body.style.width = ''\n    }\n  }, [mobileMenuOpen])\n\n  return (\n    <header className=\"sticky top-0 z-50 w-full border-b border-[#3fb8bd]/20 bg-[#000000] backdrop-blur-sm\">\n      <div className=\"container mx-auto flex h-20 items-center justify-between px-4 sm:px-6 lg:px-8\">\n        {/* Logo - Left Side */}\n        <Link href=\"/\" className=\"flex items-center hover:opacity-80 transition py-1\">\n          <Image\n            src=\"/images/kektech-cropped.gif?v=2\"\n            alt=\"ùïÇ∆éùïÇ‰∏Ö·µâÂåöüÖ∑ Home\"\n            width={400}\n            height={100}\n            className=\"h-auto w-44 sm:w-52 md:w-60 lg:w-64 -mt-1\"\n            style={{ objectFit: 'contain' }}\n            unoptimized\n            priority\n          />\n        </Link>\n\n        {/* Desktop Navigation Links - Center/Right */}\n        <nav className=\"hidden items-center space-x-4 md:flex lg:space-x-6\">\n          <Link\n            href=\"/marketplace\"\n            className={`font-fredoka text-sm font-medium transition-colors hover:text-[#3fb8bd] ${\n              pathname === '/marketplace' ? 'text-[#3fb8bd] font-bold' : 'text-gray-300'\n            }`}\n          >\n            Marketplace\n          </Link>\n          <Link\n            href=\"/markets\"\n            className={`font-fredoka text-sm font-medium transition-colors hover:text-[#3fb8bd] ${\n              pathname?.startsWith('/markets') ? 'text-[#3fb8bd] font-bold' : 'text-gray-300'\n            }`}\n          >\n            Markets üéØ\n          </Link>\n          <Link\n            href=\"/dashboard\"\n            className={`font-fredoka text-sm font-medium transition-colors hover:text-[#3fb8bd] ${\n              pathname === '/dashboard' ? 'text-[#3fb8bd] font-bold' : 'text-gray-300'\n            }`}\n          >\n            Dashboard\n          </Link>\n          <Link\n            href=\"/gallery\"\n            className={`font-fredoka text-sm font-medium transition-colors hover:text-[#3fb8bd] ${\n              pathname === '/gallery' ? 'text-[#3fb8bd] font-bold' : 'text-gray-300'\n            }`}\n          >\n            Gallery\n          </Link>\n          <Link\n            href=\"/rewards\"\n            className={`font-fredoka text-sm font-medium transition-colors hover:text-[#3fb8bd] ${\n              pathname === '/rewards' ? 'text-[#3fb8bd] font-bold' : 'text-gray-300'\n            }`}\n          >\n            Rewards\n          </Link>\n          <Link\n            href=\"/#roadmap\"\n            className={`font-fredoka text-sm font-medium transition-colors hover:text-[#3fb8bd] ${\n              pathname === '/' && typeof window !== 'undefined' && window.location.hash === '#roadmap' ? 'text-[#3fb8bd] font-bold' : 'text-gray-300'\n            }`}\n          >\n            Roadmap\n          </Link>\n          <Link\n            href=\"/#about\"\n            className={`font-fredoka text-sm font-medium transition-colors hover:text-[#3fb8bd] ${\n              pathname === '/' && typeof window !== 'undefined' && window.location.hash === '#about' ? 'text-[#3fb8bd] font-bold' : 'text-gray-300'\n            }`}\n          >\n            About Us\n          </Link>\n        </nav>\n\n        {/* Right Side: Wallet Connect & Mobile Menu Button */}\n        <div className=\"flex items-center gap-3\">\n          {/* Desktop: Network Switcher + Connect Button */}\n          <div className=\"hidden md:flex items-center gap-3\">\n            <NetworkSwitcher inline />\n            <ConnectButton />\n          </div>\n\n          {/* Mobile: Hamburger Menu Button */}\n          <button\n            onClick={toggleMobileMenu}\n            className=\"md:hidden flex flex-col justify-center items-center w-10 h-10 rounded-lg bg-gray-900/60 border border-gray-800 hover:border-[#3fb8bd] transition-colors\"\n            aria-label=\"Toggle mobile menu\"\n            aria-expanded={mobileMenuOpen}\n          >\n            <span\n              className={`block w-6 h-0.5 bg-[#3fb8bd] transition-all duration-300 ${\n                mobileMenuOpen ? 'rotate-45 translate-y-1.5' : ''\n              }`}\n            />\n            <span\n              className={`block w-6 h-0.5 bg-[#3fb8bd] my-1 transition-all duration-300 ${\n                mobileMenuOpen ? 'opacity-0' : ''\n              }`}\n            />\n            <span\n              className={`block w-6 h-0.5 bg-[#3fb8bd] transition-all duration-300 ${\n                mobileMenuOpen ? '-rotate-45 -translate-y-1.5' : ''\n              }`}\n            />\n          </button>\n        </div>\n      </div>\n\n      {/* Mobile Menu Overlay - Ultra-high z-index to guarantee top layer */}\n      {mobileMenuOpen && (\n        <div\n          className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] md:hidden\"\n          onClick={closeMobileMenu}\n          aria-hidden=\"true\"\n        />\n      )}\n\n      {/* Mobile Slide-Out Menu - Highest z-index to appear above everything */}\n      <div\n        className={`fixed top-0 right-0 h-full w-80 max-w-[85vw] border-l border-[#3fb8bd]/20 z-[110] transform transition-transform duration-300 ease-in-out md:hidden flex flex-col ${\n          mobileMenuOpen ? 'translate-x-0' : 'translate-x-full'\n        }`}\n        style={{\n          backgroundColor: 'rgba(0, 0, 0, 0.98)',\n          backdropFilter: 'blur(10px)',\n          WebkitBackdropFilter: 'blur(10px)'\n        }}\n      >\n        {/* Mobile Menu Header - Fixed at top */}\n        <div className=\"flex-shrink-0 flex items-center justify-between p-4 border-b border-gray-800\" style={{ backgroundColor: 'rgba(0, 0, 0, 0.98)' }}>\n          <div className=\"flex-1 mr-3\">\n            <ConnectButton />\n          </div>\n          <button\n            onClick={closeMobileMenu}\n            type=\"button\"\n            className=\"w-12 h-12 flex items-center justify-center rounded-lg bg-gray-900 border-2 border-gray-800 hover:border-[#3fb8bd] hover:bg-gray-800 active:scale-95 transition-all relative z-[120] touch-manipulation flex-shrink-0\"\n            aria-label=\"Close menu\"\n            style={{ pointerEvents: 'auto' }}\n          >\n            <span className=\"text-[#3fb8bd] text-3xl font-bold leading-none select-none\">√ó</span>\n          </button>\n        </div>\n\n        {/* Mobile Navigation Links - Scrollable content */}\n        <nav\n          className=\"flex-1 flex flex-col px-5 py-5 space-y-4 overflow-y-auto overscroll-contain\"\n          style={{\n            backgroundColor: 'rgba(0, 0, 0, 0.98)',\n            WebkitOverflowScrolling: 'touch',\n            minHeight: '400px'\n          }}\n        >\n          <Link\n            href=\"/marketplace\"\n            onClick={closeMobileMenu}\n            className={`font-fredoka text-lg font-medium py-4 px-5 rounded-lg transition-colors touch-manipulation ${\n              pathname === '/marketplace'\n                ? 'bg-[#3fb8bd]/20 text-[#3fb8bd] font-bold'\n                : 'text-gray-300 hover:bg-gray-900/60 hover:text-[#3fb8bd]'\n            }`}\n          >\n            Marketplace\n          </Link>\n          <Link\n            href=\"/markets\"\n            onClick={closeMobileMenu}\n            className={`font-fredoka text-lg font-medium py-4 px-5 rounded-lg transition-colors touch-manipulation ${\n              pathname?.startsWith('/markets')\n                ? 'bg-[#3fb8bd]/20 text-[#3fb8bd] font-bold'\n                : 'text-gray-300 hover:bg-gray-900/60 hover:text-[#3fb8bd]'\n            }`}\n          >\n            Markets üéØ\n          </Link>\n          <Link\n            href=\"/dashboard\"\n            onClick={closeMobileMenu}\n            className={`font-fredoka text-lg font-medium py-4 px-5 rounded-lg transition-colors touch-manipulation ${\n              pathname === '/dashboard'\n                ? 'bg-[#3fb8bd]/20 text-[#3fb8bd] font-bold'\n                : 'text-gray-300 hover:bg-gray-900/60 hover:text-[#3fb8bd]'\n            }`}\n          >\n            Dashboard\n          </Link>\n          <Link\n            href=\"/gallery\"\n            onClick={closeMobileMenu}\n            className={`font-fredoka text-lg font-medium py-4 px-5 rounded-lg transition-colors touch-manipulation ${\n              pathname === '/gallery'\n                ? 'bg-[#3fb8bd]/20 text-[#3fb8bd] font-bold'\n                : 'text-gray-300 hover:bg-gray-900/60 hover:text-[#3fb8bd]'\n            }`}\n          >\n            Gallery\n          </Link>\n          <Link\n            href=\"/rewards\"\n            onClick={closeMobileMenu}\n            className={`font-fredoka text-lg font-medium py-4 px-5 rounded-lg transition-colors touch-manipulation ${\n              pathname === '/rewards'\n                ? 'bg-[#3fb8bd]/20 text-[#3fb8bd] font-bold'\n                : 'text-gray-300 hover:bg-gray-900/60 hover:text-[#3fb8bd]'\n            }`}\n          >\n            Rewards\n          </Link>\n          <Link\n            href=\"/#roadmap\"\n            onClick={closeMobileMenu}\n            className={`font-fredoka text-lg font-medium py-4 px-5 rounded-lg transition-colors touch-manipulation ${\n              pathname === '/' && typeof window !== 'undefined' && window.location.hash === '#roadmap'\n                ? 'bg-[#3fb8bd]/20 text-[#3fb8bd] font-bold'\n                : 'text-gray-300 hover:bg-gray-900/60 hover:text-[#3fb8bd]'\n            }`}\n          >\n            Roadmap\n          </Link>\n          <Link\n            href=\"/#about\"\n            onClick={closeMobileMenu}\n            className={`font-fredoka text-lg font-medium py-4 px-5 rounded-lg transition-colors touch-manipulation ${\n              pathname === '/' && typeof window !== 'undefined' && window.location.hash === '#about'\n                ? 'bg-[#3fb8bd]/20 text-[#3fb8bd] font-bold'\n                : 'text-gray-300 hover:bg-gray-900/60 hover:text-[#3fb8bd]'\n            }`}\n          >\n            About Us\n          </Link>\n\n        </nav>\n\n        {/* Mobile Menu Footer: Network Switcher - Fixed at bottom */}\n        <div className=\"flex-shrink-0 p-4 border-t border-gray-800\" style={{ backgroundColor: 'rgba(0, 0, 0, 0.98)' }}>\n          <NetworkSwitcher inline />\n        </div>\n      </div>\n    </header>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1207, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/components/layout/Footer.tsx"],"sourcesContent":["'use client'\n\nimport Link from 'next/link'\nimport Image from 'next/image'\n\n/**\n * Footer Component\n *\n * Site footer with links, chain information, and social media\n */\nexport function Footer() {\n  const currentYear = new Date().getFullYear()\n\n  return (\n    <footer className=\"w-full border-t border-gray-200 bg-gray-50 dark:border-gray-800 dark:bg-gray-950\">\n      <div className=\"container mx-auto px-4 py-6 sm:px-6 lg:px-8\">\n        {/* Main Footer Content */}\n        <div className=\"flex flex-wrap items-center justify-between gap-6\">\n          {/* Brand */}\n          <div>\n            <h3 className=\"text-lg font-bold text-[#06b6d4]\">ùïÇ∆éùïÇTECH</h3>\n          </div>\n\n          {/* Navigation Links */}\n          <div className=\"flex flex-wrap items-center gap-6 text-sm text-gray-600 dark:text-gray-400\">\n            <Link href=\"/\" className=\"hover:text-[#06b6d4] transition-colors\">\n              Home\n            </Link>\n            <Link href=\"/mint\" className=\"hover:text-[#06b6d4] transition-colors\">\n              Mint\n            </Link>\n            <Link href=\"/gallery\" className=\"hover:text-[#06b6d4] transition-colors\">\n              Gallery\n            </Link>\n            <Link href=\"/marketplace\" className=\"hover:text-[#06b6d4] transition-colors\">\n              Marketplace\n            </Link>\n          </div>\n\n          {/* External Links with Icons */}\n          <div className=\"flex items-center gap-2\">\n            {/* Explorer */}\n            <a\n              href=\"https://explorer.bf1337.org\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"group\"\n              aria-label=\"BF Explorer\"\n            >\n              <div className=\"w-10 h-10 rounded-lg overflow-hidden bg-gray-900 border border-gray-800 group-hover:border-[#3fb8bd] transition-all duration-300 group-hover:scale-110\">\n                <Image\n                  src=\"/images/bf.png\"\n                  alt=\"Explorer\"\n                  width={40}\n                  height={40}\n                  className=\"object-contain\"\n                />\n              </div>\n            </a>\n\n            {/* Aftermint Marketplace */}\n            <a\n              href=\"https://aftermint.xyz\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"group\"\n              aria-label=\"Aftermint Marketplace\"\n            >\n              <div className=\"w-10 h-10 rounded-lg overflow-hidden bg-gray-900 border border-gray-800 group-hover:border-[#4ecca7] transition-all duration-300 group-hover:scale-110\">\n                <Image\n                  src=\"/aftermint-logo.avif\"\n                  alt=\"Aftermint\"\n                  width={40}\n                  height={40}\n                  className=\"object-contain\"\n                />\n              </div>\n            </a>\n\n            {/* RPC */}\n            <a\n              href=\"https://mainnet.basedaibridge.com/rpc/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"group\"\n              aria-label=\"RPC Endpoint\"\n            >\n              <div className=\"w-10 h-10 rounded-lg overflow-hidden bg-gray-900 border border-gray-800 group-hover:border-[#06b6d4] transition-all duration-300 group-hover:scale-110 flex items-center justify-center\">\n                <span className=\"text-xs font-semibold text-gray-400 group-hover:text-[#06b6d4] transition-colors\">RPC</span>\n              </div>\n            </a>\n          </div>\n\n          {/* Social Icons */}\n          <div className=\"flex items-center gap-2\">\n            <a\n              href=\"https://x.com/KektechNFT\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"group w-10 h-10 flex items-center justify-center rounded-full bg-gray-900 border-2 border-gray-800 hover:border-[#3fb8bd] transition-all duration-300 hover:scale-110\"\n              aria-label=\"X (Twitter)\"\n            >\n              <Image\n                src=\"/images/x.webp\"\n                alt=\"X\"\n                width={24}\n                height={24}\n                className=\"opacity-70 group-hover:opacity-100 transition-opacity\"\n              />\n            </a>\n\n            <a\n              href=\"https://t.me/KEKTECH\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"group w-10 h-10 flex items-center justify-center rounded-full bg-gray-900 border-2 border-gray-800 hover:border-[#4ecca7] transition-all duration-300 hover:scale-110\"\n              aria-label=\"Telegram\"\n            >\n              <Image\n                src=\"/images/telegram.webp\"\n                alt=\"Telegram\"\n                width={24}\n                height={24}\n                className=\"opacity-70 group-hover:opacity-100 transition-opacity\"\n              />\n            </a>\n          </div>\n        </div>\n\n        {/* Copyright */}\n        <div className=\"mt-6 pt-4 border-t border-gray-200 dark:border-gray-800\">\n          <p className=\"text-center text-xs text-gray-500 dark:text-gray-500\">\n            ¬© {currentYear} ùïÇ∆éùïÇTECH. All rights reserved.\n          </p>\n        </div>\n      </div>\n    </footer>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAUO,SAAS;IACd,MAAM,cAAc,IAAI,OAAO,WAAW;IAE1C,qBACE,mSAAC;QAAO,WAAU;kBAChB,cAAA,mSAAC;YAAI,WAAU;;8BAEb,mSAAC;oBAAI,WAAU;;sCAEb,mSAAC;sCACC,cAAA,mSAAC;gCAAG,WAAU;0CAAmC;;;;;;;;;;;sCAInD,mSAAC;4BAAI,WAAU;;8CACb,mSAAC,4NAAI;oCAAC,MAAK;oCAAI,WAAU;8CAAyC;;;;;;8CAGlE,mSAAC,4NAAI;oCAAC,MAAK;oCAAQ,WAAU;8CAAyC;;;;;;8CAGtE,mSAAC,4NAAI;oCAAC,MAAK;oCAAW,WAAU;8CAAyC;;;;;;8CAGzE,mSAAC,4NAAI;oCAAC,MAAK;oCAAe,WAAU;8CAAyC;;;;;;;;;;;;sCAM/E,mSAAC;4BAAI,WAAU;;8CAEb,mSAAC;oCACC,MAAK;oCACL,QAAO;oCACP,KAAI;oCACJ,WAAU;oCACV,cAAW;8CAEX,cAAA,mSAAC;wCAAI,WAAU;kDACb,cAAA,mSAAC,6LAAK;4CACJ,KAAI;4CACJ,KAAI;4CACJ,OAAO;4CACP,QAAQ;4CACR,WAAU;;;;;;;;;;;;;;;;8CAMhB,mSAAC;oCACC,MAAK;oCACL,QAAO;oCACP,KAAI;oCACJ,WAAU;oCACV,cAAW;8CAEX,cAAA,mSAAC;wCAAI,WAAU;kDACb,cAAA,mSAAC,6LAAK;4CACJ,KAAI;4CACJ,KAAI;4CACJ,OAAO;4CACP,QAAQ;4CACR,WAAU;;;;;;;;;;;;;;;;8CAMhB,mSAAC;oCACC,MAAK;oCACL,QAAO;oCACP,KAAI;oCACJ,WAAU;oCACV,cAAW;8CAEX,cAAA,mSAAC;wCAAI,WAAU;kDACb,cAAA,mSAAC;4CAAK,WAAU;sDAAmF;;;;;;;;;;;;;;;;;;;;;;sCAMzG,mSAAC;4BAAI,WAAU;;8CACb,mSAAC;oCACC,MAAK;oCACL,QAAO;oCACP,KAAI;oCACJ,WAAU;oCACV,cAAW;8CAEX,cAAA,mSAAC,6LAAK;wCACJ,KAAI;wCACJ,KAAI;wCACJ,OAAO;wCACP,QAAQ;wCACR,WAAU;;;;;;;;;;;8CAId,mSAAC;oCACC,MAAK;oCACL,QAAO;oCACP,KAAI;oCACJ,WAAU;oCACV,cAAW;8CAEX,cAAA,mSAAC,6LAAK;wCACJ,KAAI;wCACJ,KAAI;wCACJ,OAAO;wCACP,QAAQ;wCACR,WAAU;;;;;;;;;;;;;;;;;;;;;;;8BAOlB,mSAAC;oBAAI,WAAU;8BACb,cAAA,mSAAC;wBAAE,WAAU;;4BAAuD;4BAC/D;4BAAY;;;;;;;;;;;;;;;;;;;;;;;AAM3B","debugId":null}},
    {"offset": {"line": 1474, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/config/constants.ts"],"sourcesContent":["/**\n * KEKTECH Smart Contract Configuration\n *\n * CRITICAL: These values are verified from production\n * DO NOT modify without consulting documentation\n */\n\n// === Contract Addresses ===\n\n// KEKTECH Main NFT Collection (ERC-721)\nexport const KEKTECH_CONTRACT_ADDRESS =\n  '0x40B6184b901334C0A88f528c1A0a1de7a77490f1' as const\n\n// TECH Token (ERC-20)\nexport const TECH_TOKEN_ADDRESS =\n  '0x62E8D022CAf673906e62904f7BB5ae467082b546' as const\n\n// KEKTECH Vouchers (ERC-1155)\nexport const KEKTECH_VOUCHERS_ADDRESS =\n  '0x7FEF981beE047227f848891c6C9F9dad11767a48' as const\n\n// === Chain Configuration ===\nexport const CHAIN_ID = 32323 as const // BasedAI Chain\n\n// === NFT Collection Parameters ===\nexport const MAX_SUPPLY = 4200 as const\nexport const MAX_MINT_PER_TX = 50 as const\n\n// === Backend API Endpoints ===\nexport const METADATA_API_URL = 'https://kektech.xyz/api/metadata' as const\nexport const RANKING_API_URL = 'https://api.kektech.xyz' as const\nexport const IMAGE_API_URL = 'https://kektech.xyz/api/image' as const\n\n// === Block Explorer ===\nexport const EXPLORER_URL = 'https://explorer.bf1337.org' as const\nexport const EXPLORER_API_URL = 'https://explorer.bf1337.org/api/v2' as const\n\n// === RPC Endpoint ===\nexport const RPC_URL = 'https://mainnet.basedaibridge.com/rpc/' as const\n"],"names":[],"mappings":"AAAA;;;;;CAKC,GAED,6BAA6B;AAE7B,wCAAwC;;;;;;;;;;;;;;;;;;;;;;;;;;;AACjC,MAAM,2BACX;AAGK,MAAM,qBACX;AAGK,MAAM,2BACX;AAGK,MAAM,WAAW,KAAe,gBAAgB;;AAGhD,MAAM,aAAa;AACnB,MAAM,kBAAkB;AAGxB,MAAM,mBAAmB;AACzB,MAAM,kBAAkB;AACxB,MAAM,gBAAgB;AAGtB,MAAM,eAAe;AACrB,MAAM,mBAAmB;AAGzB,MAAM,UAAU","debugId":null}},
    {"offset": {"line": 1524, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/config/contracts/kektech-main.ts"],"sourcesContent":["import { parseEther } from 'viem'\nimport {\n  KEKTECH_CONTRACT_ADDRESS,\n  MAX_SUPPLY,\n  MAX_MINT_PER_TX,\n  METADATA_API_URL,\n  RANKING_API_URL,\n  IMAGE_API_URL,\n} from '../constants'\n\n/**\n * KEKTECH Main Collection Configuration\n *\n * This is the single source of truth for the main KEKTECH collection\n */\n\n// Minimal ABI - Only the functions we need for the frontend\nexport const KEKTECH_MAIN_ABI = [\n  // READ FUNCTIONS\n  {\n    name: 'saleIsActive',\n    type: 'function',\n    stateMutability: 'view',\n    inputs: [],\n    outputs: [{ name: '', type: 'bool' }],\n  },\n  {\n    name: 'tokenPrice',\n    type: 'function',\n    stateMutability: 'view',\n    inputs: [],\n    outputs: [{ name: '', type: 'uint256' }],\n  },\n  {\n    name: 'totalSupply',\n    type: 'function',\n    stateMutability: 'view',\n    inputs: [],\n    outputs: [{ name: '', type: 'uint256' }],\n  },\n  {\n    name: 'MAX_SUPPLY',\n    type: 'function',\n    stateMutability: 'view',\n    inputs: [],\n    outputs: [{ name: '', type: 'uint256' }],\n  },\n  {\n    name: 'MAX_MINT_PER_TX',\n    type: 'function',\n    stateMutability: 'view',\n    inputs: [],\n    outputs: [{ name: '', type: 'uint256' }],\n  },\n  // WRITE FUNCTION\n  {\n    name: 'mint',\n    type: 'function',\n    stateMutability: 'payable',\n    inputs: [{ name: 'quantity', type: 'uint256' }],\n    outputs: [],\n  },\n] as const\n\n// Collection Configuration\nexport const KEKTECH_MAIN = {\n  // Identifiers\n  id: 'kektech-main' as const,\n  name: 'KEKTECH' as const,\n  symbol: 'KEKTECH' as const,\n  description: 'The original KEKTECH NFT collection on BasedAI' as const,\n\n  // Contract Details\n  address: KEKTECH_CONTRACT_ADDRESS,\n  abi: KEKTECH_MAIN_ABI,\n\n  // Supply Configuration (from constants, but can be verified on-chain)\n  maxSupply: MAX_SUPPLY,\n  maxMintPerTx: MAX_MINT_PER_TX,\n\n  // Mint Price (read from contract, this is just the known value for reference)\n  // Actual price should always be read from tokenPrice() function\n  referenceMintPrice: parseEther('18369'), // 18369 $BASED\n\n  // API Endpoints\n  metadataAPI: METADATA_API_URL,\n  rankingAPI: RANKING_API_URL,\n  imageAPI: IMAGE_API_URL,\n\n  // UI Configuration\n  theme: {\n    primary: '#00ff00',\n    accent: '#ff00ff',\n  },\n\n  // Feature Flags\n  features: {\n    minting: true,\n    gallery: true,\n    trading: false, // Future: marketplace integration\n  },\n} as const\n\n// Export type for use in components\nexport type CollectionConfig = typeof KEKTECH_MAIN\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAgBO,MAAM,mBAAmB;IAC9B,iBAAiB;IACjB;QACE,MAAM;QACN,MAAM;QACN,iBAAiB;QACjB,QAAQ,EAAE;QACV,SAAS;YAAC;gBAAE,MAAM;gBAAI,MAAM;YAAO;SAAE;IACvC;IACA;QACE,MAAM;QACN,MAAM;QACN,iBAAiB;QACjB,QAAQ,EAAE;QACV,SAAS;YAAC;gBAAE,MAAM;gBAAI,MAAM;YAAU;SAAE;IAC1C;IACA;QACE,MAAM;QACN,MAAM;QACN,iBAAiB;QACjB,QAAQ,EAAE;QACV,SAAS;YAAC;gBAAE,MAAM;gBAAI,MAAM;YAAU;SAAE;IAC1C;IACA;QACE,MAAM;QACN,MAAM;QACN,iBAAiB;QACjB,QAAQ,EAAE;QACV,SAAS;YAAC;gBAAE,MAAM;gBAAI,MAAM;YAAU;SAAE;IAC1C;IACA;QACE,MAAM;QACN,MAAM;QACN,iBAAiB;QACjB,QAAQ,EAAE;QACV,SAAS;YAAC;gBAAE,MAAM;gBAAI,MAAM;YAAU;SAAE;IAC1C;IACA,iBAAiB;IACjB;QACE,MAAM;QACN,MAAM;QACN,iBAAiB;QACjB,QAAQ;YAAC;gBAAE,MAAM;gBAAY,MAAM;YAAU;SAAE;QAC/C,SAAS,EAAE;IACb;CACD;AAGM,MAAM,eAAe;IAC1B,cAAc;IACd,IAAI;IACJ,MAAM;IACN,QAAQ;IACR,aAAa;IAEb,mBAAmB;IACnB,SAAS,oMAAwB;IACjC,KAAK;IAEL,sEAAsE;IACtE,WAAW,sLAAU;IACrB,cAAc,2LAAe;IAE7B,8EAA8E;IAC9E,gEAAgE;IAChE,oBAAoB,IAAA,8NAAU,EAAC;IAE/B,gBAAgB;IAChB,aAAa,4LAAgB;IAC7B,YAAY,2LAAe;IAC3B,UAAU,yLAAa;IAEvB,mBAAmB;IACnB,OAAO;QACL,SAAS;QACT,QAAQ;IACV;IAEA,gBAAgB;IAChB,UAAU;QACR,SAAS;QACT,SAAS;QACT,SAAS;IACX;AACF","debugId":null}},
    {"offset": {"line": 1645, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/config/contracts/tech-token.ts"],"sourcesContent":["/**\n * TECH Token Configuration (ERC-20)\n *\n * Main utility token for the KEKTECH ecosystem\n */\n\nexport const TECH_TOKEN_ADDRESS = '0x62E8D022CAf673906e62904f7BB5ae467082b546' as const\n\n// Minimal ERC-20 ABI for reading balances and metadata\nexport const TECH_TOKEN_ABI = [\n  // READ FUNCTIONS\n  {\n    name: 'balanceOf',\n    type: 'function',\n    stateMutability: 'view',\n    inputs: [{ name: 'account', type: 'address' }],\n    outputs: [{ name: '', type: 'uint256' }],\n  },\n  {\n    name: 'totalSupply',\n    type: 'function',\n    stateMutability: 'view',\n    inputs: [],\n    outputs: [{ name: '', type: 'uint256' }],\n  },\n  {\n    name: 'decimals',\n    type: 'function',\n    stateMutability: 'view',\n    inputs: [],\n    outputs: [{ name: '', type: 'uint8' }],\n  },\n  {\n    name: 'symbol',\n    type: 'function',\n    stateMutability: 'view',\n    inputs: [],\n    outputs: [{ name: '', type: 'string' }],\n  },\n  {\n    name: 'name',\n    type: 'function',\n    stateMutability: 'view',\n    inputs: [],\n    outputs: [{ name: '', type: 'string' }],\n  },\n  // WRITE FUNCTIONS (for future use)\n  {\n    name: 'transfer',\n    type: 'function',\n    stateMutability: 'nonpayable',\n    inputs: [\n      { name: 'to', type: 'address' },\n      { name: 'amount', type: 'uint256' },\n    ],\n    outputs: [{ name: '', type: 'bool' }],\n  },\n  {\n    name: 'approve',\n    type: 'function',\n    stateMutability: 'nonpayable',\n    inputs: [\n      { name: 'spender', type: 'address' },\n      { name: 'amount', type: 'uint256' },\n    ],\n    outputs: [{ name: '', type: 'bool' }],\n  },\n] as const\n\n// Token Configuration\nexport const TECH_TOKEN = {\n  // Identifiers\n  id: 'tech-token' as const,\n  name: 'TECH' as const,\n  symbol: 'TECH' as const,\n  description: 'Utility token for the KEKTECH ecosystem on BasedAI' as const,\n\n  // Contract Details\n  address: TECH_TOKEN_ADDRESS,\n  abi: TECH_TOKEN_ABI,\n\n  // Token Parameters (verified from explorer)\n  decimals: 18,\n  totalSupply: '133742069', // 133.7M TECH (before decimals)\n\n  // Explorer Links\n  explorerUrl: `https://explorer.bf1337.org/token/${TECH_TOKEN_ADDRESS}`,\n\n  // UI Configuration\n  theme: {\n    primary: '#3fb8bd',\n    gradient: 'from-cyan-500 to-blue-500',\n  },\n\n  // Feature Flags\n  features: {\n    transfer: true,\n    swap: false, // Future: DEX integration\n    stake: false, // Future: staking rewards\n  },\n} as const\n\n// Export type for use in components\nexport type TechTokenConfig = typeof TECH_TOKEN\n"],"names":[],"mappings":"AAAA;;;;CAIC;;;;;;;;AAEM,MAAM,qBAAqB;AAG3B,MAAM,iBAAiB;IAC5B,iBAAiB;IACjB;QACE,MAAM;QACN,MAAM;QACN,iBAAiB;QACjB,QAAQ;YAAC;gBAAE,MAAM;gBAAW,MAAM;YAAU;SAAE;QAC9C,SAAS;YAAC;gBAAE,MAAM;gBAAI,MAAM;YAAU;SAAE;IAC1C;IACA;QACE,MAAM;QACN,MAAM;QACN,iBAAiB;QACjB,QAAQ,EAAE;QACV,SAAS;YAAC;gBAAE,MAAM;gBAAI,MAAM;YAAU;SAAE;IAC1C;IACA;QACE,MAAM;QACN,MAAM;QACN,iBAAiB;QACjB,QAAQ,EAAE;QACV,SAAS;YAAC;gBAAE,MAAM;gBAAI,MAAM;YAAQ;SAAE;IACxC;IACA;QACE,MAAM;QACN,MAAM;QACN,iBAAiB;QACjB,QAAQ,EAAE;QACV,SAAS;YAAC;gBAAE,MAAM;gBAAI,MAAM;YAAS;SAAE;IACzC;IACA;QACE,MAAM;QACN,MAAM;QACN,iBAAiB;QACjB,QAAQ,EAAE;QACV,SAAS;YAAC;gBAAE,MAAM;gBAAI,MAAM;YAAS;SAAE;IACzC;IACA,mCAAmC;IACnC;QACE,MAAM;QACN,MAAM;QACN,iBAAiB;QACjB,QAAQ;YACN;gBAAE,MAAM;gBAAM,MAAM;YAAU;YAC9B;gBAAE,MAAM;gBAAU,MAAM;YAAU;SACnC;QACD,SAAS;YAAC;gBAAE,MAAM;gBAAI,MAAM;YAAO;SAAE;IACvC;IACA;QACE,MAAM;QACN,MAAM;QACN,iBAAiB;QACjB,QAAQ;YACN;gBAAE,MAAM;gBAAW,MAAM;YAAU;YACnC;gBAAE,MAAM;gBAAU,MAAM;YAAU;SACnC;QACD,SAAS;YAAC;gBAAE,MAAM;gBAAI,MAAM;YAAO;SAAE;IACvC;CACD;AAGM,MAAM,aAAa;IACxB,cAAc;IACd,IAAI;IACJ,MAAM;IACN,QAAQ;IACR,aAAa;IAEb,mBAAmB;IACnB,SAAS;IACT,KAAK;IAEL,4CAA4C;IAC5C,UAAU;IACV,aAAa;IAEb,iBAAiB;IACjB,aAAa,CAAC,kCAAkC,EAAE,oBAAoB;IAEtE,mBAAmB;IACnB,OAAO;QACL,SAAS;QACT,UAAU;IACZ;IAEA,gBAAgB;IAChB,UAAU;QACR,UAAU;QACV,MAAM;QACN,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 1799, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/config/contracts/kektech-vouchers.ts"],"sourcesContent":["/**\n * KEKTECH Vouchers Configuration (ERC-1155)\n *\n * Multi-token voucher system for KEKTECH ecosystem\n */\n\nexport const KEKTECH_VOUCHERS_ADDRESS = '0x7FEF981beE047227f848891c6C9F9dad11767a48' as const\n\n// Minimal ERC-1155 ABI for reading balances and metadata\nexport const KEKTECH_VOUCHERS_ABI = [\n  // READ FUNCTIONS\n  {\n    name: 'balanceOf',\n    type: 'function',\n    stateMutability: 'view',\n    inputs: [\n      { name: 'account', type: 'address' },\n      { name: 'id', type: 'uint256' },\n    ],\n    outputs: [{ name: '', type: 'uint256' }],\n  },\n  {\n    name: 'balanceOfBatch',\n    type: 'function',\n    stateMutability: 'view',\n    inputs: [\n      { name: 'accounts', type: 'address[]' },\n      { name: 'ids', type: 'uint256[]' },\n    ],\n    outputs: [{ name: '', type: 'uint256[]' }],\n  },\n  {\n    name: 'uri',\n    type: 'function',\n    stateMutability: 'view',\n    inputs: [{ name: 'id', type: 'uint256' }],\n    outputs: [{ name: '', type: 'string' }],\n  },\n  {\n    name: 'isApprovedForAll',\n    type: 'function',\n    stateMutability: 'view',\n    inputs: [\n      { name: 'account', type: 'address' },\n      { name: 'operator', type: 'address' },\n    ],\n    outputs: [{ name: '', type: 'bool' }],\n  },\n  // WRITE FUNCTIONS (for future use)\n  {\n    name: 'setApprovalForAll',\n    type: 'function',\n    stateMutability: 'nonpayable',\n    inputs: [\n      { name: 'operator', type: 'address' },\n      { name: 'approved', type: 'bool' },\n    ],\n    outputs: [],\n  },\n  {\n    name: 'safeTransferFrom',\n    type: 'function',\n    stateMutability: 'nonpayable',\n    inputs: [\n      { name: 'from', type: 'address' },\n      { name: 'to', type: 'address' },\n      { name: 'id', type: 'uint256' },\n      { name: 'amount', type: 'uint256' },\n      { name: 'data', type: 'bytes' },\n    ],\n    outputs: [],\n  },\n] as const\n\n// Known Voucher Types (from explorer: IDs 0, 1, 2, 3)\nexport const VOUCHER_TYPES = [\n  {\n    id: 0,\n    name: 'Genesis Voucher',\n    description: 'Original KEKTECH voucher for early supporters',\n    icon: 'üé´',\n    imageUrl: '', // TODO: Add actual GIF URL from IPFS/metadata\n    rarity: 'legendary',\n  },\n  {\n    id: 1,\n    name: 'Silver Voucher',\n    description: 'Standard KEKTECH voucher with base benefits',\n    icon: 'üéüÔ∏è',\n    imageUrl: '', // TODO: Add actual GIF URL from IPFS/metadata\n    rarity: 'common',\n  },\n  {\n    id: 2,\n    name: 'Gold Voucher',\n    description: 'Premium KEKTECH voucher with enhanced rewards',\n    icon: 'üèÜ',\n    imageUrl: '', // TODO: Add actual GIF URL from IPFS/metadata\n    rarity: 'rare',\n  },\n  {\n    id: 3,\n    name: 'Platinum Voucher',\n    description: 'Elite KEKTECH voucher with maximum benefits',\n    icon: 'üíé',\n    imageUrl: '', // TODO: Add actual GIF URL from IPFS/metadata\n    rarity: 'epic',\n  },\n] as const\n\n// Collection Configuration\nexport const KEKTECH_VOUCHERS = {\n  // Identifiers\n  id: 'kektech-vouchers' as const,\n  name: 'KEKTECH Vouchers' as const,\n  symbol: 'KEKTV' as const,\n  description: 'Multi-token voucher system for exclusive KEKTECH benefits' as const,\n\n  // Contract Details\n  address: KEKTECH_VOUCHERS_ADDRESS,\n  abi: KEKTECH_VOUCHERS_ABI,\n\n  // Voucher Types\n  voucherTypes: VOUCHER_TYPES,\n  knownTokenIds: [0, 1, 2, 3] as const,\n\n  // Explorer Links\n  explorerUrl: `https://explorer.bf1337.org/token/${KEKTECH_VOUCHERS_ADDRESS}`,\n\n  // UI Configuration\n  theme: {\n    primary: '#9333ea', // Purple\n    gradient: 'from-purple-500 to-pink-500',\n  },\n\n  // Rarity Colors\n  rarityColors: {\n    legendary: 'from-yellow-400 to-orange-500',\n    epic: 'from-purple-500 to-pink-500',\n    rare: 'from-blue-500 to-cyan-500',\n    common: 'from-gray-500 to-gray-600',\n  },\n\n  // Feature Flags\n  features: {\n    viewing: true,\n    transfer: true,\n    redeem: false, // Future: voucher redemption\n    marketplace: false, // Future: trading\n  },\n} as const\n\n// Export type for use in components\nexport type VouchersConfig = typeof KEKTECH_VOUCHERS\nexport type VoucherType = (typeof VOUCHER_TYPES)[number]\n"],"names":[],"mappings":"AAAA;;;;CAIC;;;;;;;;;;AAEM,MAAM,2BAA2B;AAGjC,MAAM,uBAAuB;IAClC,iBAAiB;IACjB;QACE,MAAM;QACN,MAAM;QACN,iBAAiB;QACjB,QAAQ;YACN;gBAAE,MAAM;gBAAW,MAAM;YAAU;YACnC;gBAAE,MAAM;gBAAM,MAAM;YAAU;SAC/B;QACD,SAAS;YAAC;gBAAE,MAAM;gBAAI,MAAM;YAAU;SAAE;IAC1C;IACA;QACE,MAAM;QACN,MAAM;QACN,iBAAiB;QACjB,QAAQ;YACN;gBAAE,MAAM;gBAAY,MAAM;YAAY;YACtC;gBAAE,MAAM;gBAAO,MAAM;YAAY;SAClC;QACD,SAAS;YAAC;gBAAE,MAAM;gBAAI,MAAM;YAAY;SAAE;IAC5C;IACA;QACE,MAAM;QACN,MAAM;QACN,iBAAiB;QACjB,QAAQ;YAAC;gBAAE,MAAM;gBAAM,MAAM;YAAU;SAAE;QACzC,SAAS;YAAC;gBAAE,MAAM;gBAAI,MAAM;YAAS;SAAE;IACzC;IACA;QACE,MAAM;QACN,MAAM;QACN,iBAAiB;QACjB,QAAQ;YACN;gBAAE,MAAM;gBAAW,MAAM;YAAU;YACnC;gBAAE,MAAM;gBAAY,MAAM;YAAU;SACrC;QACD,SAAS;YAAC;gBAAE,MAAM;gBAAI,MAAM;YAAO;SAAE;IACvC;IACA,mCAAmC;IACnC;QACE,MAAM;QACN,MAAM;QACN,iBAAiB;QACjB,QAAQ;YACN;gBAAE,MAAM;gBAAY,MAAM;YAAU;YACpC;gBAAE,MAAM;gBAAY,MAAM;YAAO;SAClC;QACD,SAAS,EAAE;IACb;IACA;QACE,MAAM;QACN,MAAM;QACN,iBAAiB;QACjB,QAAQ;YACN;gBAAE,MAAM;gBAAQ,MAAM;YAAU;YAChC;gBAAE,MAAM;gBAAM,MAAM;YAAU;YAC9B;gBAAE,MAAM;gBAAM,MAAM;YAAU;YAC9B;gBAAE,MAAM;gBAAU,MAAM;YAAU;YAClC;gBAAE,MAAM;gBAAQ,MAAM;YAAQ;SAC/B;QACD,SAAS,EAAE;IACb;CACD;AAGM,MAAM,gBAAgB;IAC3B;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,MAAM;QACN,UAAU;QACV,QAAQ;IACV;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,MAAM;QACN,UAAU;QACV,QAAQ;IACV;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,MAAM;QACN,UAAU;QACV,QAAQ;IACV;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,MAAM;QACN,UAAU;QACV,QAAQ;IACV;CACD;AAGM,MAAM,mBAAmB;IAC9B,cAAc;IACd,IAAI;IACJ,MAAM;IACN,QAAQ;IACR,aAAa;IAEb,mBAAmB;IACnB,SAAS;IACT,KAAK;IAEL,gBAAgB;IAChB,cAAc;IACd,eAAe;QAAC;QAAG;QAAG;QAAG;KAAE;IAE3B,iBAAiB;IACjB,aAAa,CAAC,kCAAkC,EAAE,0BAA0B;IAE5E,mBAAmB;IACnB,OAAO;QACL,SAAS;QACT,UAAU;IACZ;IAEA,gBAAgB;IAChB,cAAc;QACZ,WAAW;QACX,MAAM;QACN,MAAM;QACN,QAAQ;IACV;IAEA,gBAAgB;IAChB,UAAU;QACR,SAAS;QACT,UAAU;QACV,QAAQ;QACR,aAAa;IACf;AACF","debugId":null}},
    {"offset": {"line": 2019, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/config/contracts/index.ts"],"sourcesContent":["/**\n * Contract Configurations Export\n *\n * Single entry point for all contract configurations\n */\n\n// NFT Collections\nexport { KEKTECH_MAIN, KEKTECH_MAIN_ABI, type CollectionConfig } from './kektech-main'\n\n// ERC-20 Token\nexport { TECH_TOKEN, TECH_TOKEN_ABI, TECH_TOKEN_ADDRESS, type TechTokenConfig } from './tech-token'\n\n// ERC-1155 Vouchers\nexport {\n  KEKTECH_VOUCHERS,\n  KEKTECH_VOUCHERS_ABI,\n  KEKTECH_VOUCHERS_ADDRESS,\n  VOUCHER_TYPES,\n  type VouchersConfig,\n  type VoucherType,\n} from './kektech-vouchers'\n"],"names":[],"mappings":"AAAA;;;;CAIC,GAED,kBAAkB;;AAClB;AAEA,eAAe;AACf;AAEA,oBAAoB;AACpB","debugId":null}},
    {"offset": {"line": 2037, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/lib/hooks/useMint.ts"],"sourcesContent":["import { useState } from 'react'\nimport { useAccount, useWriteContract, useWaitForTransactionReceipt, useChainId, useSwitchChain } from 'wagmi'\nimport { KEKTECH_MAIN } from '@/config/contracts'\nimport { basedChain } from '@/config/chains'\n\n/**\n * Custom hook for minting KEKTECH NFTs\n *\n * Handles the complete minting flow:\n * - Transaction preparation\n * - Contract interaction\n * - Transaction confirmation\n * - Error handling\n */\nexport function useMint() {\n  const { address, isConnected } = useAccount()\n  const chainId = useChainId()\n  const { switchChainAsync } = useSwitchChain()\n  const [mintAmount, setMintAmount] = useState(1)\n\n  // Write contract hook\n  const {\n    writeContract,\n    data: hash,\n    isPending: isWritePending,\n    error: writeError,\n  } = useWriteContract()\n\n  // Wait for transaction receipt\n  const {\n    isLoading: isConfirming,\n    isSuccess: isConfirmed,\n    error: confirmError,\n  } = useWaitForTransactionReceipt({\n    hash,\n  })\n\n  /**\n   * Execute mint transaction\n   */\n  const mint = async () => {\n    if (!isConnected || !address) {\n      throw new Error('Please connect your wallet first')\n    }\n\n    if (mintAmount < 1 || mintAmount > KEKTECH_MAIN.maxMintPerTx) {\n      throw new Error(\n        `Mint amount must be between 1 and ${KEKTECH_MAIN.maxMintPerTx}`\n      )\n    }\n\n    try {\n      // Auto-switch to BasedAI Chain if on wrong network\n      if (chainId !== basedChain.id) {\n        console.log(`Switching from chain ${chainId} to BasedAI chain ${basedChain.id}`)\n        await switchChainAsync({ chainId: basedChain.id })\n      }\n\n      // Calculate total cost (using reference price)\n      const totalCost = BigInt(mintAmount) * KEKTECH_MAIN.referenceMintPrice\n\n      // Execute mint transaction with explicit chain ID\n      writeContract({\n        address: KEKTECH_MAIN.address,\n        abi: KEKTECH_MAIN.abi,\n        functionName: 'mint',\n        args: [BigInt(mintAmount)],\n        value: totalCost,\n        chainId: basedChain.id,\n      })\n    } catch (error) {\n      console.error('Mint error:', error)\n      throw error\n    }\n  }\n\n  return {\n    // State\n    mintAmount,\n    setMintAmount,\n    isConnected,\n    address,\n\n    // Transaction status\n    isWritePending,\n    isConfirming,\n    isConfirmed,\n    hash,\n\n    // Errors\n    error: writeError || confirmError,\n\n    // Actions\n    mint,\n\n    // Helpers\n    maxMintPerTx: KEKTECH_MAIN.maxMintPerTx,\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;;;;;AAWO,SAAS;IACd,MAAM,EAAE,OAAO,EAAE,WAAW,EAAE,GAAG,IAAA,8NAAU;IAC3C,MAAM,UAAU,IAAA,8NAAU;IAC1B,MAAM,EAAE,gBAAgB,EAAE,GAAG,IAAA,sOAAc;IAC3C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,sQAAQ,EAAC;IAE7C,sBAAsB;IACtB,MAAM,EACJ,aAAa,EACb,MAAM,IAAI,EACV,WAAW,cAAc,EACzB,OAAO,UAAU,EAClB,GAAG,IAAA,0OAAgB;IAEpB,+BAA+B;IAC/B,MAAM,EACJ,WAAW,YAAY,EACvB,WAAW,WAAW,EACtB,OAAO,YAAY,EACpB,GAAG,IAAA,kQAA4B,EAAC;QAC/B;IACF;IAEA;;GAEC,GACD,MAAM,OAAO;QACX,IAAI,CAAC,eAAe,CAAC,SAAS;YAC5B,MAAM,IAAI,MAAM;QAClB;QAEA,IAAI,aAAa,KAAK,aAAa,2MAAY,CAAC,YAAY,EAAE;YAC5D,MAAM,IAAI,MACR,CAAC,kCAAkC,EAAE,2MAAY,CAAC,YAAY,EAAE;QAEpE;QAEA,IAAI;YACF,mDAAmD;YACnD,IAAI,YAAY,mLAAU,CAAC,EAAE,EAAE;gBAC7B,QAAQ,GAAG,CAAC,CAAC,qBAAqB,EAAE,QAAQ,kBAAkB,EAAE,mLAAU,CAAC,EAAE,EAAE;gBAC/E,MAAM,iBAAiB;oBAAE,SAAS,mLAAU,CAAC,EAAE;gBAAC;YAClD;YAEA,+CAA+C;YAC/C,MAAM,YAAY,OAAO,cAAc,2MAAY,CAAC,kBAAkB;YAEtE,kDAAkD;YAClD,cAAc;gBACZ,SAAS,2MAAY,CAAC,OAAO;gBAC7B,KAAK,2MAAY,CAAC,GAAG;gBACrB,cAAc;gBACd,MAAM;oBAAC,OAAO;iBAAY;gBAC1B,OAAO;gBACP,SAAS,mLAAU,CAAC,EAAE;YACxB;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,eAAe;YAC7B,MAAM;QACR;IACF;IAEA,OAAO;QACL,QAAQ;QACR;QACA;QACA;QACA;QAEA,qBAAqB;QACrB;QACA;QACA;QACA;QAEA,SAAS;QACT,OAAO,cAAc;QAErB,UAAU;QACV;QAEA,UAAU;QACV,cAAc,2MAAY,CAAC,YAAY;IACzC;AACF","debugId":null}},
    {"offset": {"line": 2123, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/lib/hooks/useMintedNFTs.ts"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { usePublicClient } from 'wagmi'\nimport { decodeEventLog, type Hash } from 'viem'\n\n/**\n * Hook to fetch minted NFT data after successful mint transaction\n *\n * Workflow:\n * 1. Wait for transaction to be confirmed\n * 2. Parse transaction receipt for Transfer events\n * 3. Extract token IDs (where from = 0x000... = minted)\n * 4. Fetch NFT metadata from backend API\n * 5. Return array of minted NFTs with images\n */\n\ninterface MintedNFT {\n  tokenId: string\n  name: string\n  imageUrl: string\n  rank?: number\n  rarityScore?: number\n}\n\ninterface UseMintedNFTsResult {\n  mintedNFTs: MintedNFT[]\n  isLoading: boolean\n  error: string | null\n}\n\nexport function useMintedNFTs(\n  hash: Hash | undefined,\n  isConfirmed: boolean\n): UseMintedNFTsResult {\n  const publicClient = usePublicClient()\n  const [mintedNFTs, setMintedNFTs] = useState<MintedNFT[]>([])\n  const [isLoading, setIsLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  useEffect(() => {\n    if (!hash || !isConfirmed || !publicClient) {\n      return\n    }\n\n    let isMounted = true\n\n    async function fetchMintedNFTs() {\n      setIsLoading(true)\n      setError(null)\n\n      try {\n        // 1. Get transaction receipt\n        const receipt = await publicClient.getTransactionReceipt({ hash: hash! })\n\n        // 2. Parse logs for Transfer events\n        // Standard ERC721 Transfer event signature\n        const TRANSFER_EVENT_SIGNATURE =\n          '0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef'\n\n        const transferLogs = receipt.logs.filter(\n          (log) => log.topics[0] === TRANSFER_EVENT_SIGNATURE\n        )\n\n        // 3. Extract token IDs (from == 0x000... = minted)\n        const ZERO_ADDRESS = '0x0000000000000000000000000000000000000000'\n        const tokenIds: string[] = []\n\n        for (const log of transferLogs) {\n          try {\n            const decoded = decodeEventLog({\n              abi: [\n                {\n                  type: 'event',\n                  name: 'Transfer',\n                  inputs: [\n                    { name: 'from', type: 'address', indexed: true },\n                    { name: 'to', type: 'address', indexed: true },\n                    { name: 'tokenId', type: 'uint256', indexed: true },\n                  ],\n                },\n              ],\n              data: log.data,\n              topics: log.topics,\n            })\n\n            // Check if this is a mint (from zero address)\n            if (\n              decoded.args.from.toLowerCase() === ZERO_ADDRESS.toLowerCase()\n            ) {\n              tokenIds.push(decoded.args.tokenId.toString())\n            }\n          } catch (err) {\n            console.warn('Failed to decode transfer log:', err)\n          }\n        }\n\n        if (tokenIds.length === 0) {\n          throw new Error('No minted tokens found in transaction')\n        }\n\n        // 4. Fetch NFT metadata from backend (limit to first 3)\n        const nftsToFetch = tokenIds.slice(0, 3)\n        const fetchedNFTs: MintedNFT[] = []\n\n        for (const tokenId of nftsToFetch) {\n          try {\n            const response = await fetch(`/api/nft/${tokenId}`)\n\n            if (!response.ok) {\n              throw new Error(`Failed to fetch NFT ${tokenId}`)\n            }\n\n            const data = await response.json()\n            fetchedNFTs.push({\n              tokenId,\n              name: data.name || `KEKTECH #${tokenId}`,\n              imageUrl: data.imageUrl || '',\n              rank: data.rank,\n              rarityScore: data.rarityScore,\n            })\n          } catch (err) {\n            console.error(`Failed to fetch NFT ${tokenId}:`, err)\n            // Add placeholder for failed fetches\n            fetchedNFTs.push({\n              tokenId,\n              name: `KEKTECH #${tokenId}`,\n              imageUrl: '', // Will show fallback in UI\n            })\n          }\n        }\n\n        if (isMounted) {\n          setMintedNFTs(fetchedNFTs)\n        }\n      } catch (err) {\n        console.error('Error fetching minted NFTs:', err)\n        if (isMounted) {\n          setError(err instanceof Error ? err.message : 'Failed to fetch NFTs')\n        }\n      } finally {\n        if (isMounted) {\n          setIsLoading(false)\n        }\n      }\n    }\n\n    fetchMintedNFTs()\n\n    return () => {\n      isMounted = false\n    }\n  }, [hash, isConfirmed, publicClient])\n\n  return {\n    mintedNFTs,\n    isLoading,\n    error,\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2258, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/lib/blockchain/kektv.ts"],"sourcesContent":["/**\n * KEKTV Blockchain Service\n * Interacts with KEKTV NFT contract on BASED Chain\n */\n\n// BASED Chain Configuration\nexport const BASED_CHAIN_CONFIG = {\n  chainId: 32323,\n  chainIdHex: '0x7e43',\n  name: 'BASED',\n  rpcUrl: 'https://mainnet.basedaibridge.com/rpc',\n  explorerUrl: 'https://explorer.bf1337.org',\n  nativeCurrency: {\n    name: 'BASED',\n    symbol: 'BASED',\n    decimals: 18\n  }\n}\n\n// Contract Addresses\nexport const CONTRACTS = {\n  KEKTECH: '0x40B6184b901334C0A88f528c1A0a1de7a77490f1',\n  KEKTV: '0x7FEF981beE047227f848891c6C9F9dad11767a48'\n}\n\n// ERC-721 ABI will be used in future versions for more complex interactions\n// For now, we use simple eth_call with encoded function data\n\nexport interface NFTListing {\n  tokenId: number\n  name: string\n  image: string\n  price: string\n  priceInBased: number\n  owner: string\n  listed: boolean\n}\n\nexport interface UserNFTHoldings {\n  kektech: number\n  kektv: number\n}\n\n/**\n * Get NFT balance for a wallet address\n */\nexport async function getNFTBalance(\n  walletAddress: string,\n  contractAddress: string\n): Promise<number> {\n  try {\n    if (typeof window === 'undefined' || !window.ethereum) {\n      throw new Error('No ethereum provider found')\n    }\n\n    // Use eth_call to query balance\n    const data = encodeFunctionData('balanceOf(address)', [walletAddress])\n\n    const result = await window.ethereum.request({\n      method: 'eth_call',\n      params: [\n        {\n          to: contractAddress,\n          data: data\n        },\n        'latest'\n      ]\n    })\n\n    // Decode result (it's a uint256)\n    return parseInt(result as string, 16)\n  } catch (error) {\n    console.error('Error fetching NFT balance:', error)\n    return 0\n  }\n}\n\n/**\n * Get user's NFT holdings for both KEKTECH and KEKTV\n */\nexport async function getUserNFTHoldings(\n  walletAddress: string\n): Promise<UserNFTHoldings> {\n  try {\n    const [kektechBalance, kektvBalance] = await Promise.all([\n      getNFTBalance(walletAddress, CONTRACTS.KEKTECH),\n      getNFTBalance(walletAddress, CONTRACTS.KEKTV)\n    ])\n\n    return {\n      kektech: kektechBalance,\n      kektv: kektvBalance\n    }\n  } catch (error) {\n    console.error('Error fetching user holdings:', error)\n    return { kektech: 0, kektv: 0 }\n  }\n}\n\n/**\n * Fetch KEKTV listings from blockchain\n * Note: This is a simplified version - a real implementation would need:\n * - A marketplace contract with listing functions\n * - Or indexing events from the blockchain\n * - Or a backend API that tracks listings\n */\nexport async function getKEKTVListings(): Promise<NFTListing[]> {\n  try {\n    // For now, return mock data with BASED pricing\n    // TODO: Implement real marketplace contract integration\n    return [\n      {\n        tokenId: 1,\n        name: 'KEKTV #001',\n        image: '/images/kektv-placeholder.gif',\n        price: '10 BASED',\n        priceInBased: 10,\n        owner: '0x0000000000000000000000000000000000000000',\n        listed: true\n      },\n      {\n        tokenId: 2,\n        name: 'KEKTV #002',\n        image: '/images/kektv-placeholder.gif',\n        price: '15 BASED',\n        priceInBased: 15,\n        owner: '0x0000000000000000000000000000000000000000',\n        listed: true\n      },\n      {\n        tokenId: 3,\n        name: 'KEKTV #003',\n        image: '/images/kektv-placeholder.gif',\n        price: '20 BASED',\n        priceInBased: 20,\n        owner: '0x0000000000000000000000000000000000000000',\n        listed: true\n      }\n    ]\n  } catch (error) {\n    console.error('Error fetching KEKTV listings:', error)\n    return []\n  }\n}\n\n/**\n * Get KEKTV marketplace statistics\n */\nexport async function getKEKTVMarketplaceStats() {\n  try {\n    // TODO: Implement real stats from blockchain/marketplace contract\n    return {\n      totalListed: 9,\n      floorPrice: 10,\n      holders: 7,\n      volume24h: 250\n    }\n  } catch (error) {\n    console.error('Error fetching marketplace stats:', error)\n    return {\n      totalListed: 0,\n      floorPrice: 0,\n      holders: 0,\n      volume24h: 0\n    }\n  }\n}\n\n/**\n * Helper function to encode function data for eth_call\n */\nfunction encodeFunctionData(signature: string, params: unknown[]): string {\n  // Simple function signature hashing (first 4 bytes of keccak256)\n  const functionSelector = keccak256(signature).slice(0, 10)\n\n  // For balanceOf, we need to encode the address parameter\n  if (signature === 'balanceOf(address)' && params.length === 1) {\n    const address = (params[0] as string).toLowerCase().replace('0x', '')\n    // Pad address to 32 bytes (64 hex chars)\n    const paddedAddress = address.padStart(64, '0')\n    return functionSelector + paddedAddress\n  }\n\n  // For totalSupply(), just return the function selector (no params)\n  if (signature === 'totalSupply()') {\n    return functionSelector\n  }\n\n  return functionSelector\n}\n\n/**\n * Simple keccak256 hash (for function selectors)\n * In production, use a proper library like ethers.js\n */\nfunction keccak256(text: string): string {\n  // For now, return pre-computed hash for balanceOf and totalSupply\n  // In production, use: import { keccak256 as keccak } from 'ethers'\n  const precomputed: { [key: string]: string } = {\n    'balanceOf(address)': '0x70a08231',\n    'totalSupply()': '0x18160ddd'\n  }\n\n  return precomputed[text] || '0x00000000'\n}\n\n/**\n * Tier distribution interface\n */\nexport interface TierDistribution {\n  tier: 'Mythic' | 'Legendary' | 'Epic' | 'Rare' | 'Common'\n  minted: number\n  total: number\n  color: string\n}\n\n/**\n * Get tier distribution for KEKTECH NFTs\n * Shows how many NFTs are minted in each rarity tier\n */\nexport async function getTierDistribution(): Promise<TierDistribution[]> {\n  try {\n    // TODO: In production, query blockchain or API for actual minted counts\n    // For now, use simulated data that will be dynamically updated\n\n    // Get total minted from contract (totalSupply)\n    const totalMinted = await getTotalSupply(CONTRACTS.KEKTECH)\n\n    // Distribute minted NFTs across tiers based on rarity weights\n    // This is a simplified calculation - actual implementation would\n    // query metadata or trait data from blockchain\n    const distribution: TierDistribution[] = [\n      {\n        tier: 'Mythic',\n        minted: Math.floor(totalMinted * (13 / 4200)),\n        total: 13,\n        color: '#ff00ff'\n      },\n      {\n        tier: 'Legendary',\n        minted: Math.floor(totalMinted * (42 / 4200)),\n        total: 42,\n        color: '#ffd700'\n      },\n      {\n        tier: 'Epic',\n        minted: Math.floor(totalMinted * (195 / 4200)),\n        total: 195,\n        color: '#9d4edd'\n      },\n      {\n        tier: 'Rare',\n        minted: Math.floor(totalMinted * (670 / 4200)),\n        total: 670,\n        color: '#3fb8bd'\n      },\n      {\n        tier: 'Common',\n        minted: Math.floor(totalMinted * (3280 / 4200)),\n        total: 3280,\n        color: '#6c757d'\n      }\n    ]\n\n    return distribution\n  } catch (error) {\n    console.error('Error fetching tier distribution:', error)\n    // Return empty tiers on error\n    return [\n      { tier: 'Mythic', minted: 0, total: 13, color: '#ff00ff' },\n      { tier: 'Legendary', minted: 0, total: 42, color: '#ffd700' },\n      { tier: 'Epic', minted: 0, total: 195, color: '#9d4edd' },\n      { tier: 'Rare', minted: 0, total: 670, color: '#3fb8bd' },\n      { tier: 'Common', minted: 0, total: 3280, color: '#6c757d' }\n    ]\n  }\n}\n\n/**\n * Get total supply of NFTs from contract\n */\nexport async function getTotalSupply(contractAddress: string): Promise<number> {\n  try {\n    // Use eth_call to query totalSupply - works without wallet connection\n    const data = encodeFunctionData('totalSupply()', [])\n\n    // Create provider directly - no wallet needed for read operations\n    const rpcUrl = BASED_CHAIN_CONFIG.rpcUrl\n\n    const response = await fetch(rpcUrl, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        jsonrpc: '2.0',\n        id: 1,\n        method: 'eth_call',\n        params: [\n          {\n            to: contractAddress,\n            data: data\n          },\n          'latest'\n        ]\n      })\n    })\n\n    const json = await response.json()\n\n    if (json.result) {\n      // Decode result (it's a uint256)\n      return parseInt(json.result as string, 16)\n    }\n\n    // Fallback to 0 if no result\n    return 0\n  } catch (error) {\n    console.error('Error fetching total supply:', error)\n    return 0 // Return 0 on error to show accurate data\n  }\n}\n\n// Type declaration for ethereum provider is handled globally"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2547, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/components/web3/mint/EnhancedMintForm.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useConnect } from 'wagmi'\nimport { useMint } from '@/lib/hooks/useMint'\nimport { useMintedNFTs } from '@/lib/hooks/useMintedNFTs'\nimport { EXPLORER_URL } from '@/config/constants'\nimport { getTotalSupply, CONTRACTS } from '@/lib/blockchain/kektv'\nimport Image from 'next/image'\n\n/**\n * EnhancedMintForm Component with Advanced Animations\n *\n * Features:\n * - Animated progress bars\n * - Confetti on success\n * - Glowing effects\n * - Step-by-step progress\n * - Smooth transitions\n */\nexport function EnhancedMintForm() {\n  const {\n    mintAmount,\n    setMintAmount,\n    isConnected,\n    isWritePending,\n    isConfirming,\n    isConfirmed,\n    hash,\n    error,\n    mint,\n    maxMintPerTx,\n  } = useMint()\n\n  // Wallet connection\n  const { connectors, connect } = useConnect()\n\n  // Fetch minted NFTs after successful mint\n  const { mintedNFTs, isLoading: isLoadingNFTs, error: nftError } = useMintedNFTs(hash, isConfirmed)\n\n  const [localError, setLocalError] = useState<string | null>(null)\n  const [progress, setProgress] = useState(0)\n  const [showConfetti, setShowConfetti] = useState(false)\n  const [totalMinted, setTotalMinted] = useState<number>(0)\n\n  // Animate progress bar\n  useEffect(() => {\n    if (isWritePending) setProgress(33)\n    else if (isConfirming) setProgress(66)\n    else if (isConfirmed) setProgress(100)\n    else setProgress(0)\n  }, [isWritePending, isConfirming, isConfirmed])\n\n  // Show confetti on success\n  useEffect(() => {\n    if (isConfirmed) {\n      setShowConfetti(true)\n      setTimeout(() => setShowConfetti(false), 5000)\n    }\n  }, [isConfirmed])\n\n  // Fetch total minted from blockchain\n  useEffect(() => {\n    const fetchTotalMinted = async () => {\n      try {\n        const total = await getTotalSupply(CONTRACTS.KEKTECH)\n        setTotalMinted(total)\n      } catch (error) {\n        console.error('Error fetching total supply:', error)\n      }\n    }\n\n    fetchTotalMinted()\n    // Refresh every 30 seconds\n    const interval = setInterval(fetchTotalMinted, 30000)\n    return () => clearInterval(interval)\n  }, [])\n\n  const handleMint = async () => {\n    setLocalError(null)\n    try {\n      await mint()\n    } catch (err) {\n      setLocalError(err instanceof Error ? err.message : 'Mint failed')\n    }\n  }\n\n  const handleAmountChange = (value: number) => {\n    if (value >= 1 && value <= maxMintPerTx) {\n      setMintAmount(value)\n      setLocalError(null)\n    }\n  }\n\n  // Handle wallet connection\n  const handleConnectWallet = async () => {\n    try {\n      // Prioritize MetaMask/injected wallet\n      const connector = connectors.find(c =>\n        c.id === 'injected' ||\n        c.id === 'metaMask' ||\n        (c.name && c.name.toLowerCase().includes('metamask'))\n      ) || connectors[0]\n\n      if (connector) {\n        await connect({ connector })\n      }\n    } catch (error) {\n      console.error('Connection error:', error)\n    }\n  }\n\n  // Don't block UI when wallet is not connected - show preview instead\n\n  // Success state with confetti\n  if (isConfirmed && hash) {\n    return (\n      <div className=\"relative overflow-hidden rounded-2xl border-2 border-kek-green bg-gradient-to-br from-gray-900 to-gray-800 p-10 text-center shadow-2xl shadow-kek-green/50\">\n        {/* Confetti Effect */}\n        {showConfetti && (\n          <div className=\"absolute inset-0 overflow-hidden\">\n            {[...Array(50)].map((_, i) => (\n              <div\n                key={i}\n                className=\"absolute h-3 w-3 animate-float\"\n                style={{\n                  left: `${Math.random() * 100}%`,\n                  top: `-10%`,\n                  backgroundColor: ['#00ff00', '#00ffff', '#ff00ff'][Math.floor(Math.random() * 3)],\n                  transform: `rotate(${Math.random() * 360}deg)`,\n                  animation: `float ${2 + Math.random()}s ease-out forwards`,\n                  animationDelay: `${Math.random() * 0.5}s`,\n                }}\n              />\n            ))}\n          </div>\n        )}\n\n        <div className=\"relative\">\n          <h3 className=\"mb-3 bg-gradient-to-r from-kek-green via-kek-cyan to-kek-purple bg-clip-text text-3xl font-black text-transparent\">\n            Mint Successful!\n          </h3>\n          <p className=\"mb-6 text-xl text-gray-300\">\n            Successfully minted <span className=\"font-bold text-kek-green\">{mintAmount}</span> KEKTECH NFT{mintAmount > 1 ? 's' : ''}!\n          </p>\n\n          {/* Minted NFTs Display */}\n          {isLoadingNFTs ? (\n            <div className=\"mb-6\">\n              <div className=\"mb-3 text-sm text-gray-400\">Loading your NFTs...</div>\n              <div className={`grid gap-4 ${mintAmount === 1 ? 'grid-cols-1 max-w-xs mx-auto' : mintAmount === 2 ? 'grid-cols-2' : 'grid-cols-1 sm:grid-cols-2 md:grid-cols-3'}`}>\n                {[...Array(Math.min(mintAmount, 3))].map((_, i) => (\n                  <div key={i} className=\"animate-pulse\">\n                    <div className=\"aspect-square rounded-xl bg-gray-700/50 border-2 border-kek-cyan/30\" />\n                    <div className=\"mt-2 h-4 rounded bg-gray-700/50\" />\n                  </div>\n                ))}\n              </div>\n            </div>\n          ) : mintedNFTs.length > 0 ? (\n            <div className=\"mb-6\">\n              <div className=\"mb-4 text-sm font-semibold text-kek-cyan\">Your Minted NFTs:</div>\n              <div className={`grid gap-4 ${mintedNFTs.length === 1 ? 'grid-cols-1 max-w-xs mx-auto' : mintedNFTs.length === 2 ? 'grid-cols-2' : 'grid-cols-1 sm:grid-cols-2 md:grid-cols-3'}`}>\n                {mintedNFTs.map((nft) => (\n                  <div key={nft.tokenId} className=\"group relative\">\n                    <div className=\"relative aspect-square overflow-hidden rounded-xl border-2 border-kek-cyan/50 shadow-lg shadow-kek-cyan/20 transition-all hover:border-kek-green hover:shadow-kek-green/40 hover:scale-105\">\n                      {nft.imageUrl ? (\n                        <Image\n                          src={nft.imageUrl}\n                          alt={nft.name}\n                          width={300}\n                          height={300}\n                          className=\"w-full h-full object-cover\"\n                          unoptimized\n                        />\n                      ) : (\n                        <div className=\"w-full h-full bg-gradient-to-br from-kek-green/20 to-kek-purple/20 flex items-center justify-center\">\n                          <span className=\"text-4xl\">üé®</span>\n                        </div>\n                      )}\n                    </div>\n                    <div className=\"mt-2 text-sm font-semibold text-white\">{nft.name}</div>\n                    {nft.rank && (\n                      <div className=\"text-xs text-kek-cyan\">Rank #{nft.rank}</div>\n                    )}\n                    {nft.rarityScore && (\n                      <div className=\"text-xs text-gray-400\">Rarity: {nft.rarityScore.toFixed(2)}</div>\n                    )}\n                  </div>\n                ))}\n              </div>\n              {mintAmount > 3 && (\n                <div className=\"mt-3 text-xs text-gray-400\">\n                  + {mintAmount - 3} more NFT{mintAmount - 3 > 1 ? 's' : ''} minted\n                </div>\n              )}\n            </div>\n          ) : nftError ? (\n            <div className=\"mb-6 rounded-xl border border-red-500/30 bg-red-500/10 p-4\">\n              <div className=\"text-sm text-red-400\">\n                ‚ö†Ô∏è {nftError}\n              </div>\n              <div className=\"mt-2 text-xs text-gray-400\">\n                Your NFTs were minted successfully. Check your wallet or the marketplace.\n              </div>\n            </div>\n          ) : null}\n\n          <div className=\"mb-6 rounded-xl border border-kek-green/20 bg-black/40 p-4 backdrop-blur-sm\">\n            <div className=\"text-sm text-gray-400\">Transaction Hash</div>\n            <div className=\"mt-1 truncate font-mono text-xs text-kek-cyan\">{hash}</div>\n          </div>\n\n          <div className=\"flex flex-col gap-3 sm:flex-row sm:justify-center\">\n            <a\n              href={`${EXPLORER_URL}/tx/${hash}`}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"rounded-lg bg-gradient-to-r from-kek-green to-kek-cyan px-6 py-3 font-semibold text-black shadow-lg shadow-kek-green/50 transition-all hover:scale-105 hover:shadow-2xl hover:shadow-kek-green/70\"\n            >\n              View Transaction ‚Üó\n            </a>\n            <button\n              onClick={() => window.location.reload()}\n              className=\"rounded-lg bg-purple-500 px-6 py-3 font-semibold text-white shadow-lg shadow-purple-500/20 transition-all hover:bg-purple-600 hover:scale-105\"\n            >\n              Mint More\n            </button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"relative overflow-hidden rounded-2xl border-2 border-kek-green/30 bg-gradient-to-br from-gray-900 to-gray-800 p-8 shadow-2xl\">\n      {/* Background Pattern */}\n      <div className=\"absolute inset-0 bg-[linear-gradient(to_right,rgba(0,255,0,0.03)_1px,transparent_1px),linear-gradient(to_bottom,rgba(0,255,0,0.03)_1px,transparent_1px)] bg-[size:20px_20px]\" />\n\n      <div className=\"relative\">\n        {/* Progress Steps */}\n        {(isWritePending || isConfirming || isConfirmed) && (\n          <div className=\"mb-8\">\n            <div className=\"mb-3 flex justify-between text-sm\">\n              <span className={progress >= 33 ? 'text-kek-green' : 'text-gray-500'}>\n                1. Approve\n              </span>\n              <span className={progress >= 66 ? 'text-kek-cyan' : 'text-gray-500'}>\n                2. Confirming\n              </span>\n              <span className={progress >= 100 ? 'text-kek-purple' : 'text-gray-500'}>\n                3. Complete\n              </span>\n            </div>\n\n            {/* Progress Bar */}\n            <div className=\"relative h-3 overflow-hidden rounded-full bg-gray-700\">\n              <div\n                className=\"h-full bg-gradient-to-r from-kek-green via-kek-cyan to-kek-purple transition-all duration-500 ease-out\"\n                style={{ width: `${progress}%` }}\n              >\n                <div className=\"h-full w-full animate-pulse bg-white/20\" />\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Main Mint Layout - Image left, Amount selector right */}\n        <div className=\"mb-6 grid grid-cols-1 md:grid-cols-2 gap-6\">\n          {/* Left: NFT Preview Image */}\n          <div className=\"flex items-center justify-center\">\n            <div className=\"relative w-full max-w-xs aspect-square rounded-xl overflow-hidden border-2 border-kek-green/50 shadow-lg shadow-kek-green/20\">\n              <Image\n                src=\"/images/686.png\"\n                alt=\"ùïÇ∆éùïÇ‰∏Ö·µâÂåöüÖ∑ NFT\"\n                width={400}\n                height={400}\n                className=\"w-full h-full object-cover\"\n              />\n            </div>\n          </div>\n\n          {/* Right: Amount Selector */}\n          <div className=\"flex flex-col items-center justify-center\">\n            <label className=\"mb-4 block text-sm font-semibold text-gray-300 text-center\">\n              Amount (Max {maxMintPerTx})\n            </label>\n            <div className=\"flex items-center gap-4\">\n              <button\n                onClick={() => handleAmountChange(mintAmount - 1)}\n                disabled={mintAmount <= 1 || isWritePending || isConfirming}\n                className=\"flex h-14 w-14 items-center justify-center rounded-lg border-2 border-kek-green/30 bg-kek-green/10 text-3xl font-bold text-kek-green transition-all hover:border-kek-green hover:bg-kek-green/20 hover:scale-110 disabled:cursor-not-allowed disabled:opacity-30\"\n              >\n                ‚àí\n              </button>\n              <div className=\"flex h-20 w-28 items-center justify-center rounded-lg border-2 border-kek-cyan/50 bg-black/40\">\n                <span className=\"text-5xl font-black text-kek-cyan\">{mintAmount}</span>\n              </div>\n              <button\n                onClick={() => handleAmountChange(mintAmount + 1)}\n                disabled={mintAmount >= maxMintPerTx || isWritePending || isConfirming}\n                className=\"flex h-14 w-14 items-center justify-center rounded-lg border-2 border-kek-green/30 bg-kek-green/10 text-3xl font-bold text-kek-green transition-all hover:border-kek-green hover:bg-kek-green/20 hover:scale-110 disabled:cursor-not-allowed disabled:opacity-30\"\n              >\n                +\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Price Display */}\n        <div className=\"mb-6 rounded-xl border border-kek-purple/30 bg-black/40 p-5 backdrop-blur-sm\">\n          <div className=\"flex justify-between text-sm text-gray-400\">\n            <span>Price per NFT:</span>\n            <span className=\"font-semibold text-white\">18,369 $BASED</span>\n          </div>\n          <div className=\"mt-3 flex justify-between\">\n            <span className=\"text-lg font-bold text-white\">Total Cost:</span>\n            <span className=\"text-2xl font-black text-kek-green\">\n              {(18369 * mintAmount).toLocaleString()} $BASED\n            </span>\n          </div>\n        </div>\n\n        {/* Error Display */}\n        {(error || localError) && (\n          <div className=\"mb-6 animate-pulse rounded-xl border-2 border-red-500/50 bg-red-500/10 p-4 backdrop-blur-sm\">\n            <p className=\"text-sm font-semibold text-red-400\">\n              ‚ö†Ô∏è {localError || error?.message || 'An error occurred'}\n            </p>\n          </div>\n        )}\n\n        {/* Mint Button - Show \"Connect to Mint\" overlay when not connected */}\n        {!isConnected ? (\n          <div className=\"relative\">\n            <button\n              disabled\n              className=\"w-full overflow-hidden rounded-xl bg-gradient-to-r from-kek-green to-kek-cyan p-[2px] shadow-lg opacity-50\"\n            >\n              <div className=\"rounded-[10px] bg-gray-900 px-8 py-4\">\n                <span className=\"text-lg font-black text-white\">\n                  üöÄ Mint {mintAmount} NFT{mintAmount > 1 ? 's' : ''}\n                </span>\n              </div>\n            </button>\n            <button\n              onClick={handleConnectWallet}\n              className=\"absolute inset-0 flex items-center justify-center bg-gradient-to-br from-purple-900/95 to-pink-900/95 rounded-xl backdrop-blur-sm hover:from-purple-800/95 hover:to-pink-800/95 transition-all cursor-pointer\"\n            >\n              <div className=\"text-white font-bold text-xl\">Connect Wallet to Mint</div>\n            </button>\n          </div>\n        ) : (\n          <button\n            onClick={handleMint}\n            disabled={isWritePending || isConfirming}\n            className=\"group relative w-full overflow-hidden rounded-xl bg-gradient-to-r from-kek-green to-kek-cyan p-[2px] shadow-lg shadow-kek-green/50 transition-all hover:scale-105 hover:shadow-2xl hover:shadow-kek-green/70 disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:scale-100\"\n          >\n            <div className=\"relative rounded-[10px] bg-gray-900 px-8 py-4 transition-all group-hover:bg-transparent\">\n              <span className=\"text-lg font-black text-white group-hover:text-black\">\n                {isWritePending\n                  ? '‚è≥ Waiting for approval...'\n                  : isConfirming\n                    ? '‚ö° Confirming transaction...'\n                    : `üöÄ Mint ${mintAmount} NFT${mintAmount > 1 ? 's' : ''}`}\n              </span>\n            </div>\n          </button>\n        )}\n\n        {/* Transaction Hash */}\n        {hash && !isConfirmed && (\n          <div className=\"mt-4 rounded-xl border border-kek-cyan/30 bg-kek-cyan/10 p-4 backdrop-blur-sm\">\n            <p className=\"mb-2 text-sm font-semibold text-kek-cyan\">\n              ‚úÖ Transaction submitted!\n            </p>\n            <a\n              href={`${EXPLORER_URL}/tx/${hash}`}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"text-sm text-kek-cyan/80 hover:text-kek-cyan hover:underline\"\n            >\n              View on Explorer ‚Üó\n            </a>\n          </div>\n        )}\n\n        {/* Info */}\n        <p className=\"mt-6 text-center text-xs text-gray-500\">\n          Your NFT will be minted on the <span className=\"font-semibold text-kek-green\">$BASED Chain (32323)</span>\n        </p>\n      </div>\n\n      {/* Dynamic Total Supply - Below main widget */}\n      <div className=\"mt-4 text-center\">\n        <div className=\"inline-block px-6 py-3 rounded-xl border border-kek-cyan/30 bg-kek-cyan/10\">\n          <div className=\"text-sm text-gray-400 mb-1\">Total Supply</div>\n          <div className=\"text-2xl font-bold text-kek-cyan\">\n            {totalMinted.toLocaleString()} / 4,200\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3390, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/components/marketplace/MintTab.tsx"],"sourcesContent":["import { EnhancedMintForm } from '@/components/web3/mint/EnhancedMintForm'\n\n/**\n * MintTab Component\n *\n * Mint interface tab for the marketplace page\n */\nexport function MintTab() {\n  return (\n    <div className=\"mx-auto max-w-2xl\">\n      {/* Mint Form */}\n      <EnhancedMintForm />\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AAOO,SAAS;IACd,qBACE,mSAAC;QAAI,WAAU;kBAEb,cAAA,mSAAC,wNAAgB;;;;;;;;;;AAGvB","debugId":null}},
    {"offset": {"line": 3416, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/config/contracts/kektv-marketplace.ts"],"sourcesContent":["/**\n * KEKTV Marketplace Configuration (ERC-1155 Voucher Trading)\n *\n * ‚úÖ V6 DEPLOYED: October 19, 2025\n * Contract: 0x2d79106D60f92F3a6b7B17E3cAd3Df0D4bdcE062\n * Network: BasedAI (Chain ID: 32323)\n * Status: PRODUCTION - V6 with reordered operations (CRITICAL FIX)\n *\n * V6 Changes from V2/V4:\n * - ‚úÖ BREAKTHROUGH FIX: Pay seller BEFORE NFT transfer\n * - ‚úÖ Fixes \"Insufficient balance\" error by avoiding msg.value context loss during ERC1155 callback\n * - ‚úÖ Follows proper Checks-Effects-Interactions pattern\n * - ‚úÖ BasedAI-specific fix for msg.value handling during safeTransferFrom callbacks\n *\n * Features:\n * - ‚úÖ Real-time NFT balance validation before every transaction\n * - ‚úÖ Auto-cancel invalid listings with clear error messages\n * - ‚úÖ Try-catch NFT transfers with automatic rollback\n * - ‚úÖ Comprehensive error handling (SellerInsufficientBalance, MarketplaceNotApproved, etc.)\n * - ‚úÖ Listing validation tracking (createdAt, lastValidated timestamps)\n * - Buy/Sell ERC-1155 vouchers\n * - Listings with quantity support\n * - 2.5% platform fee (deducted from seller)\n * - Correct fee model (buyer pays listing price only)\n * - ERC1155 validation & security hardened\n * - Pausable & secure\n */\n\nexport const KEKTV_MARKETPLACE_ADDRESS = '0x2d79106D60f92F3a6b7B17E3cAd3Df0D4bdcE062' as const\n\n// Voucher contract address\nexport const KEKTV_VOUCHERS_ADDRESS = '0x7FEF981beE047227f848891c6C9F9dad11767a48' as const\n\n// V6 Marketplace ABI (Simplified)\nexport const KEKTV_MARKETPLACE_ABI = [\n  // Constructor\n  {\n    inputs: [\n      { internalType: 'address', name: '_voucherContract', type: 'address' },\n      { internalType: 'address', name: '_feeRecipient', type: 'address' },\n    ],\n    stateMutability: 'nonpayable',\n    type: 'constructor',\n  },\n\n  // View Functions\n  {\n    inputs: [],\n    name: 'voucherContract',\n    outputs: [{ internalType: 'contract IERC1155', name: '', type: 'address' }],\n    stateMutability: 'view',\n    type: 'function',\n  },\n  {\n    inputs: [],\n    name: 'FEE_PERCENTAGE',\n    outputs: [{ internalType: 'uint256', name: '', type: 'uint256' }],\n    stateMutability: 'view',\n    type: 'function',\n  },\n  {\n    inputs: [\n      { internalType: 'address', name: '', type: 'address' },\n      { internalType: 'uint256', name: '', type: 'uint256' },\n    ],\n    name: 'listings',\n    outputs: [\n      { internalType: 'uint256', name: 'amount', type: 'uint256' },\n      { internalType: 'uint256', name: 'pricePerItem', type: 'uint256' },\n      { internalType: 'bool', name: 'active', type: 'bool' },\n    ],\n    stateMutability: 'view',\n    type: 'function',\n  },\n  {\n    inputs: [],\n    name: 'feeRecipient',\n    outputs: [{ internalType: 'address', name: '', type: 'address' }],\n    stateMutability: 'view',\n    type: 'function',\n  },\n  {\n    inputs: [],\n    name: 'paused',\n    outputs: [{ internalType: 'bool', name: '', type: 'bool' }],\n    stateMutability: 'view',\n    type: 'function',\n  },\n  {\n    inputs: [],\n    name: 'owner',\n    outputs: [{ internalType: 'address', name: '', type: 'address' }],\n    stateMutability: 'view',\n    type: 'function',\n  },\n\n  // Write Functions\n  {\n    inputs: [\n      { internalType: 'uint256', name: 'tokenId', type: 'uint256' },\n      { internalType: 'uint256', name: 'amount', type: 'uint256' },\n      { internalType: 'uint256', name: 'pricePerItem', type: 'uint256' },\n    ],\n    name: 'listVoucher',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function',\n  },\n  {\n    inputs: [\n      { internalType: 'address', name: 'seller', type: 'address' },\n      { internalType: 'uint256', name: 'tokenId', type: 'uint256' },\n      { internalType: 'uint256', name: 'amount', type: 'uint256' },\n    ],\n    name: 'buyVoucher',\n    outputs: [],\n    stateMutability: 'payable',\n    type: 'function',\n  },\n  {\n    inputs: [{ internalType: 'uint256', name: 'tokenId', type: 'uint256' }],\n    name: 'cancelListing',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function',\n  },\n  {\n    inputs: [{ internalType: 'address', name: '_newFeeRecipient', type: 'address' }],\n    name: 'updateFeeRecipient',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function',\n  },\n  {\n    inputs: [],\n    name: 'pause',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function',\n  },\n  {\n    inputs: [],\n    name: 'unpause',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function',\n  },\n  {\n    inputs: [],\n    name: 'emergencyWithdraw',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function',\n  },\n\n  // Events\n  {\n    anonymous: false,\n    inputs: [\n      { indexed: true, internalType: 'address', name: 'seller', type: 'address' },\n      { indexed: true, internalType: 'uint256', name: 'tokenId', type: 'uint256' },\n      { indexed: false, internalType: 'uint256', name: 'amount', type: 'uint256' },\n      { indexed: false, internalType: 'uint256', name: 'pricePerItem', type: 'uint256' },\n    ],\n    name: 'VoucherListed',\n    type: 'event',\n  },\n  {\n    anonymous: false,\n    inputs: [\n      { indexed: true, internalType: 'address', name: 'seller', type: 'address' },\n      { indexed: true, internalType: 'address', name: 'buyer', type: 'address' },\n      { indexed: true, internalType: 'uint256', name: 'tokenId', type: 'uint256' },\n      { indexed: false, internalType: 'uint256', name: 'amount', type: 'uint256' },\n      { indexed: false, internalType: 'uint256', name: 'totalPrice', type: 'uint256' },\n    ],\n    name: 'VoucherSold',\n    type: 'event',\n  },\n  {\n    anonymous: false,\n    inputs: [\n      { indexed: true, internalType: 'address', name: 'seller', type: 'address' },\n      { indexed: true, internalType: 'uint256', name: 'tokenId', type: 'uint256' },\n    ],\n    name: 'ListingCancelled',\n    type: 'event',\n  },\n] as const\n\nexport const KEKTV_MARKETPLACE_CONFIG = {\n  address: KEKTV_MARKETPLACE_ADDRESS,\n  abi: KEKTV_MARKETPLACE_ABI,\n\n  // Contract features\n  platformFee: 250n, // 2.5% (250 basis points)\n  vouchersAddress: KEKTV_VOUCHERS_ADDRESS,\n\n  // Feature flags (query from contract in production)\n  enabled: true,\n  listingsEnabled: true,\n  offersEnabled: false, // Can be enabled by owner\n  paused: false,\n\n  // Network info\n  chainId: 32323,\n  network: 'BasedAI',\n  blockExplorer: 'https://explorer.bf1337.org',\n\n  // Deployment info\n  deployedAt: 2439532,\n  deployedDate: '2025-10-17',\n  txHash: '0xd892c6297e2e6423eb171d63d3133d994bbdae9dfdc14a4a0b50c80006592e69',\n} as const\n\nexport type KektvMarketplaceConfig = typeof KEKTV_MARKETPLACE_CONFIG\n\n// Voucher types\nexport const VOUCHER_TYPES = [\n  { id: 0, name: 'Genesis', description: 'Genesis tier voucher' },\n  { id: 1, name: 'Silver', description: 'Silver tier voucher' },\n  { id: 2, name: 'Gold', description: 'Gold tier voucher' },\n  { id: 3, name: 'Platinum', description: 'Platinum tier voucher' },\n] as const\n\n// Helper function to calculate total price with fee\nexport function calculateTotalPrice(pricePerItem: bigint, amount: bigint, platformFee: bigint = 250n): bigint {\n  const subtotal = pricePerItem * amount\n  const fee = (subtotal * platformFee) / 10000n\n  return subtotal + fee\n}\n\n// Helper function to calculate fee only\nexport function calculateFee(price: bigint, platformFee: bigint = 250n): bigint {\n  return (price * platformFee) / 10000n\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3815, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/lib/hooks/useKektvMarketplace.ts"],"sourcesContent":["import {\n  useAccount,\n  useWriteContract,\n  useWaitForTransactionReceipt,\n  useSwitchChain,\n} from 'wagmi'\nimport { KEKTV_MARKETPLACE_ADDRESS, KEKTV_MARKETPLACE_ABI } from '@/config/contracts/kektv-marketplace'\nimport { basedChain } from '@/config/chains'\n\n/**\n * Hook for KEKTV Marketplace operations (ERC-1155 vouchers)\n *\n * Handles:\n * - Listing vouchers for sale (with quantity)\n * - Buying vouchers from listings\n * - Cancelling listings\n * - Auto network switching to BasedAI\n */\nexport function useKektvMarketplace() {\n  const { address, chainId } = useAccount()\n  const { switchChainAsync } = useSwitchChain()\n  const { writeContractAsync, data: hash, isPending, error } = useWriteContract()\n\n  const { isLoading: isConfirming, isSuccess } = useWaitForTransactionReceipt({\n    hash,\n  })\n\n  /**\n   * List KEKTV vouchers for sale\n   * @param tokenId - Voucher type ID (0-3: Genesis, Silver, Gold, Platinum)\n   * @param amount - Number of vouchers to list\n   * @param pricePerItemString - Price per voucher in BASED (e.g., \"1000\")\n   */\n  const listVoucher = async (\n    tokenId: bigint,\n    amount: bigint,\n    pricePerItemString: string\n  ) => {\n    if (!address) throw new Error('Wallet not connected')\n\n    try {\n      // Auto-switch to BasedAI Chain if on wrong network\n      if (chainId !== basedChain.id) {\n        await switchChainAsync({ chainId: basedChain.id })\n      }\n\n      // Convert price string to wei (1 BASED = 10^18 wei)\n      const pricePerItem = BigInt(pricePerItemString) * BigInt(10 ** 18)\n\n      // List the voucher\n      const hash = await writeContractAsync({\n        address: KEKTV_MARKETPLACE_ADDRESS,\n        abi: KEKTV_MARKETPLACE_ABI,\n        functionName: 'listVoucher',\n        args: [tokenId, amount, pricePerItem],\n        gas: 500000n, // Fixed gas limit to avoid RPC estimation issues\n      })\n\n      return hash\n    } catch (error) {\n      throw error\n    }\n  }\n\n  /**\n   * Buy KEKTV vouchers from a listing\n   * @param seller - Address of the seller\n   * @param tokenId - Voucher type ID\n   * @param amount - Number of vouchers to buy\n   * @param totalPrice - Total price in wei (pricePerItem √ó amount, WITHOUT fee)\n   */\n  const buyVoucher = async (\n    seller: `0x${string}`,\n    tokenId: bigint,\n    amount: bigint,\n    totalPrice: bigint\n  ) => {\n    if (!address) throw new Error('Wallet not connected')\n\n    try {\n      // Auto-switch to BasedAI Chain if on wrong network\n      if (chainId !== basedChain.id) {\n        await switchChainAsync({ chainId: basedChain.id })\n      }\n\n      // üîß IMPORTANT: Buyer pays ONLY the listing price!\n      // Contract deducts 2.5% fee FROM THE SELLER's proceeds\n      // Example: 1000 BASED listing\n      //   - Buyer pays: 1000 BASED\n      //   - Seller receives: 975 BASED (1000 - 2.5%)\n      //   - Platform receives: 25 BASED (2.5% fee)\n      const platformFee = (totalPrice * 250n) / 10000n // 2.5%\n      const sellerReceives = totalPrice - platformFee\n\n      console.log('üí∞ Buy Calculation:', {\n        buyerPays: (totalPrice / BigInt(10 ** 18)).toString() + ' BASED',\n        sellerReceives: (sellerReceives / BigInt(10 ** 18)).toString() + ' BASED',\n        platformFee: (platformFee / BigInt(10 ** 18)).toString() + ' BASED',\n      })\n\n      // Buy the voucher - buyer pays ONLY listing price\n      // Fee is deducted from seller's proceeds by the contract\n      const hash = await writeContractAsync({\n        address: KEKTV_MARKETPLACE_ADDRESS,\n        abi: KEKTV_MARKETPLACE_ABI,\n        functionName: 'buyVoucher',\n        args: [seller, tokenId, amount],\n        value: totalPrice, // ‚úÖ Buyer pays ONLY listing price (fee deducted from seller!)\n        gas: 500000n, // Increased gas limit to handle complex operations\n      })\n\n      return hash\n    } catch (error) {\n      throw error\n    }\n  }\n\n  /**\n   * Cancel a voucher listing\n   * @param tokenId - Voucher type ID to cancel\n   */\n  const cancelListing = async (tokenId: bigint) => {\n    if (!address) throw new Error('Wallet not connected')\n\n    try {\n      // Auto-switch to BasedAI Chain if on wrong network\n      if (chainId !== basedChain.id) {\n        await switchChainAsync({ chainId: basedChain.id })\n      }\n\n      // Cancel the listing\n      const hash = await writeContractAsync({\n        address: KEKTV_MARKETPLACE_ADDRESS,\n        abi: KEKTV_MARKETPLACE_ABI,\n        functionName: 'cancelListing',\n        args: [tokenId],\n        gas: 200000n, // Fixed gas limit for cancel transactions\n      })\n\n      return hash\n    } catch (error) {\n      throw error\n    }\n  }\n\n  return {\n    listVoucher,\n    buyVoucher,\n    cancelListing,\n    isPending,\n    isConfirming,\n    isSuccess,\n    error,\n    hash,\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;;;;AAWO,SAAS;IACd,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,IAAA,8NAAU;IACvC,MAAM,EAAE,gBAAgB,EAAE,GAAG,IAAA,sOAAc;IAC3C,MAAM,EAAE,kBAAkB,EAAE,MAAM,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,IAAA,0OAAgB;IAE7E,MAAM,EAAE,WAAW,YAAY,EAAE,SAAS,EAAE,GAAG,IAAA,kQAA4B,EAAC;QAC1E;IACF;IAEA;;;;;GAKC,GACD,MAAM,cAAc,OAClB,SACA,QACA;QAEA,IAAI,CAAC,SAAS,MAAM,IAAI,MAAM;QAE9B,IAAI;YACF,mDAAmD;YACnD,IAAI,YAAY,mLAAU,CAAC,EAAE,EAAE;gBAC7B,MAAM,iBAAiB;oBAAE,SAAS,mLAAU,CAAC,EAAE;gBAAC;YAClD;YAEA,oDAAoD;YACpD,MAAM,eAAe,OAAO,sBAAsB,OAAO,MAAM;YAE/D,mBAAmB;YACnB,MAAM,OAAO,MAAM,mBAAmB;gBACpC,SAAS,6NAAyB;gBAClC,KAAK,yNAAqB;gBAC1B,cAAc;gBACd,MAAM;oBAAC;oBAAS;oBAAQ;iBAAa;gBACrC,KAAK,OAAO;YACd;YAEA,OAAO;QACT,EAAE,OAAO,OAAO;YACd,MAAM;QACR;IACF;IAEA;;;;;;GAMC,GACD,MAAM,aAAa,OACjB,QACA,SACA,QACA;QAEA,IAAI,CAAC,SAAS,MAAM,IAAI,MAAM;QAE9B,IAAI;YACF,mDAAmD;YACnD,IAAI,YAAY,mLAAU,CAAC,EAAE,EAAE;gBAC7B,MAAM,iBAAiB;oBAAE,SAAS,mLAAU,CAAC,EAAE;gBAAC;YAClD;YAEA,mDAAmD;YACnD,uDAAuD;YACvD,8BAA8B;YAC9B,6BAA6B;YAC7B,+CAA+C;YAC/C,6CAA6C;YAC7C,MAAM,cAAc,AAAC,aAAa,IAAI,GAAI,MAAM,CAAC,OAAO;;YACxD,MAAM,iBAAiB,aAAa;YAEpC,QAAQ,GAAG,CAAC,uBAAuB;gBACjC,WAAW,CAAC,aAAa,OAAO,MAAM,GAAG,EAAE,QAAQ,KAAK;gBACxD,gBAAgB,CAAC,iBAAiB,OAAO,MAAM,GAAG,EAAE,QAAQ,KAAK;gBACjE,aAAa,CAAC,cAAc,OAAO,MAAM,GAAG,EAAE,QAAQ,KAAK;YAC7D;YAEA,kDAAkD;YAClD,yDAAyD;YACzD,MAAM,OAAO,MAAM,mBAAmB;gBACpC,SAAS,6NAAyB;gBAClC,KAAK,yNAAqB;gBAC1B,cAAc;gBACd,MAAM;oBAAC;oBAAQ;oBAAS;iBAAO;gBAC/B,OAAO;gBACP,KAAK,OAAO;YACd;YAEA,OAAO;QACT,EAAE,OAAO,OAAO;YACd,MAAM;QACR;IACF;IAEA;;;GAGC,GACD,MAAM,gBAAgB,OAAO;QAC3B,IAAI,CAAC,SAAS,MAAM,IAAI,MAAM;QAE9B,IAAI;YACF,mDAAmD;YACnD,IAAI,YAAY,mLAAU,CAAC,EAAE,EAAE;gBAC7B,MAAM,iBAAiB;oBAAE,SAAS,mLAAU,CAAC,EAAE;gBAAC;YAClD;YAEA,qBAAqB;YACrB,MAAM,OAAO,MAAM,mBAAmB;gBACpC,SAAS,6NAAyB;gBAClC,KAAK,yNAAqB;gBAC1B,cAAc;gBACd,MAAM;oBAAC;iBAAQ;gBACf,KAAK,OAAO;YACd;YAEA,OAAO;QACT,EAAE,OAAO,OAAO;YACd,MAAM;QACR;IACF;IAEA,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 3958, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/lib/hooks/useMarketplaceListingsAPI.ts"],"sourcesContent":["import { useState, useEffect } from 'react'\n\nexport type VoucherListing = {\n  seller: `0x${string}`\n  tokenId: number\n  voucherName: string\n  voucherIcon: string\n  rarity: string\n  amount: bigint\n  pricePerItem: bigint\n  totalPrice: bigint\n  blockNumber: bigint\n  transactionHash: string\n}\n\n/**\n * Hook to fetch marketplace listings from API\n *\n * This replaces the old KNOWN_SELLERS approach by fetching from our API\n * which scans blockchain events automatically.\n *\n * Benefits:\n * - Finds ALL sellers automatically (no manual list)\n * - Fast (cached for 30s)\n * - Only 1 API call instead of 400 RPC calls\n *\n * Modes:\n * - If sellerAddress provided: Filters to show only that seller's listings\n * - If no sellerAddress: Shows ALL listings\n */\nexport function useMarketplaceListingsAPI(sellerAddress?: `0x${string}`) {\n  const [listings, setListings] = useState<VoucherListing[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  useEffect(() => {\n    const fetchListings = async () => {\n      try {\n        setIsLoading(true)\n        setError(null)\n\n        // Fetch from API\n        const response = await fetch('/api/marketplace/listings', {\n          // Revalidate every 30 seconds\n          next: { revalidate: 30 }\n        })\n\n        if (!response.ok) {\n          throw new Error(`Failed to fetch listings: ${response.statusText}`)\n        }\n\n        const data = await response.json()\n\n        // Convert BigInt strings back to BigInt\n        const parsedListings: VoucherListing[] = data.map((listing: {\n          seller: string\n          tokenId: number\n          voucherName: string\n          voucherIcon: string\n          rarity: string\n          amount: string\n          pricePerItem: string\n          totalPrice: string\n          blockNumber: string\n          transactionHash: string\n        }) => ({\n          ...listing,\n          amount: BigInt(listing.amount),\n          pricePerItem: BigInt(listing.pricePerItem),\n          totalPrice: BigInt(listing.totalPrice),\n          blockNumber: BigInt(listing.blockNumber),\n        }))\n\n        // Filter by seller if provided (for \"Your Listings\")\n        const filteredListings = sellerAddress\n          ? parsedListings.filter(l => l.seller.toLowerCase() === sellerAddress.toLowerCase())\n          : parsedListings\n\n        setListings(filteredListings)\n        setIsLoading(false)\n      } catch (err) {\n        console.error('Failed to fetch marketplace listings:', err)\n        setError(err instanceof Error ? err.message : 'Unknown error')\n        setIsLoading(false)\n      }\n    }\n\n    fetchListings()\n\n    // Refresh every 30 seconds\n    const interval = setInterval(fetchListings, 30000)\n\n    return () => clearInterval(interval)\n  }, [sellerAddress])\n\n  return {\n    listings,\n    isLoading,\n    error,\n    refetch: () => {\n      setIsLoading(true)\n    },\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AA8BO,SAAS,0BAA0B,aAA6B;IACrE,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,sQAAQ,EAAmB,EAAE;IAC7D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,sQAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,sQAAQ,EAAgB;IAElD,IAAA,uQAAS,EAAC;QACR,MAAM,gBAAgB;YACpB,IAAI;gBACF,aAAa;gBACb,SAAS;gBAET,iBAAiB;gBACjB,MAAM,WAAW,MAAM,MAAM,6BAA6B;oBACxD,8BAA8B;oBAC9B,MAAM;wBAAE,YAAY;oBAAG;gBACzB;gBAEA,IAAI,CAAC,SAAS,EAAE,EAAE;oBAChB,MAAM,IAAI,MAAM,CAAC,0BAA0B,EAAE,SAAS,UAAU,EAAE;gBACpE;gBAEA,MAAM,OAAO,MAAM,SAAS,IAAI;gBAEhC,wCAAwC;gBACxC,MAAM,iBAAmC,KAAK,GAAG,CAAC,CAAC,UAW7C,CAAC;wBACL,GAAG,OAAO;wBACV,QAAQ,OAAO,QAAQ,MAAM;wBAC7B,cAAc,OAAO,QAAQ,YAAY;wBACzC,YAAY,OAAO,QAAQ,UAAU;wBACrC,aAAa,OAAO,QAAQ,WAAW;oBACzC,CAAC;gBAED,qDAAqD;gBACrD,MAAM,mBAAmB,gBACrB,eAAe,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,CAAC,WAAW,OAAO,cAAc,WAAW,MAC/E;gBAEJ,YAAY;gBACZ,aAAa;YACf,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,yCAAyC;gBACvD,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;gBAC9C,aAAa;YACf;QACF;QAEA;QAEA,2BAA2B;QAC3B,MAAM,WAAW,YAAY,eAAe;QAE5C,OAAO,IAAM,cAAc;IAC7B,GAAG;QAAC;KAAc;IAElB,OAAO;QACL;QACA;QACA;QACA,SAAS;YACP,aAAa;QACf;IACF;AACF","debugId":null}},
    {"offset": {"line": 4022, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/lib/hooks/useKektvListings.ts"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { useAccount, usePublicClient, useReadContract } from 'wagmi'\nimport { KEKTV_MARKETPLACE_ADDRESS, KEKTV_MARKETPLACE_ABI } from '@/config/contracts/kektv-marketplace'\nimport { KEKTECH_VOUCHERS, VOUCHER_TYPES } from '@/config/contracts/kektech-vouchers'\n\nexport type VoucherListing = {\n  seller: `0x${string}`\n  tokenId: number\n  voucherName: string\n  voucherIcon: string\n  rarity: string\n  amount: bigint\n  pricePerItem: bigint\n  totalPrice: bigint\n  active: boolean\n}\n\n// Known sellers list (temporary solution - will be replaced with event indexing)\nconst KNOWN_SELLERS: `0x${string}`[] = [\n  '0xD90e78886b165d0a5497409528042Fc22bB33d2E', // Creator wallet\n  // Add more seller addresses as they list items\n]\n\n/**\n * Hook to fetch KEKTV voucher marketplace listings\n *\n * Mode 1: Single Seller (when sellerAddress provided) - for \"Your Listings\"\n * Mode 2: All Sellers (when no sellerAddress) - for \"Browse & Buy\"\n *\n * Note: ERC-1155 marketplaces require seller address + tokenId for lookups\n * This temporary solution checks known sellers. Future: event indexing or backend API\n */\nexport function useKektvListings(sellerAddress?: `0x${string}`) {\n  const publicClient = usePublicClient()\n  const [listings, setListings] = useState<VoucherListing[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  // If seller address provided, check only that seller (for \"Your Listings\")\n  // If not provided, check ALL known sellers (for \"Browse & Buy\")\n  const targetAddresses = sellerAddress ? [sellerAddress] : KNOWN_SELLERS\n\n  useEffect(() => {\n    const fetchListings = async () => {\n      if (!publicClient || targetAddresses.length === 0) {\n        setListings([])\n        setIsLoading(false)\n        return\n      }\n\n      try {\n        setIsLoading(true)\n        setError(null)\n\n        const activeListings: VoucherListing[] = []\n\n        // Check all target addresses\n        for (const sellerAddr of targetAddresses) {\n          // Check all known voucher types (0-3) for each seller\n          for (const voucher of VOUCHER_TYPES) {\n            try {\n              const listing = await publicClient.readContract({\n                address: KEKTV_MARKETPLACE_ADDRESS,\n                abi: KEKTV_MARKETPLACE_ABI,\n                functionName: 'listings',\n                args: [sellerAddr, BigInt(voucher.id)],\n              })\n\n              if (listing && Array.isArray(listing)) {\n                // listings returns a tuple: [amount, pricePerItem, active]\n                const [amount, pricePerItem, active] = listing as [bigint, bigint, boolean]\n\n                if (active && amount > 0n && pricePerItem > 0n) {\n                  activeListings.push({\n                    seller: sellerAddr,\n                    tokenId: voucher.id,\n                    voucherName: voucher.name,\n                    voucherIcon: voucher.icon,\n                    rarity: voucher.rarity,\n                    amount,\n                    pricePerItem,\n                    totalPrice: amount * pricePerItem,\n                    active: true,\n                  })\n                }\n              }\n            } catch {\n              // Skip vouchers that error (not listed)\n              continue\n            }\n          }\n        }\n\n        setListings(activeListings)\n        setIsLoading(false)\n      } catch {\n        setError('Failed to fetch marketplace listings')\n        setIsLoading(false)\n      }\n    }\n\n    fetchListings()\n  }, [publicClient, ...targetAddresses])\n\n  return {\n    listings,\n    isLoading,\n    error,\n    refetch: () => {\n      setIsLoading(true)\n    },\n  }\n}\n\n/**\n * Hook to check user's voucher balances\n * Used to determine which vouchers they can list\n */\nexport function useUserVoucherBalances() {\n  const { address } = useAccount()\n\n  // Read balances for all voucher types\n  const { data: balances, isLoading, error } = useReadContract({\n    address: KEKTECH_VOUCHERS.address,\n    abi: KEKTECH_VOUCHERS.abi,\n    functionName: 'balanceOfBatch',\n    args: address ? [\n      [address, address, address, address],\n      [0n, 1n, 2n, 3n],\n    ] : undefined,\n  })\n\n  const vouchersWithBalances = VOUCHER_TYPES.map((voucher, index) => ({\n    ...voucher,\n    balance: balances ? balances[index] : 0n,\n  }))\n\n  return {\n    vouchers: vouchersWithBalances,\n    isLoading,\n    error,\n    hasVouchers: vouchersWithBalances.some(v => v.balance > 0n),\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAAA;AAAA;AACA;AACA;;;;;AAcA,iFAAiF;AACjF,MAAM,gBAAiC;IACrC;CAED;AAWM,SAAS,iBAAiB,aAA6B;IAC5D,MAAM,eAAe,IAAA,wOAAe;IACpC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,sQAAQ,EAAmB,EAAE;IAC7D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,sQAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,sQAAQ,EAAgB;IAElD,2EAA2E;IAC3E,gEAAgE;IAChE,MAAM,kBAAkB,gBAAgB;QAAC;KAAc,GAAG;IAE1D,IAAA,uQAAS,EAAC;QACR,MAAM,gBAAgB;YACpB,IAAI,CAAC,gBAAgB,gBAAgB,MAAM,KAAK,GAAG;gBACjD,YAAY,EAAE;gBACd,aAAa;gBACb;YACF;YAEA,IAAI;gBACF,aAAa;gBACb,SAAS;gBAET,MAAM,iBAAmC,EAAE;gBAE3C,6BAA6B;gBAC7B,KAAK,MAAM,cAAc,gBAAiB;oBACxC,sDAAsD;oBACtD,KAAK,MAAM,WAAW,gNAAa,CAAE;wBACnC,IAAI;4BACF,MAAM,UAAU,MAAM,aAAa,YAAY,CAAC;gCAC9C,SAAS,6NAAyB;gCAClC,KAAK,yNAAqB;gCAC1B,cAAc;gCACd,MAAM;oCAAC;oCAAY,OAAO,QAAQ,EAAE;iCAAE;4BACxC;4BAEA,IAAI,WAAW,MAAM,OAAO,CAAC,UAAU;gCACrC,2DAA2D;gCAC3D,MAAM,CAAC,QAAQ,cAAc,OAAO,GAAG;gCAEvC,IAAI,UAAU,SAAS,EAAE,IAAI,eAAe,EAAE,EAAE;oCAC9C,eAAe,IAAI,CAAC;wCAClB,QAAQ;wCACR,SAAS,QAAQ,EAAE;wCACnB,aAAa,QAAQ,IAAI;wCACzB,aAAa,QAAQ,IAAI;wCACzB,QAAQ,QAAQ,MAAM;wCACtB;wCACA;wCACA,YAAY,SAAS;wCACrB,QAAQ;oCACV;gCACF;4BACF;wBACF,EAAE,OAAM;4BAEN;wBACF;oBACF;gBACF;gBAEA,YAAY;gBACZ,aAAa;YACf,EAAE,OAAM;gBACN,SAAS;gBACT,aAAa;YACf;QACF;QAEA;IACF,GAAG;QAAC;WAAiB;KAAgB;IAErC,OAAO;QACL;QACA;QACA;QACA,SAAS;YACP,aAAa;QACf;IACF;AACF;AAMO,SAAS;IACd,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,8NAAU;IAE9B,sCAAsC;IACtC,MAAM,EAAE,MAAM,QAAQ,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,IAAA,wOAAe,EAAC;QAC3D,SAAS,mNAAgB,CAAC,OAAO;QACjC,KAAK,mNAAgB,CAAC,GAAG;QACzB,cAAc;QACd,MAAM,UAAU;YACd;gBAAC;gBAAS;gBAAS;gBAAS;aAAQ;YACpC;AAAC,gBAAA,EAAE;AAAE,gBAAA,EAAE;AAAE,gBAAA,EAAE;AAAE,gBAAA,EAAE;aAAC;SACjB,GAAG;IACN;IAEA,MAAM,uBAAuB,gNAAa,CAAC,GAAG,CAAC,CAAC,SAAS,QAAU,CAAC;YAClE,GAAG,OAAO;YACV,SAAS,WAAW,QAAQ,CAAC,MAAM,GAAG,EAAE;QAC1C,CAAC;IAED,OAAO;QACL,UAAU;QACV;QACA;QACA,aAAa,qBAAqB,IAAI,CAAC,CAAA,IAAK,EAAE,OAAO,GAAG,EAAE;IAC5D;AACF","debugId":null}},
    {"offset": {"line": 4157, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/lib/hooks/useKektvApproval.ts"],"sourcesContent":["import { useAccount, useWriteContract, useWaitForTransactionReceipt, useReadContract } from 'wagmi'\nimport { useEffect } from 'react'\nimport { KEKTECH_VOUCHERS } from '@/config/contracts/kektech-vouchers'\nimport { KEKTV_MARKETPLACE_ADDRESS } from '@/config/contracts/kektv-marketplace'\n\n/**\n * Hook to manage ERC-1155 voucher approval for the marketplace\n *\n * ERC-1155 uses setApprovalForAll (no single token approval)\n * Once approved, marketplace can transfer all voucher types\n */\nexport function useKektvApproval() {\n  const { address } = useAccount()\n  const { writeContractAsync, data: hash, isPending, error } = useWriteContract()\n\n  const { isLoading: isConfirming, isSuccess } = useWaitForTransactionReceipt({\n    hash,\n  })\n\n  // Check if marketplace is already approved\n  // üêõ FIX: Disable cache to prevent flash bug\n  const { data: isApproved, isLoading, refetch } = useReadContract({\n    address: KEKTECH_VOUCHERS.address,\n    abi: KEKTECH_VOUCHERS.abi,\n    functionName: 'isApprovedForAll',\n    args: address ? [address, KEKTV_MARKETPLACE_ADDRESS] : undefined,\n    query: {\n      enabled: !!address, // Only query when wallet connected\n      staleTime: 0, // Always fetch fresh data (no stale cache)\n      gcTime: 0, // Don't cache results (wagmi v2 uses gcTime instead of cacheTime)\n    },\n  })\n\n  // üêõ DEBUG: Log approval state changes\n  useEffect(() => {\n    if (address) {\n      console.log('üîê Approval Status Debug:', {\n        userAddress: address,\n        marketplaceAddress: KEKTV_MARKETPLACE_ADDRESS,\n        isApprovedRaw: isApproved,\n        isApprovedBoolean: Boolean(isApproved),\n        isLoading,\n      })\n    }\n  }, [address, isApproved, isLoading])\n\n  /**\n   * Approve marketplace to transfer all voucher types\n   */\n  const approveMarketplace = async () => {\n    if (!address) throw new Error('Wallet not connected')\n\n    try {\n      const hash = await writeContractAsync({\n        address: KEKTECH_VOUCHERS.address,\n        abi: KEKTECH_VOUCHERS.abi,\n        functionName: 'setApprovalForAll',\n        args: [KEKTV_MARKETPLACE_ADDRESS, true],\n      })\n\n      return hash\n    } catch (error) {\n      throw error\n    }\n  }\n\n  return {\n    isApproved: Boolean(isApproved),\n    isLoading, // üêõ FIX: Export loading state for UI\n    approveMarketplace,\n    isPending,\n    isConfirming,\n    isSuccess,\n    error,\n    hash,\n    refetch,\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;;;AAQO,SAAS;IACd,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,8NAAU;IAC9B,MAAM,EAAE,kBAAkB,EAAE,MAAM,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,IAAA,0OAAgB;IAE7E,MAAM,EAAE,WAAW,YAAY,EAAE,SAAS,EAAE,GAAG,IAAA,kQAA4B,EAAC;QAC1E;IACF;IAEA,2CAA2C;IAC3C,6CAA6C;IAC7C,MAAM,EAAE,MAAM,UAAU,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,IAAA,wOAAe,EAAC;QAC/D,SAAS,mNAAgB,CAAC,OAAO;QACjC,KAAK,mNAAgB,CAAC,GAAG;QACzB,cAAc;QACd,MAAM,UAAU;YAAC;YAAS,6NAAyB;SAAC,GAAG;QACvD,OAAO;YACL,SAAS,CAAC,CAAC;YACX,WAAW;YACX,QAAQ;QACV;IACF;IAEA,uCAAuC;IACvC,IAAA,uQAAS,EAAC;QACR,IAAI,SAAS;YACX,QAAQ,GAAG,CAAC,6BAA6B;gBACvC,aAAa;gBACb,oBAAoB,6NAAyB;gBAC7C,eAAe;gBACf,mBAAmB,QAAQ;gBAC3B;YACF;QACF;IACF,GAAG;QAAC;QAAS;QAAY;KAAU;IAEnC;;GAEC,GACD,MAAM,qBAAqB;QACzB,IAAI,CAAC,SAAS,MAAM,IAAI,MAAM;QAE9B,IAAI;YACF,MAAM,OAAO,MAAM,mBAAmB;gBACpC,SAAS,mNAAgB,CAAC,OAAO;gBACjC,KAAK,mNAAgB,CAAC,GAAG;gBACzB,cAAc;gBACd,MAAM;oBAAC,6NAAyB;oBAAE;iBAAK;YACzC;YAEA,OAAO;QACT,EAAE,OAAO,OAAO;YACd,MAAM;QACR;IACF;IAEA,OAAO;QACL,YAAY,QAAQ;QACpB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 4245, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/lib/hooks/useVoucherMetadata.ts"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { usePublicClient } from 'wagmi'\nimport { KEKTECH_VOUCHERS } from '@/config/contracts'\n\n/**\n * Voucher Metadata from ERC-1155 URI\n */\nexport interface VoucherMetadata {\n  id: number\n  name: string\n  description: string\n  image?: string\n  animation_url?: string // GIF or video URL\n  attributes?: Array<{\n    trait_type: string\n    value: string | number\n  }>\n}\n\n/**\n * useVoucherMetadata Hook\n *\n * Fetches metadata for a specific voucher token ID from the contract URI\n * Handles IPFS URLs and returns proxied URLs for display\n *\n * @param tokenId - Token ID to fetch metadata for\n * @returns Object containing metadata, loading state, and error state\n */\nexport function useVoucherMetadata(tokenId: number) {\n  const publicClient = usePublicClient()\n  const [metadata, setMetadata] = useState<VoucherMetadata | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  useEffect(() => {\n    let mounted = true\n\n    async function fetchMetadata() {\n      if (!publicClient) {\n        setLoading(false)\n        return\n      }\n\n      try {\n        setLoading(true)\n        setError(null)\n\n        // Call contract's uri() function to get metadata URI\n        const uri = await publicClient.readContract({\n          address: KEKTECH_VOUCHERS.address,\n          abi: KEKTECH_VOUCHERS.abi,\n          functionName: 'uri',\n          args: [BigInt(tokenId)],\n        })\n\n        if (!uri || typeof uri !== 'string') {\n          throw new Error('No URI returned from contract')\n        }\n\n        // Convert IPFS URI to HTTP gateway URL if needed\n        const metadataUrl = convertIpfsUrl(uri)\n\n        // Fetch metadata JSON\n        const response = await fetch(metadataUrl)\n        if (!response.ok) {\n          throw new Error(`Failed to fetch metadata: ${response.statusText}`)\n        }\n\n        const data = await response.json()\n\n        // Process metadata\n        const processedMetadata: VoucherMetadata = {\n          id: tokenId,\n          name: data.name || `Voucher #${tokenId}`,\n          description: data.description || '',\n          image: data.image ? convertIpfsUrl(data.image) : undefined,\n          animation_url: data.animation_url ? convertIpfsUrl(data.animation_url) : undefined,\n          attributes: data.attributes || [],\n        }\n\n        if (mounted) {\n          setMetadata(processedMetadata)\n          setLoading(false)\n        }\n      } catch (err) {\n        console.error(`Error fetching metadata for voucher #${tokenId}:`, err)\n        if (mounted) {\n          setError(err instanceof Error ? err.message : 'Failed to fetch metadata')\n          setLoading(false)\n        }\n      }\n    }\n\n    fetchMetadata()\n\n    return () => {\n      mounted = false\n    }\n  }, [tokenId, publicClient])\n\n  return { metadata, loading, error }\n}\n\n/**\n * useAllVoucherMetadata Hook\n *\n * Fetches metadata for all known voucher token IDs\n */\nexport function useAllVoucherMetadata() {\n  const publicClient = usePublicClient()\n  const [metadataMap, setMetadataMap] = useState<Record<number, VoucherMetadata>>({})\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  useEffect(() => {\n    let mounted = true\n\n    async function fetchAllMetadata() {\n      if (!publicClient) {\n        setLoading(false)\n        return\n      }\n\n      try {\n        setLoading(true)\n        setError(null)\n\n        const results: Record<number, VoucherMetadata> = {}\n\n        // Fetch metadata for all known token IDs in parallel\n        await Promise.all(\n          KEKTECH_VOUCHERS.knownTokenIds.map(async (tokenId) => {\n            try {\n              // Call contract's uri() function\n              const uri = await publicClient.readContract({\n                address: KEKTECH_VOUCHERS.address,\n                abi: KEKTECH_VOUCHERS.abi,\n                functionName: 'uri',\n                args: [BigInt(tokenId)],\n              })\n\n              if (!uri || typeof uri !== 'string') {\n                console.warn(`No URI for token ID ${tokenId}`)\n                return\n              }\n\n              // Convert IPFS to HTTP if needed\n              const metadataUrl = convertIpfsUrl(uri)\n\n              // Fetch metadata JSON\n              const response = await fetch(metadataUrl)\n              if (!response.ok) {\n                console.warn(`Failed to fetch metadata for token ${tokenId}:`, response.statusText)\n                return\n              }\n\n              const data = await response.json()\n\n              results[tokenId] = {\n                id: tokenId,\n                name: data.name || `Voucher #${tokenId}`,\n                description: data.description || '',\n                image: data.image ? convertIpfsUrl(data.image) : undefined,\n                animation_url: data.animation_url ? convertIpfsUrl(data.animation_url) : undefined,\n                attributes: data.attributes || [],\n              }\n            } catch (err) {\n              console.error(`Error fetching metadata for voucher #${tokenId}:`, err)\n            }\n          })\n        )\n\n        if (mounted) {\n          setMetadataMap(results)\n          setLoading(false)\n        }\n      } catch (err) {\n        console.error('Error fetching voucher metadata:', err)\n        if (mounted) {\n          setError(err instanceof Error ? err.message : 'Failed to fetch metadata')\n          setLoading(false)\n        }\n      }\n    }\n\n    fetchAllMetadata()\n\n    return () => {\n      mounted = false\n    }\n  }, [publicClient])\n\n  return { metadataMap, loading, error }\n}\n\n/**\n * Convert IPFS URLs to HTTP gateway URLs\n */\nfunction convertIpfsUrl(url: string): string {\n  if (!url) return url\n\n  // If it's already an HTTP URL, return as-is\n  if (url.startsWith('http://') || url.startsWith('https://')) {\n    return url\n  }\n\n  // Handle ipfs:// protocol\n  if (url.startsWith('ipfs://')) {\n    const hash = url.replace('ipfs://', '')\n    return `https://ipfs.io/ipfs/${hash}`\n  }\n\n  // Handle /ipfs/ path\n  if (url.startsWith('/ipfs/')) {\n    return `https://ipfs.io${url}`\n  }\n\n  // If it looks like an IPFS hash, add the gateway\n  if (url.match(/^Qm[a-zA-Z0-9]{44}/) || url.match(/^ba[a-zA-Z0-9]{57}/)) {\n    return `https://ipfs.io/ipfs/${url}`\n  }\n\n  // Otherwise return as-is\n  return url\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4438, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/config/contracts/kektv-offers.ts"],"sourcesContent":["/**\n * KEKTV Offers Contract Configuration V3\n * Deployed on BasedAI Mainnet\n *\n * Contract: KektvVouchersOffersV3\n * Address: 0xee8dc29237d46eff1518bb0503d7f782b651a04e\n * Network: BasedAI (32323)\n * Deployed: 2025-10-27\n *\n * V3 Changes (CRITICAL BUG FIX):\n * - üî• CRITICAL FIX: General offers now work correctly!\n * - ‚úÖ Fixed balance checking for general offers (voucherOwner = 0x0)\n * - ‚úÖ V3 checks msg.sender's balance for general offers\n * - ‚úÖ V2 incorrectly checked balanceOf(0x0) which always failed\n * - ‚úÖ Backward compatible with targeted offers\n * - ‚úÖ All security features preserved\n * - ‚úÖ Contract tested: 11/11 tests passed\n *\n * V2 Changes (Still included in V3):\n * - ‚úÖ Uses BASED (native token) instead of TECH (ERC-20)\n * - ‚úÖ No token approval needed\n * - ‚úÖ Simpler UX for users\n * - ‚úÖ Lower gas costs\n */\n\nimport { Address } from 'viem'\nimport kektvOffersV2Abi from './kektv-offers-v2-abi.json'\n\n// ============ Contract Addresses ============\n\n/**\n * V3 Offers Contract (CURRENT - Use this!)\n * Deployment: 2025-10-27\n * Bug Fix: General offers now work correctly\n */\nexport const KEKTV_OFFERS_V3_ADDRESS = '0xee8dc29237d46eff1518bb0503d7f782b651a04e' as Address\n\n/**\n * V2 Offers Contract (DEPRECATED - Do not use for new offers)\n * Bug: General offers always fail\n * Keep for reference only\n */\nexport const KEKTV_OFFERS_V2_ADDRESS = '0x4E8B375C717a136882071923F17Ea08E75DDBcb2' as Address\n\n/**\n * Current active contract (points to V3)\n */\nexport const KEKTV_OFFERS_ADDRESS = KEKTV_OFFERS_V3_ADDRESS\n\nexport const KEKTV_VOUCHERS_ADDRESS = '0x7FEF981beE047227f848891c6C9F9dad11767a48' as Address\n\n// ============ Contract ABI ============\n\nexport const KEKTV_OFFERS_ABI = kektvOffersV2Abi\n\n// ============ Network Configuration ============\n\nexport const BASEDAI_NETWORK = {\n  id: 32323,\n  name: 'BasedAI',\n  nativeCurrency: {\n    name: 'BASED',\n    symbol: 'BASED',\n    decimals: 18,\n  },\n  rpcUrls: {\n    default: {\n      http: ['https://mainnet.basedaibridge.com/rpc'],\n    },\n    public: {\n      http: ['https://mainnet.basedaibridge.com/rpc'],\n    },\n  },\n  blockExplorers: {\n    default: {\n      name: 'BasedAI Explorer',\n      url: 'https://explorer.bf1337.org',\n    },\n  },\n} as const\n\n// ============ Constants ============\n\n/**\n * Minimum offer value in BASED (wei)\n * 0.001 BASED = 1000000000000000 wei\n */\nexport const MIN_OFFER_VALUE = '1000000000000000' as const // 0.001 BASED\n\n/**\n * KEKTV Voucher Token IDs\n */\nexport const VOUCHER_IDS = {\n  GENESIS: 0,\n  SILVER: 1,\n  GOLD: 2,\n  PLATINUM: 3,\n} as const\n\n/**\n * Voucher names for display\n * NOTE: Removed placeholder names (Silver, Gold, Platinum)\n * Use actual metadata names from NFT contract instead\n */\nexport const VOUCHER_NAMES = {\n  // No placeholder names - use metadata only\n} as const\n\n// ============ TypeScript Types ============\n\n/**\n * Offer struct as returned by contract\n */\nexport interface Offer {\n  offerId: bigint\n  offerer: Address\n  voucherOwner: Address\n  tokenId: bigint\n  amount: bigint\n  offerPrice: bigint\n  createdAt: bigint\n  active: boolean\n}\n\n/**\n * Offer creation parameters\n */\nexport interface MakeOfferParams {\n  tokenId: number\n  amount: bigint\n  offerPrice: bigint\n}\n\n/**\n * Complete contract configuration\n */\nexport const KEKTV_OFFERS_CONFIG = {\n  address: KEKTV_OFFERS_ADDRESS,\n  abi: KEKTV_OFFERS_ABI,\n  network: BASEDAI_NETWORK,\n  constants: {\n    minOfferValue: MIN_OFFER_VALUE,\n    voucherIds: VOUCHER_IDS,\n    voucherNames: VOUCHER_NAMES,\n  },\n  relatedContracts: {\n    vouchers: KEKTV_VOUCHERS_ADDRESS,\n    // No TECH token needed in V2! Uses native BASED ‚úÖ\n  },\n} as const\n\nexport type KektvOffersConfig = typeof KEKTV_OFFERS_CONFIG\n\n// ============ Helper Functions ============\n\n/**\n * Get voucher name by ID\n * Returns empty string to avoid showing placeholder names\n * Actual names should come from NFT metadata\n */\nexport function getVoucherName(_tokenId: number): string {\n  return '' // No placeholders - use metadata instead\n}\n\n/**\n * Check if offer value meets minimum\n */\nexport function meetsMinimumOffer(amount: bigint, pricePerToken: bigint): boolean {\n  const totalPrice = amount * pricePerToken\n  return totalPrice >= BigInt(MIN_OFFER_VALUE)\n}\n\n/**\n * Format offer price for display\n */\nexport function formatOfferPrice(price: bigint): string {\n  return (Number(price) / 1e18).toFixed(4) + ' BASED'\n}\n\n/**\n * Calculate total offer price\n */\nexport function calculateTotalPrice(amount: bigint, pricePerToken: bigint): bigint {\n  return amount * pricePerToken\n}\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;CAuBC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGD;;AASO,MAAM,0BAA0B;AAOhC,MAAM,0BAA0B;AAKhC,MAAM,uBAAuB;AAE7B,MAAM,yBAAyB;AAI/B,MAAM,mBAAmB,2LAAgB;AAIzC,MAAM,kBAAkB;IAC7B,IAAI;IACJ,MAAM;IACN,gBAAgB;QACd,MAAM;QACN,QAAQ;QACR,UAAU;IACZ;IACA,SAAS;QACP,SAAS;YACP,MAAM;gBAAC;aAAwC;QACjD;QACA,QAAQ;YACN,MAAM;gBAAC;aAAwC;QACjD;IACF;IACA,gBAAgB;QACd,SAAS;YACP,MAAM;YACN,KAAK;QACP;IACF;AACF;AAQO,MAAM,kBAAkB,kBAA4B,cAAc;;AAKlE,MAAM,cAAc;IACzB,SAAS;IACT,QAAQ;IACR,MAAM;IACN,UAAU;AACZ;AAOO,MAAM,gBAAgB;AAE7B;AA8BO,MAAM,sBAAsB;IACjC,SAAS;IACT,KAAK;IACL,SAAS;IACT,WAAW;QACT,eAAe;QACf,YAAY;QACZ,cAAc;IAChB;IACA,kBAAkB;QAChB,UAAU;IAEZ;AACF;AAWO,SAAS,eAAe,QAAgB;IAC7C,OAAO,GAAG,yCAAyC;;AACrD;AAKO,SAAS,kBAAkB,MAAc,EAAE,aAAqB;IACrE,MAAM,aAAa,SAAS;IAC5B,OAAO,cAAc,OAAO;AAC9B;AAKO,SAAS,iBAAiB,KAAa;IAC5C,OAAO,CAAC,OAAO,SAAS,IAAI,EAAE,OAAO,CAAC,KAAK;AAC7C;AAKO,SAAS,oBAAoB,MAAc,EAAE,aAAqB;IACvE,OAAO,SAAS;AAClB","debugId":null}},
    {"offset": {"line": 4566, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/lib/hooks/useKektvOffers.ts"],"sourcesContent":["import {\n  useAccount,\n  useWriteContract,\n  useWaitForTransactionReceipt,\n  useSwitchChain,\n  useReadContract,\n} from 'wagmi'\nimport { Address } from 'viem'\nimport { KEKTV_OFFERS_ADDRESS, KEKTV_OFFERS_ABI, type Offer } from '@/config/contracts/kektv-offers'\nimport { basedChain } from '@/config/chains'\n\n/**\n * Hook for KEKTV Offers operations (V2 - BASED Payments)\n *\n * Handles:\n * - Making offers on KEKTV vouchers (uses BASED native token)\n * - Accepting offers (if you own the vouchers)\n * - Canceling offers (if you made them)\n * - Rejecting offers (if they're on your vouchers)\n * - Querying offers by token, user, etc.\n * - Auto network switching to BasedAI\n *\n * V2 Changes:\n * - Uses BASED (native token) instead of TECH (ERC-20)\n * - No token approval needed\n * - Simpler UX for users\n */\nexport function useKektvOffers() {\n  const { address, chainId } = useAccount()\n  const { switchChainAsync } = useSwitchChain()\n  const { writeContractAsync, data: hash, isPending, error } = useWriteContract()\n\n  const { isLoading: isConfirming, isSuccess } = useWaitForTransactionReceipt({\n    hash,\n  })\n\n  /**\n   * Make an offer on a KEKTV voucher (V2 - pays in BASED)\n   * @param tokenId - Voucher type ID (0-3: Genesis, Silver, Gold, Platinum)\n   * @param amount - Number of vouchers to offer on\n   * @param totalBasedString - Total BASED to offer (e.g., \"500\" = 500 BASED total)\n   * @param voucherOwner - Address that owns the vouchers (can be zero address for general offers)\n   */\n  const makeOffer = async (\n    tokenId: number,\n    amount: bigint,\n    totalBasedString: string,\n    voucherOwner: string = '0x0000000000000000000000000000000000000000'\n  ) => {\n    if (!address) throw new Error('Wallet not connected')\n\n    try {\n      // Auto-switch to BasedAI Chain if on wrong network\n      if (chainId !== basedChain.id) {\n        await switchChainAsync({ chainId: basedChain.id })\n      }\n\n      // Convert BASED string to wei (1 BASED = 10^18 wei)\n      const totalBased = BigInt(totalBasedString) * BigInt(10 ** 18)\n\n      console.log('üí∞ Make Offer (V2 - BASED):', {\n        tokenId,\n        amount: amount.toString(),\n        totalBased: (totalBased / BigInt(10 ** 18)).toString() + ' BASED',\n        voucherOwner,\n      })\n\n      // Make the offer (send BASED as value, escrowed in contract)\n      const hash = await writeContractAsync({\n        address: KEKTV_OFFERS_ADDRESS,\n        abi: KEKTV_OFFERS_ABI,\n        functionName: 'makeOffer',\n        args: [BigInt(tokenId), amount, voucherOwner as `0x${string}`],\n        value: totalBased, // Send BASED as payment\n        gas: 500000n, // Fixed gas limit to avoid RPC estimation issues\n      })\n\n      return hash\n    } catch (error) {\n      throw error\n    }\n  }\n\n  /**\n   * Accept an offer on your vouchers\n   * @param offerId - The offer ID to accept\n   */\n  const acceptOffer = async (offerId: bigint) => {\n    if (!address) throw new Error('Wallet not connected')\n\n    try {\n      // Auto-switch to BasedAI Chain if on wrong network\n      if (chainId !== basedChain.id) {\n        await switchChainAsync({ chainId: basedChain.id })\n      }\n\n      console.log('‚úÖ Accepting Offer:', offerId.toString())\n\n      // Accept the offer (transfers vouchers to buyer, BASED to seller)\n      const hash = await writeContractAsync({\n        address: KEKTV_OFFERS_ADDRESS,\n        abi: KEKTV_OFFERS_ABI,\n        functionName: 'acceptOffer',\n        args: [offerId],\n        gas: 500000n,\n      })\n\n      return hash\n    } catch (error) {\n      throw error\n    }\n  }\n\n  /**\n   * Cancel your own offer\n   * @param offerId - The offer ID to cancel\n   */\n  const cancelOffer = async (offerId: bigint) => {\n    if (!address) throw new Error('Wallet not connected')\n\n    try {\n      // Auto-switch to BasedAI Chain if on wrong network\n      if (chainId !== basedChain.id) {\n        await switchChainAsync({ chainId: basedChain.id })\n      }\n\n      console.log('‚ùå Canceling Offer:', offerId.toString())\n\n      // Cancel the offer (refunds BASED to offerer)\n      const hash = await writeContractAsync({\n        address: KEKTV_OFFERS_ADDRESS,\n        abi: KEKTV_OFFERS_ABI,\n        functionName: 'cancelOffer',\n        args: [offerId],\n        gas: 300000n, // Lower gas for cancel\n      })\n\n      return hash\n    } catch (error) {\n      throw error\n    }\n  }\n\n  /**\n   * Reject an offer on your vouchers\n   * @param offerId - The offer ID to reject\n   */\n  const rejectOffer = async (offerId: bigint) => {\n    if (!address) throw new Error('Wallet not connected')\n\n    try {\n      // Auto-switch to BasedAI Chain if on wrong network\n      if (chainId !== basedChain.id) {\n        await switchChainAsync({ chainId: basedChain.id })\n      }\n\n      console.log('üö´ Rejecting Offer:', offerId.toString())\n\n      // Reject the offer (refunds BASED to offerer)\n      const hash = await writeContractAsync({\n        address: KEKTV_OFFERS_ADDRESS,\n        abi: KEKTV_OFFERS_ABI,\n        functionName: 'rejectOffer',\n        args: [offerId],\n        gas: 300000n, // Lower gas for reject\n      })\n\n      return hash\n    } catch (error) {\n      throw error\n    }\n  }\n\n  return {\n    // Write functions\n    makeOffer,\n    acceptOffer,\n    cancelOffer,\n    rejectOffer,\n\n    // Transaction states\n    isPending,\n    isConfirming,\n    isSuccess,\n    error,\n    hash,\n  }\n}\n\n/**\n * Hook to query offers by token ID\n * @param tokenId - Voucher type ID (0-3)\n */\nexport function useTokenOffers(tokenId: number | null) {\n  const { data, isLoading, error, refetch } = useReadContract({\n    address: KEKTV_OFFERS_ADDRESS,\n    abi: KEKTV_OFFERS_ABI,\n    functionName: 'getTokenOffers',\n    args: tokenId !== null ? [BigInt(tokenId)] : undefined,\n    query: {\n      enabled: tokenId !== null,\n      refetchInterval: 5000, // Auto-refetch every 5 seconds\n      staleTime: 0, // Always consider data stale\n    },\n  })\n\n  return {\n    offerIds: (data as bigint[]) || [],\n    isLoading,\n    error,\n    refetch,\n  }\n}\n\n/**\n * Hook to query offers by user (offers user made)\n * @param userAddress - User's wallet address\n */\nexport function useUserOffers(userAddress: `0x${string}` | undefined) {\n  const { data, isLoading, error, refetch } = useReadContract({\n    address: KEKTV_OFFERS_ADDRESS,\n    abi: KEKTV_OFFERS_ABI,\n    functionName: 'getUserOffers',\n    args: userAddress ? [userAddress] : undefined,\n    query: {\n      enabled: !!userAddress,\n      refetchInterval: 5000, // Auto-refetch every 5 seconds\n      staleTime: 0, // Always consider data stale\n    },\n  })\n\n  return {\n    offerIds: (data as bigint[]) || [],\n    isLoading,\n    error,\n    refetch,\n  }\n}\n\n/**\n * Hook to query received offers (offers on user's vouchers)\n * @param userAddress - User's wallet address\n */\nexport function useReceivedOffers(userAddress: `0x${string}` | undefined) {\n  const { data, isLoading, error, refetch } = useReadContract({\n    address: KEKTV_OFFERS_ADDRESS,\n    abi: KEKTV_OFFERS_ABI,\n    functionName: 'getReceivedOffers',\n    args: userAddress ? [userAddress] : undefined,\n    query: {\n      enabled: !!userAddress,\n      refetchInterval: 5000, // Auto-refetch every 5 seconds\n      staleTime: 0, // Always consider data stale\n    },\n  })\n\n  return {\n    offerIds: (data as bigint[]) || [],\n    isLoading,\n    error,\n    refetch,\n  }\n}\n\n/**\n * Hook to get details of a specific offer\n * @param offerId - The offer ID to fetch\n */\nexport function useOfferDetails(offerId: bigint | null) {\n  const { data, isLoading, error, refetch } = useReadContract({\n    address: KEKTV_OFFERS_ADDRESS,\n    abi: KEKTV_OFFERS_ABI,\n    functionName: 'getOffer',\n    args: offerId !== null ? [offerId] : undefined,\n    query: {\n      enabled: offerId !== null,\n    },\n  })\n\n  // Wagmi v2 returns struct data as an object with named properties, NOT as a tuple array!\n  // Contract returns struct with named fields\n  console.log('üîç useOfferDetails raw data:', { offerId: offerId?.toString(), data, typeofData: typeof data })\n\n  // Handle both object (Wagmi v2 struct) and array (old tuple) formats\n  const rawData = data as unknown\n  const dataAsObject = rawData as Record<string, unknown>\n  const dataAsArray = rawData as unknown[]\n\n  const offer: Offer | undefined = data\n    ? {\n        // Try object properties first (Wagmi v2), fallback to array indices (old format)\n        offerId: (dataAsObject.offerId as bigint) || (dataAsArray[0] as bigint),\n        offerer: ((dataAsObject.offerer as string) || (dataAsArray[1] as string)) as Address,\n        voucherOwner: ((dataAsObject.voucherOwner as string) || (dataAsArray[2] as string)) as Address,\n        tokenId: (dataAsObject.tokenId as bigint) || (dataAsArray[3] as bigint),\n        amount: (dataAsObject.amount as bigint) || (dataAsArray[4] as bigint),\n        offerPrice: (dataAsObject.offerPrice as bigint) || (dataAsArray[5] as bigint),\n        createdAt: (dataAsObject.createdAt as bigint) || (dataAsArray[6] as bigint),\n        active: dataAsObject.active !== undefined ? (dataAsObject.active as boolean) : (dataAsArray[7] as boolean),\n      }\n    : undefined\n\n  console.log('üîç useOfferDetails transformed offer:', offer)\n\n  return {\n    offer,\n    isLoading,\n    error,\n    refetch,\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4843, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/lib/hooks/useVoucherHolders.ts"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { KEKTECH_VOUCHERS_ADDRESS } from '@/config/contracts/kektech-vouchers'\n\n/**\n * Voucher holder information from BasedAI explorer\n */\nexport interface VoucherHolder {\n  address: string\n  balance: bigint\n}\n\n/**\n * API response structure from BasedAI explorer\n */\ninterface HolderApiItem {\n  address: {\n    hash: string\n  }\n  value: string\n}\n\n/**\n * Hook to fetch live holder data for a specific voucher token ID\n * Uses BasedAI explorer API to get real-time ownership information\n *\n * @param tokenId - The voucher token ID to query (0-3)\n * @returns Holder list, total supply, and loading state\n */\nexport function useVoucherHolders(tokenId: number | null) {\n  const [holders, setHolders] = useState<VoucherHolder[]>([])\n  const [isLoading, setIsLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  useEffect(() => {\n    if (tokenId === null) {\n      setHolders([])\n      return\n    }\n\n    const fetchHolders = async () => {\n      setIsLoading(true)\n      setError(null)\n\n      try {\n        // Query BasedAI explorer API for token holders\n        const response = await fetch(\n          `https://explorer.bf1337.org/api/v2/tokens/${KEKTECH_VOUCHERS_ADDRESS}/instances/${tokenId}/holders?limit=100`\n        )\n\n        if (!response.ok) {\n          throw new Error(`API error: ${response.status}`)\n        }\n\n        const data = await response.json()\n\n        // Transform API response to holder list\n        const holderList: VoucherHolder[] = (data.items || []).map((item: HolderApiItem) => ({\n          address: item.address.hash,\n          balance: BigInt(item.value),\n        }))\n\n        // Sort by balance (highest first)\n        holderList.sort((a, b) => Number(b.balance - a.balance))\n\n        setHolders(holderList)\n      } catch (err) {\n        console.error('Failed to fetch voucher holders:', err)\n        setError(err instanceof Error ? err.message : 'Unknown error')\n        setHolders([])\n      } finally {\n        setIsLoading(false)\n      }\n    }\n\n    fetchHolders()\n  }, [tokenId])\n\n  // Calculate total supply across all holders\n  const totalSupply = holders.reduce((sum, h) => sum + h.balance, 0n)\n\n  return {\n    holders,\n    totalSupply,\n    holderCount: holders.length,\n    isLoading,\n    error,\n    refetch: () => {\n      setIsLoading(true)\n    },\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AA2BO,SAAS,kBAAkB,OAAsB;IACtD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,sQAAQ,EAAkB,EAAE;IAC1D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,sQAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,sQAAQ,EAAgB;IAElD,IAAA,uQAAS,EAAC;QACR,IAAI,YAAY,MAAM;YACpB,WAAW,EAAE;YACb;QACF;QAEA,MAAM,eAAe;YACnB,aAAa;YACb,SAAS;YAET,IAAI;gBACF,+CAA+C;gBAC/C,MAAM,WAAW,MAAM,MACrB,CAAC,0CAA0C,EAAE,2NAAwB,CAAC,WAAW,EAAE,QAAQ,kBAAkB,CAAC;gBAGhH,IAAI,CAAC,SAAS,EAAE,EAAE;oBAChB,MAAM,IAAI,MAAM,CAAC,WAAW,EAAE,SAAS,MAAM,EAAE;gBACjD;gBAEA,MAAM,OAAO,MAAM,SAAS,IAAI;gBAEhC,wCAAwC;gBACxC,MAAM,aAA8B,CAAC,KAAK,KAAK,IAAI,EAAE,EAAE,GAAG,CAAC,CAAC,OAAwB,CAAC;wBACnF,SAAS,KAAK,OAAO,CAAC,IAAI;wBAC1B,SAAS,OAAO,KAAK,KAAK;oBAC5B,CAAC;gBAED,kCAAkC;gBAClC,WAAW,IAAI,CAAC,CAAC,GAAG,IAAM,OAAO,EAAE,OAAO,GAAG,EAAE,OAAO;gBAEtD,WAAW;YACb,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,oCAAoC;gBAClD,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;gBAC9C,WAAW,EAAE;YACf,SAAU;gBACR,aAAa;YACf;QACF;QAEA;IACF,GAAG;QAAC;KAAQ;IAEZ,4CAA4C;IAC5C,MAAM,cAAc,QAAQ,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,OAAO,EAAE,EAAE;IAElE,OAAO;QACL;QACA;QACA,aAAa,QAAQ,MAAM;QAC3B;QACA;QACA,SAAS;YACP,aAAa;QACf;IACF;AACF","debugId":null}},
    {"offset": {"line": 4907, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/components/marketplace/OfferCard.tsx"],"sourcesContent":["'use client'\n\nimport Image from 'next/image'\nimport { useAccount } from 'wagmi'\nimport { useKektvOffers } from '@/lib/hooks/useKektvOffers'\nimport { useAllVoucherMetadata } from '@/lib/hooks/useVoucherMetadata'\nimport { getVoucherName, formatOfferPrice } from '@/config/contracts/kektv-offers'\nimport type { Offer } from '@/config/contracts/kektv-offers'\n\ninterface OfferCardProps {\n  offer: Offer\n  onSuccess?: () => void\n  canAccept?: boolean // Whether user has sufficient vouchers to accept this offer\n}\n\n/**\n * Individual offer card component\n * Matches the style of marketplace listing cards\n */\nexport function OfferCard({ offer, onSuccess, canAccept }: OfferCardProps) {\n  const { address } = useAccount()\n  const { acceptOffer, rejectOffer, isPending } = useKektvOffers()\n  const { metadataMap } = useAllVoucherMetadata()\n\n  const metadata = metadataMap[Number(offer.tokenId)]\n  const mediaUrl = metadata?.animation_url || metadata?.image\n  const voucherName = metadata?.name || getVoucherName(Number(offer.tokenId))\n\n  const isYourOffer = offer.offerer.toLowerCase() === address?.toLowerCase()\n  const isYourVoucher = !offer.voucherOwner || offer.voucherOwner === '0x0000000000000000000000000000000000000000'\n\n  const handleAccept = async () => {\n    try {\n      await acceptOffer(offer.offerId)\n      alert('Offer accepted successfully! Vouchers transferred to buyer, BASED transferred to you.')\n      onSuccess?.()\n    } catch (error) {\n      alert(`Accept failed: ${error instanceof Error ? error.message : 'Unknown error'}`)\n    }\n  }\n\n  const handleReject = async () => {\n    try {\n      await rejectOffer(offer.offerId)\n      alert('Offer rejected! BASED refunded to offerer.')\n      onSuccess?.()\n    } catch (error) {\n      alert(`Reject failed: ${error instanceof Error ? error.message : 'Unknown error'}`)\n    }\n  }\n\n  // Calculate total offer price\n  const totalPrice = offer.offerPrice * offer.amount\n\n  return (\n    <div className=\"bg-gradient-to-br from-[#daa520]/10 to-yellow-600/10 rounded-lg border border-[#daa520]/20 hover:border-[#daa520]/40 transition-all relative\">\n      {/* Actionable Offer Badge */}\n      {canAccept && address && (\n        <div className=\"absolute top-3 right-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white text-xs px-3 py-1 rounded-full font-bold shadow-lg shadow-green-500/30 flex items-center gap-1 z-10\">\n          <span>‚ú®</span>\n          <span>You can accept</span>\n        </div>\n      )}\n\n      <div className=\"p-6 space-y-4\">\n        {/* Voucher Media */}\n        {mediaUrl ? (\n          <div className=\"relative w-full h-48 rounded-lg overflow-hidden bg-black/20 mb-4\">\n            <Image\n              src={mediaUrl}\n              alt={voucherName}\n              fill\n              className=\"object-contain\"\n              unoptimized\n            />\n          </div>\n        ) : (\n          <div className=\"text-center mb-4\">\n            <div className=\"text-6xl mb-2\">üé´</div>\n          </div>\n        )}\n\n        {/* Voucher Info */}\n        <div className=\"text-center mb-4\">\n          <h3 className=\"text-xl font-bold text-[#daa520] font-fredoka\">\n            {voucherName}\n          </h3>\n        </div>\n\n        {/* Offer Details */}\n        <div className=\"space-y-2 text-sm\">\n          <div className=\"flex justify-between text-gray-400\">\n            <span>Offerer:</span>\n            <span className=\"text-white font-mono text-xs\">\n              {offer.offerer.slice(0, 6)}...{offer.offerer.slice(-4)}\n            </span>\n          </div>\n          <div className=\"flex justify-between text-gray-400\">\n            <span>Quantity:</span>\n            <span className=\"text-white font-bold\">{offer.amount.toString()}</span>\n          </div>\n          <div className=\"flex justify-between text-gray-400\">\n            <span>Price/Each:</span>\n            <span className=\"text-white font-bold\">\n              {formatOfferPrice(offer.offerPrice)}\n            </span>\n          </div>\n          <div className=\"flex justify-between text-gray-400 border-t border-gray-800 pt-2 mt-2\">\n            <span className=\"font-bold\">Total:</span>\n            <span className=\"text-[#daa520] font-bold text-lg\">\n              {formatOfferPrice(totalPrice)}\n            </span>\n          </div>\n          <div className=\"text-xs text-gray-500 text-center mt-1\">\n            üí∞ BASED escrowed ‚Ä¢ General offer (anyone can accept)\n          </div>\n        </div>\n\n        {/* Action Buttons */}\n        {isYourOffer ? (\n          <div className=\"mt-4 py-3 rounded-lg bg-gray-700 text-gray-500 text-center font-fredoka font-bold\">\n            Your Offer\n          </div>\n        ) : isYourVoucher && address ? (\n          <div className=\"mt-4 grid grid-cols-2 gap-2\">\n            <button\n              onClick={handleAccept}\n              disabled={isPending || !canAccept}\n              className={`py-3 rounded-lg font-fredoka font-bold transition-all disabled:opacity-50 disabled:cursor-not-allowed ${\n                canAccept\n                  ? 'bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:scale-105 shadow-lg shadow-green-500/30'\n                  : 'bg-gray-700 text-gray-500'\n              }`}\n              title={!canAccept ? 'Insufficient voucher balance' : ''}\n            >\n              {isPending ? 'Processing...' : canAccept ? '‚úÖ Accept' : '‚ùå Insufficient Balance'}\n            </button>\n            <button\n              onClick={handleReject}\n              disabled={isPending}\n              className=\"py-3 rounded-lg font-fredoka font-bold transition-all bg-red-500/20 text-red-400 hover:bg-red-500/30 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {isPending ? 'Processing...' : 'üö´ Reject'}\n            </button>\n          </div>\n        ) : (\n          <div className=\"mt-4 py-3 rounded-lg bg-gray-800 text-gray-500 text-center font-fredoka font-bold text-sm\">\n            Connect wallet to accept\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5208, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/components/marketplace/BrowseOffers.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useRef, useMemo } from 'react'\nimport Image from 'next/image'\nimport { useTokenOffers, useOfferDetails } from '@/lib/hooks/useKektvOffers'\nimport { useAllVoucherMetadata } from '@/lib/hooks/useVoucherMetadata'\nimport { useVoucherHolders } from '@/lib/hooks/useVoucherHolders'\nimport { useUserVoucherBalances } from '@/lib/hooks/useKektvListings'\nimport { OfferCard } from './OfferCard'\nimport { VOUCHER_IDS } from '@/config/contracts/kektv-offers'\n\n// Only show voucher IDs 1, 2, and 3 (exclude 0)\nconst VOUCHER_OPTIONS = [\n  { id: VOUCHER_IDS.SILVER, fallbackIcon: 'ü•à', color: 'gray' },\n  { id: VOUCHER_IDS.GOLD, fallbackIcon: 'ü•á', color: 'gray' },\n  { id: VOUCHER_IDS.PLATINUM, fallbackIcon: 'üí†', color: 'gray' },\n]\n\n/**\n * Browse all active offers on KEKTV vouchers\n */\nexport function BrowseOffers() {\n  const [selectedToken, setSelectedToken] = useState<number | null>(null)\n  const { metadataMap } = useAllVoucherMetadata()\n  const { vouchers: userVouchers } = useUserVoucherBalances()\n\n  // If a token is selected, fetch its offers\n  const { offerIds, isLoading, refetch } = useTokenOffers(selectedToken)\n\n  // Fetch live holder data for selected token\n  const { holders, totalSupply, holderCount, isLoading: holdersLoading} = useVoucherHolders(selectedToken)\n\n  // Calculate actionable offers (offers user can accept based on holdings)\n  // Memoized to avoid repeated find() operations on every render\n  const userBalance = useMemo(() =>\n    selectedToken !== null ?\n      userVouchers.find(v => v.id === selectedToken)?.balance || 0n\n      : 0n,\n    [selectedToken, userVouchers]\n  )\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Voucher Type Selector */}\n      <div>\n        <h3 className=\"text-xl font-bold text-[#daa520] mb-4 font-fredoka text-center\">\n          Select Voucher Type\n        </h3>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-4xl mx-auto\">\n          {VOUCHER_OPTIONS.map((voucher) => {\n            const metadata = metadataMap[voucher.id]\n            const mediaUrl = metadata?.animation_url || metadata?.image\n            const voucherName = metadata?.name || voucher.fallbackIcon\n            const isSelected = selectedToken === voucher.id\n\n            return (\n              <button\n                key={voucher.id}\n                onClick={() => setSelectedToken(voucher.id)}\n                className={`\n                  bg-gradient-to-br from-[#daa520]/10 to-yellow-600/10 rounded-lg border overflow-hidden transition-all\n                  ${isSelected\n                    ? 'border-[#daa520] ring-2 ring-[#daa520]/50 shadow-lg shadow-[#daa520]/20'\n                    : 'border-[#daa520]/20 hover:border-[#daa520]/40'\n                  }\n                `}\n              >\n                <div className=\"p-6\">\n                  {/* Voucher Media */}\n                  {mediaUrl ? (\n                    <div className=\"relative w-full h-48 rounded-lg overflow-hidden bg-black/20 mb-4\">\n                      <Image\n                        src={mediaUrl}\n                        alt={voucherName}\n                        fill\n                        className=\"object-contain\"\n                        unoptimized\n                      />\n                    </div>\n                  ) : (\n                    <div className=\"text-center mb-4\">\n                      <div className=\"text-6xl mb-2\">{voucher.fallbackIcon}</div>\n                    </div>\n                  )}\n\n                  {/* Voucher Name */}\n                  <div className=\"text-center\">\n                    <h3 className=\"text-xl font-bold text-[#daa520] font-fredoka\">\n                      {voucherName}\n                    </h3>\n                  </div>\n                </div>\n              </button>\n            )\n          })}\n        </div>\n      </div>\n\n      {/* Holder Information (when token selected) */}\n      {selectedToken !== null && (\n        <div className=\"bg-gray-900/60 rounded-lg border border-[#daa520]/20 p-6 max-w-4xl mx-auto\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-bold text-[#daa520] font-fredoka\">\n              Current Holders\n            </h3>\n            {!holdersLoading && (\n              <div className=\"text-sm text-gray-400\">\n                {holderCount} holders ‚Ä¢ {totalSupply.toString()} total vouchers\n              </div>\n            )}\n          </div>\n\n          {holdersLoading ? (\n            <div className=\"text-center py-8\">\n              <div className=\"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-[#daa520] mx-auto mb-2\"></div>\n              <p className=\"text-xs text-gray-500\">Loading holder data...</p>\n            </div>\n          ) : holders.length === 0 ? (\n            <div className=\"text-center py-8 text-gray-500 text-sm\">\n              No holders found for this voucher type\n            </div>\n          ) : (\n            <>\n              <p className=\"text-xs text-gray-400 mb-4\">\n                üí° General offers can be accepted by any holder listed below (first come, first served)\n              </p>\n              <div className=\"space-y-2 max-h-64 overflow-y-auto\">\n                {holders.map((holder, index) => (\n                  <div\n                    key={holder.address}\n                    className=\"flex items-center justify-between p-3 bg-black/20 rounded-lg hover:bg-black/30 transition\"\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"text-xs text-gray-500 font-mono\">#{index + 1}</div>\n                      <div className=\"font-mono text-sm text-gray-300\">\n                        {holder.address.slice(0, 6)}...{holder.address.slice(-4)}\n                      </div>\n                    </div>\n                    <div className=\"text-sm font-bold text-[#daa520]\">\n                      {holder.balance.toString()}√ó vouchers\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </>\n          )}\n        </div>\n      )}\n\n      {/* Offers Display */}\n      {selectedToken === null ? (\n        <div className=\"text-center py-24\">\n          <div className=\"text-8xl mb-6\">üëÜ</div>\n          <h3 className=\"text-2xl font-bold text-[#daa520] mb-4 font-fredoka\">Select a Voucher Type</h3>\n          <p className=\"text-gray-400 max-w-md mx-auto\">\n            Choose a voucher type above to see all active offers\n          </p>\n        </div>\n      ) : isLoading ? (\n        <div className=\"space-y-4\">\n          <h3 className=\"text-xl font-bold text-[#daa520] mb-6 font-fredoka text-center\">\n            Loading Offers...\n          </h3>\n          <div className=\"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3\">\n            {/* Skeleton Loaders - 3 cards */}\n            {[1, 2, 3].map((i) => (\n              <OfferCardSkeleton key={i} />\n            ))}\n          </div>\n        </div>\n      ) : offerIds.length === 0 ? (\n        <div className=\"text-center py-24\">\n          <div className=\"text-8xl mb-6\">üíº</div>\n          <h3 className=\"text-2xl font-bold text-[#daa520] mb-4 font-fredoka\">No Active Offers</h3>\n          <p className=\"text-gray-400 max-w-md mx-auto\">\n            No one has made offers on this voucher type yet. Be the first!\n          </p>\n        </div>\n      ) : (\n        <OffersList\n          offerIds={offerIds}\n          onSuccess={refetch}\n          userBalance={userBalance}\n        />\n      )}\n    </div>\n  )\n}\n\n/**\n * Display list of offers given their IDs\n */\nfunction OffersList({\n  offerIds,\n  onSuccess,\n  userBalance,\n}: {\n  offerIds: bigint[]\n  onSuccess: () => void\n  userBalance: bigint\n}) {\n  const [activeOfferCount, setActiveOfferCount] = useState(0)\n\n  // Reset counter when offer list changes\n  useEffect(() => {\n    setActiveOfferCount(0)\n  }, [offerIds])\n\n  return (\n    <div>\n      {activeOfferCount > 0 && (\n        <h3 className=\"text-xl font-bold text-[#daa520] mb-6 font-fredoka text-center\">\n          Active Offers ({activeOfferCount})\n        </h3>\n      )}\n      <div className={`grid gap-6 ${\n        activeOfferCount === 1 ? 'grid-cols-1 max-w-md mx-auto' :\n        activeOfferCount === 2 ? 'grid-cols-1 sm:grid-cols-2 max-w-4xl mx-auto' :\n        'grid-cols-1 sm:grid-cols-2 lg:grid-cols-3'\n      }`}>\n        {offerIds.map((offerId) => (\n          <OfferItem\n            key={offerId.toString()}\n            offerId={offerId}\n            onSuccess={onSuccess}\n            userBalance={userBalance}\n            onActiveChange={(isActive) => {\n              if (isActive) setActiveOfferCount(prev => prev + 1)\n            }}\n          />\n        ))}\n      </div>\n\n      {/* Empty State - All offers inactive */}\n      {offerIds.length > 0 && activeOfferCount === 0 && (\n        <div className=\"text-center py-16\">\n          <div className=\"text-7xl mb-4\">‚è≥</div>\n          <h3 className=\"text-2xl font-bold text-[#daa520] mb-3 font-fredoka\">\n            All Offers Inactive\n          </h3>\n          <p className=\"text-gray-400 max-w-md mx-auto\">\n            All offers for this voucher have been accepted, cancelled, or expired.\n            Check back later for new offers!\n          </p>\n        </div>\n      )}\n    </div>\n  )\n}\n\n/**\n * Individual offer item that fetches and displays offer details\n */\nfunction OfferItem({\n  offerId,\n  onSuccess,\n  userBalance,\n  onActiveChange,\n}: {\n  offerId: bigint\n  onSuccess: () => void\n  userBalance: bigint\n  onActiveChange?: (isActive: boolean) => void\n}) {\n  const { offer, isLoading } = useOfferDetails(offerId)\n  const hasNotified = useRef(false)\n\n  // Check if user can accept this offer\n  const canAccept = offer && userBalance >= offer.amount\n\n  // Notify parent when we know if this offer is active (only once)\n  useEffect(() => {\n    if (!isLoading && offer && offer.active && onActiveChange && !hasNotified.current) {\n      onActiveChange(true)\n      hasNotified.current = true\n    }\n  }, [isLoading, offer, onActiveChange])\n\n  if (isLoading || !offer || !offer.active) {\n    return null // Don't show inactive or loading offers\n  }\n\n  return <OfferCard offer={offer} onSuccess={onSuccess} canAccept={canAccept} />\n}\n\n/**\n * Skeleton loader that matches OfferCard layout\n * Provides visual feedback during offer data fetching\n */\nfunction OfferCardSkeleton() {\n  return (\n    <div className=\"bg-gradient-to-br from-[#daa520]/10 to-yellow-600/10 rounded-lg border border-[#daa520]/20 animate-pulse\">\n      <div className=\"p-6 space-y-4\">\n        {/* Media Skeleton */}\n        <div className=\"relative w-full h-48 rounded-lg bg-gray-800/50\" />\n\n        {/* Title Skeleton */}\n        <div className=\"text-center\">\n          <div className=\"h-6 bg-gray-800/50 rounded w-2/3 mx-auto\" />\n        </div>\n\n        {/* Details Skeleton */}\n        <div className=\"space-y-2\">\n          <div className=\"flex justify-between\">\n            <div className=\"h-4 bg-gray-800/50 rounded w-20\" />\n            <div className=\"h-4 bg-gray-800/50 rounded w-24\" />\n          </div>\n          <div className=\"flex justify-between\">\n            <div className=\"h-4 bg-gray-800/50 rounded w-20\" />\n            <div className=\"h-4 bg-gray-800/50 rounded w-16\" />\n          </div>\n          <div className=\"flex justify-between\">\n            <div className=\"h-4 bg-gray-800/50 rounded w-24\" />\n            <div className=\"h-4 bg-gray-800/50 rounded w-20\" />\n          </div>\n          <div className=\"flex justify-between border-t border-gray-800 pt-2 mt-2\">\n            <div className=\"h-4 bg-gray-800/50 rounded w-16\" />\n            <div className=\"h-5 bg-gray-800/50 rounded w-24\" />\n          </div>\n        </div>\n\n        {/* Button Skeleton */}\n        <div className=\"mt-4 h-12 bg-gray-800/50 rounded-lg\" />\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5883, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/components/marketplace/MakeOfferForm.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport Image from 'next/image'\nimport { useAccount } from 'wagmi'\nimport { useKektvOffers } from '@/lib/hooks/useKektvOffers'\nimport { useAllVoucherMetadata } from '@/lib/hooks/useVoucherMetadata'\nimport { useVoucherHolders } from '@/lib/hooks/useVoucherHolders'\nimport { VOUCHER_IDS, meetsMinimumOffer } from '@/config/contracts/kektv-offers'\n\n// Only show voucher IDs 1, 2, and 3 (exclude 0)\n// No placeholder names - will use metadata from NFT contract\nconst VOUCHER_OPTIONS = [\n  { id: VOUCHER_IDS.SILVER, fallbackIcon: 'ü•à', color: 'gray' },\n  { id: VOUCHER_IDS.GOLD, fallbackIcon: 'ü•á', color: 'gray' },\n  { id: VOUCHER_IDS.PLATINUM, fallbackIcon: 'üí†', color: 'gray' },\n]\n\n/**\n * Form to create new offers on KEKTV vouchers (V2 - BASED Payments)\n * User selects voucher type, quantity, and total BASED to offer\n * No token approval needed - just send BASED!\n */\nexport function MakeOfferForm() {\n  const { address } = useAccount()\n  const { makeOffer, isPending } = useKektvOffers()\n  const { metadataMap } = useAllVoucherMetadata()\n\n  const [selectedVoucher, setSelectedVoucher] = useState<number | null>(null)\n  const [amount, setAmount] = useState('')\n  const [totalBased, setTotalBased] = useState('')\n\n  // Fetch live holder data for selected voucher\n  const { holders, totalSupply, holderCount, isLoading: holdersLoading } = useVoucherHolders(selectedVoucher)\n\n  const handleMakeOffer = async () => {\n    if (selectedVoucher === null || !amount || !totalBased) {\n      alert('Please fill in all fields')\n      return\n    }\n\n    const amountBigInt = BigInt(amount)\n    const totalBasedBigInt = BigInt(Math.floor(Number(totalBased) * 100)) / 100n // Round to 2 decimals\n\n    // Check minimum offer value\n    if (!meetsMinimumOffer(amountBigInt, totalBasedBigInt * BigInt(10 ** 18))) {\n      alert('Offer total must be at least 0.001 BASED')\n      return\n    }\n\n    try {\n      await makeOffer(selectedVoucher, amountBigInt, totalBased)\n      alert('Offer created successfully! BASED escrowed in contract.')\n\n      // Reset form\n      setSelectedVoucher(null)\n      setAmount('')\n      setTotalBased('')\n    } catch (error) {\n      alert(`Make offer failed: ${error instanceof Error ? error.message : 'Unknown error'}`)\n    }\n  }\n\n  if (!address) {\n    return (\n      <div className=\"text-center py-24\">\n        <div className=\"text-8xl mb-6\">üîå</div>\n        <h3 className=\"text-2xl font-bold text-[#daa520] mb-4 font-fredoka\">Connect Your Wallet</h3>\n        <p className=\"text-gray-400 max-w-md mx-auto\">\n          Connect your wallet to make offers on KEKTV vouchers\n        </p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"max-w-2xl mx-auto space-y-6\">\n      {/* Make Offer Form */}\n      <div className=\"bg-gray-900/60 rounded-lg border border-[#daa520]/20 p-6\">\n        <h3 className=\"text-2xl font-bold text-[#daa520] mb-6 font-fredoka\">\n          Make an Offer\n        </h3>\n\n        <div className=\"space-y-4\">\n          {/* Select Voucher Type */}\n          <div>\n            <label className=\"block text-gray-400 mb-3 text-center\">Select Voucher Type</label>\n            <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\n              {VOUCHER_OPTIONS.map((voucher) => {\n                const metadata = metadataMap[voucher.id]\n                const mediaUrl = metadata?.animation_url || metadata?.image\n                const voucherName = metadata?.name || voucher.fallbackIcon // Use metadata name if available\n                const isSelected = selectedVoucher === voucher.id\n\n                return (\n                  <button\n                    key={voucher.id}\n                    onClick={() => setSelectedVoucher(voucher.id)}\n                    className={`\n                      bg-gradient-to-br from-[#daa520]/10 to-yellow-600/10 rounded-lg border overflow-hidden transition-all\n                      ${isSelected\n                        ? 'border-[#daa520] ring-2 ring-[#daa520]/50 shadow-lg shadow-[#daa520]/20'\n                        : 'border-[#daa520]/20 hover:border-[#daa520]/40'\n                      }\n                    `}\n                  >\n                    <div className=\"p-4\">\n                      {/* Voucher Media */}\n                      {mediaUrl ? (\n                        <div className=\"relative w-full h-32 rounded-lg overflow-hidden bg-black/20 mb-3\">\n                          <Image\n                            src={mediaUrl}\n                            alt={voucherName}\n                            fill\n                            className=\"object-contain\"\n                            unoptimized\n                          />\n                        </div>\n                      ) : (\n                        <div className=\"text-center mb-3\">\n                          <div className=\"text-5xl mb-2\">{voucher.fallbackIcon}</div>\n                        </div>\n                      )}\n\n                      {/* Voucher Name */}\n                      <div className=\"text-center\">\n                        <div className=\"font-bold text-[#daa520] font-fredoka\">\n                          {voucherName}\n                        </div>\n                        {isSelected && (\n                          <div className=\"text-xs text-[#daa520] mt-1\">\n                            ‚úì Selected\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </button>\n                )\n              })}\n            </div>\n          </div>\n\n          {/* Amount */}\n          <div>\n            <label className=\"block text-gray-400 mb-2\">Quantity</label>\n            <input\n              type=\"number\"\n              min=\"1\"\n              value={amount}\n              onChange={(e) => setAmount(e.target.value)}\n              placeholder=\"Enter quantity (e.g., 3)\"\n              className=\"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-[#daa520] focus:outline-none\"\n            />\n          </div>\n\n          {/* Total BASED */}\n          <div>\n            <label className=\"block text-gray-400 mb-2\">Total BASED to Offer</label>\n            <input\n              type=\"number\"\n              min=\"0.001\"\n              step=\"0.001\"\n              value={totalBased}\n              onChange={(e) => setTotalBased(e.target.value)}\n              placeholder=\"Enter total BASED (e.g., 500)\"\n              className=\"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-[#daa520] focus:outline-none\"\n            />\n            <div className=\"text-xs text-gray-500 mt-1\">\n              Minimum total offer: 0.001 BASED\n            </div>\n          </div>\n\n          {/* Price Per Voucher Preview */}\n          {amount && totalBased && (\n            <div className=\"bg-[#daa520]/10 border border-[#daa520]/30 rounded-lg p-4\">\n              <div className=\"space-y-2\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-400\">Total BASED:</span>\n                  <span className=\"text-2xl font-bold text-[#daa520]\">\n                    {Number(totalBased).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} BASED\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center text-sm\">\n                  <span className=\"text-gray-400\">Price Per Voucher:</span>\n                  <span className=\"text-gray-300\">\n                    {(Number(totalBased) / Number(amount)).toFixed(3)} BASED\n                  </span>\n                </div>\n              </div>\n              <div className=\"text-xs text-gray-500 mt-2\">\n                BASED will be escrowed in contract until offer is accepted or canceled\n              </div>\n            </div>\n          )}\n\n          {/* Holder Information (when voucher selected) */}\n          {selectedVoucher !== null && (\n            <div className=\"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"text-blue-400 font-fredoka font-bold\">üìä Market Info</div>\n                </div>\n                {!holdersLoading && (\n                  <div className=\"text-xs text-gray-400\">\n                    {holderCount} holders ‚Ä¢ {totalSupply.toString()} total\n                  </div>\n                )}\n              </div>\n\n              {holdersLoading ? (\n                <div className=\"text-center py-4\">\n                  <div className=\"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-blue-400 mx-auto mb-2\"></div>\n                  <p className=\"text-xs text-gray-500\">Loading holder data...</p>\n                </div>\n              ) : holders.length === 0 ? (\n                <div className=\"text-center py-4 text-gray-500 text-sm\">\n                  No current holders\n                </div>\n              ) : (\n                <>\n                  <div className=\"text-xs text-gray-400 mb-3\">\n                    üí° <strong>General Offer:</strong> Any holder below can accept (first come, first served)\n                  </div>\n                  <div className=\"space-y-1 max-h-48 overflow-y-auto\">\n                    {holders.slice(0, 5).map((holder, index) => (\n                      <div\n                        key={holder.address}\n                        className=\"flex items-center justify-between p-2 bg-black/20 rounded text-xs\"\n                      >\n                        <div className=\"flex items-center gap-2\">\n                          <span className=\"text-gray-500\">#{index + 1}</span>\n                          <span className=\"font-mono text-gray-300\">\n                            {holder.address.slice(0, 6)}...{holder.address.slice(-4)}\n                          </span>\n                        </div>\n                        <span className=\"text-blue-400 font-bold\">\n                          {holder.balance.toString()}√ó\n                        </span>\n                      </div>\n                    ))}\n                    {holders.length > 5 && (\n                      <div className=\"text-center text-xs text-gray-500 mt-2\">\n                        +{holders.length - 5} more holders\n                      </div>\n                    )}\n                  </div>\n                </>\n              )}\n            </div>\n          )}\n\n          {/* Make Offer Button */}\n          <button\n            onClick={handleMakeOffer}\n            disabled={isPending || !selectedVoucher || !amount || !totalBased}\n            className={`\n              w-full py-4 rounded-lg font-fredoka font-bold text-lg transition-all\n              ${isPending || !selectedVoucher || !amount || !totalBased\n                ? 'bg-gray-700 text-gray-500 cursor-not-allowed'\n                : 'bg-gradient-to-r from-[#daa520] to-yellow-600 text-black hover:scale-105 shadow-lg shadow-[#daa520]/20'\n              }\n            `}\n          >\n            {isPending ? '‚è≥ Creating Offer...' : 'üí∞ Make Offer with BASED'}\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6470, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/components/marketplace/OffersView.tsx"],"sourcesContent":["'use client'\nimport { useState } from 'react'\nimport { BrowseOffers } from './BrowseOffers'\nimport { MakeOfferForm } from './MakeOfferForm'\n\ntype OfferView = 'marketplace' | 'create'\n\n/**\n * Main container for the Offers system with compact layout\n *\n * Architecture:\n * - All Offers: Browse all offers with smart \"For You\" filtering\n * - Create Offer: Make new offers\n *\n * Note: \"My Activity\" moved to dedicated \"My Trading Activity\" page\n */\nexport function OffersView() {\n  const [activeView, setActiveView] = useState<OfferView>('marketplace')\n\n  return (\n    <div className=\"max-w-7xl mx-auto\">\n      {/* Compact Horizontal Navigation Bar - STICKY */}\n      <div className=\"sticky top-0 z-20 bg-black/90 backdrop-blur-sm border-b border-gray-700/50\">\n        <div className=\"flex items-center justify-around py-4 px-6\">\n          {/* All Offers Button */}\n          <button\n            onClick={() => setActiveView('marketplace')}\n            className={`flex items-center gap-3 px-6 py-2 rounded-lg transition-all cursor-pointer ${\n              activeView === 'marketplace'\n                ? 'bg-[#daa520]/20 border border-[#daa520]/50'\n                : 'border border-transparent hover:bg-gray-800/50'\n            }`}\n          >\n            <span className=\"text-3xl\">üè™</span>\n            <div className=\"text-left\">\n              <div className=\"text-2xl font-bold text-[#daa520]\">All Offers</div>\n              <div className=\"text-xs text-gray-400 whitespace-nowrap\">Browse marketplace</div>\n            </div>\n          </button>\n\n          {/* Create Offer Button */}\n          <button\n            onClick={() => setActiveView('create')}\n            className={`flex items-center gap-3 px-6 py-2 rounded-lg transition-all cursor-pointer ${\n              activeView === 'create'\n                ? 'bg-[#daa520]/20 border border-[#daa520]/50'\n                : 'border border-transparent hover:bg-gray-800/50'\n            }`}\n          >\n            <span className=\"text-3xl\">‚ûï</span>\n            <div className=\"text-left\">\n              <div className=\"text-2xl font-bold text-[#daa520]\">Create Offer</div>\n              <div className=\"text-xs text-gray-400 whitespace-nowrap\">Make new offer</div>\n            </div>\n          </button>\n        </div>\n      </div>\n\n      {/* Content Area */}\n      <div className=\"p-6\">\n        {activeView === 'marketplace' && <BrowseOffers />}\n        {activeView === 'create' && <MakeOfferForm />}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAgBO,SAAS;IACd,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,sQAAQ,EAAY;IAExD,qBACE,mSAAC;QAAI,WAAU;;0BAEb,mSAAC;gBAAI,WAAU;0BACb,cAAA,mSAAC;oBAAI,WAAU;;sCAEb,mSAAC;4BACC,SAAS,IAAM,cAAc;4BAC7B,WAAW,CAAC,2EAA2E,EACrF,eAAe,gBACX,+CACA,kDACJ;;8CAEF,mSAAC;oCAAK,WAAU;8CAAW;;;;;;8CAC3B,mSAAC;oCAAI,WAAU;;sDACb,mSAAC;4CAAI,WAAU;sDAAoC;;;;;;sDACnD,mSAAC;4CAAI,WAAU;sDAA0C;;;;;;;;;;;;;;;;;;sCAK7D,mSAAC;4BACC,SAAS,IAAM,cAAc;4BAC7B,WAAW,CAAC,2EAA2E,EACrF,eAAe,WACX,+CACA,kDACJ;;8CAEF,mSAAC;oCAAK,WAAU;8CAAW;;;;;;8CAC3B,mSAAC;oCAAI,WAAU;;sDACb,mSAAC;4CAAI,WAAU;sDAAoC;;;;;;sDACnD,mSAAC;4CAAI,WAAU;sDAA0C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAOjE,mSAAC;gBAAI,WAAU;;oBACZ,eAAe,+BAAiB,mSAAC,+MAAY;;;;;oBAC7C,eAAe,0BAAY,mSAAC,iNAAa;;;;;;;;;;;;;;;;;AAIlD","debugId":null}},
    {"offset": {"line": 6620, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/lib/services/explorer-api.ts"],"sourcesContent":["/**\n * BasedAI Explorer API Service\n *\n * Fetches historical event data from the BasedAI blockchain explorer.\n * Uses the Blockscout API to query contract events without running a backend.\n *\n * Events tracked:\n *\n * OFFER EVENTS (KektvOffers contract):\n * - OfferMade: When someone creates a new offer\n * - OfferAccepted: When a voucher owner accepts an offer\n * - OfferCancelled: When the offerer cancels their offer\n * - OfferRejected: When a voucher owner rejects an offer\n *\n * MARKETPLACE EVENTS (KektvMarketplace contract):\n * - VoucherSold: When someone buys from a listing\n * - VoucherListed: When someone lists a voucher for sale\n * - ListingCancelled: When a seller cancels their listing\n */\n\nimport { AbiCoder } from 'ethers'\n\n// BasedAI Explorer API endpoint\nconst EXPLORER_API = 'https://explorer.bf1337.org/api'\n\n// KEKTV Offers V3 Contract Address (Current - Bug Fix Deployed 2025-10-27)\n// V3 Fix: General offers now work correctly (checks msg.sender balance instead of 0x0)\n// Previous V2 address (DEPRECATED - had general offers bug): 0x4E8B375C717a136882071923F17Ea08E75DDBcb2\nconst KEKTV_OFFERS_ADDRESS = '0xee8dc29237d46eff1518bb0503d7f782b651a04e'\n\n// KEKTV Marketplace V6 Contract Address\nconst KEKTV_MARKETPLACE_ADDRESS = '0x2d79106D60f92F3a6b7B17E3cAd3Df0D4bdcE062'\n\n/**\n * Event signatures (keccak256 hash of event definition)\n * These are used to filter events by type\n * UPDATED: Fixed signatures to match actual contract events from blockchain\n */\nexport const EVENT_SIGNATURES = {\n  // === OFFER EVENTS (from KektvOffers contract) ===\n  // OfferMade(uint256 indexed offerId, address indexed offerer, address indexed voucherOwner, uint256 tokenId, uint256 amount, uint256 offerPrice)\n  OfferMade: '0x1a8e4806e9c3198b224bf5fd328ba7488ee72334ba823076cf52dbfce562ffae',\n\n  // OfferAccepted(uint256 indexed offerId, address indexed offerer, address indexed voucherOwner, uint256 tokenId, uint256 amount, uint256 offerPrice)\n  OfferAccepted: '0x1f514add757f76c3e97bed00e66989c1e7bdf8b4d2d9c0cc2b122fe33f3d1c43',\n\n  // OfferCancelled(uint256 indexed offerId, address indexed offerer)\n  OfferCancelled: '0x1f51377b3e685a0e2419f9bb4ba7c07ec54936353ba3d0fb3c6538dab6766222',\n\n  // OfferRejected(uint256 indexed offerId, address indexed voucherOwner)\n  OfferRejected: '0x0a2e4bd6e1f84e8c8e24e5097f098f3e7c6a1c8a0e2f9b0e8c7d3a4b5c6e7f8a',\n\n  // === MARKETPLACE EVENTS (from KektvMarketplace contract) ===\n  // VoucherSold(address indexed seller, address indexed buyer, uint256 indexed tokenId, uint256 amount, uint256 totalPrice)\n  VoucherSold: '0xecce07a667f396cfd44218046bbb9ae45de559f1c2e3eedbc8da5677ce81df04',\n\n  // VoucherListed(address indexed seller, uint256 indexed tokenId, uint256 amount, uint256 pricePerItem)\n  VoucherListed: '0x77a394adf8c68c51dcf5377d5007758bd11b472d589f7196bf41a45d53db8d5f',\n\n  // ListingCancelled(address indexed seller, uint256 indexed tokenId)\n  ListingCancelled: '0x2e1a7d4d13322e7b96f9a57413e1525c250fb7a9021cf91d1540d5b69f16a49f',\n} as const\n\n/**\n * Event types for type safety\n */\nexport type EventType = keyof typeof EVENT_SIGNATURES\n\n/**\n * Parsed event data structures\n */\nexport interface BaseEvent {\n  blockNumber: number\n  timestamp: number\n  transactionHash: string\n  eventType: EventType\n}\n\nexport interface OfferMadeEvent extends BaseEvent {\n  eventType: 'OfferMade'\n  offerId: string\n  offerer: string\n  voucherOwner: string\n  tokenId: number\n  amount: string // in wei\n  offerPrice: string // in wei (total BASED)\n}\n\nexport interface OfferAcceptedEvent extends BaseEvent {\n  eventType: 'OfferAccepted'\n  offerId: string\n  offerer: string\n  voucherOwner: string\n  tokenId: number\n  amount: string\n  offerPrice: string\n}\n\nexport interface OfferCancelledEvent extends BaseEvent {\n  eventType: 'OfferCancelled'\n  offerId: string\n  offerer: string\n}\n\nexport interface OfferRejectedEvent extends BaseEvent {\n  eventType: 'OfferRejected'\n  offerId: string\n  voucherOwner: string\n}\n\nexport interface VoucherSoldEvent extends BaseEvent {\n  eventType: 'VoucherSold'\n  seller: string\n  buyer: string\n  tokenId: number\n  amount: string // in units (not wei)\n  totalPrice: string // in wei (BASED paid)\n}\n\nexport interface VoucherListedEvent extends BaseEvent {\n  eventType: 'VoucherListed'\n  seller: string\n  tokenId: number\n  amount: string\n  pricePerItem: string\n}\n\nexport interface ListingCancelledEvent extends BaseEvent {\n  eventType: 'ListingCancelled'\n  seller: string\n  tokenId: number\n}\n\nexport type OfferEvent = OfferMadeEvent | OfferAcceptedEvent | OfferCancelledEvent | OfferRejectedEvent\nexport type MarketplaceEvent = VoucherSoldEvent | VoucherListedEvent | ListingCancelledEvent\nexport type TradingEvent = OfferEvent | MarketplaceEvent\n\n/**\n * Raw log data from explorer API\n */\ninterface RawLog {\n  address: string\n  topics: string[]\n  data: string\n  blockNumber: string\n  timeStamp: string\n  transactionHash: string\n}\n\n/**\n * Explorer API Service Class\n */\nexport class ExplorerAPIService {\n  private abiCoder = AbiCoder.defaultAbiCoder()\n\n  /**\n   * Get all trading events (both offers and marketplace)\n   * @param fromBlock - Starting block number (default: 0)\n   * @param toBlock - Ending block (default: 'latest')\n   */\n  async getAllEvents(fromBlock: number | string = 0, toBlock: string = 'latest'): Promise<TradingEvent[]> {\n    // Fetch from both contracts in parallel\n    const [offerEvents, marketplaceEvents] = await Promise.all([\n      this.getOfferEvents(fromBlock, toBlock),\n      this.getMarketplaceEvents(fromBlock, toBlock),\n    ])\n\n    // Combine and sort by timestamp (newest first)\n    const allEvents = [...offerEvents, ...marketplaceEvents]\n    return allEvents.sort((a, b) => b.timestamp - a.timestamp)\n  }\n\n  /**\n   * Get events from KEKTV Offers contract only\n   */\n  private async getOfferEvents(fromBlock: number | string = 0, toBlock: string = 'latest'): Promise<OfferEvent[]> {\n    const url = new URL(EXPLORER_API)\n    url.searchParams.set('module', 'logs')\n    url.searchParams.set('action', 'getLogs')\n    url.searchParams.set('fromBlock', fromBlock.toString())\n    url.searchParams.set('toBlock', toBlock)\n    url.searchParams.set('address', KEKTV_OFFERS_ADDRESS)\n\n    const response = await fetch(url.toString())\n    const data = await response.json()\n\n    if (data.status === '1' && Array.isArray(data.result)) {\n      return data.result.map((log: RawLog) => this.parseLog(log)).filter((e: TradingEvent | null): e is OfferEvent => e !== null && 'offerId' in e)\n    }\n\n    return []\n  }\n\n  /**\n   * Get events from KEKTV Marketplace contract only\n   */\n  private async getMarketplaceEvents(fromBlock: number | string = 0, toBlock: string = 'latest'): Promise<MarketplaceEvent[]> {\n    const url = new URL(EXPLORER_API)\n    url.searchParams.set('module', 'logs')\n    url.searchParams.set('action', 'getLogs')\n    url.searchParams.set('fromBlock', fromBlock.toString())\n    url.searchParams.set('toBlock', toBlock)\n    url.searchParams.set('address', KEKTV_MARKETPLACE_ADDRESS)\n\n    const response = await fetch(url.toString())\n    const data = await response.json()\n\n    if (data.status === '1' && Array.isArray(data.result)) {\n      return data.result.map((log: RawLog) => this.parseLog(log)).filter((e: TradingEvent | null): e is MarketplaceEvent => e !== null && ('seller' in e || 'buyer' in e))\n    }\n\n    return []\n  }\n\n  /**\n   * Get events by specific type\n   * @param eventType - Type of event to fetch\n   * @param fromBlock - Starting block\n   */\n  async getEventsByType(eventType: EventType, fromBlock: number | string = 0): Promise<TradingEvent[]> {\n    // Determine which contract address to use based on event type\n    const isMarketplaceEvent = ['VoucherSold', 'VoucherListed', 'ListingCancelled'].includes(eventType)\n    const contractAddress = isMarketplaceEvent ? KEKTV_MARKETPLACE_ADDRESS : KEKTV_OFFERS_ADDRESS\n\n    const url = new URL(EXPLORER_API)\n    url.searchParams.set('module', 'logs')\n    url.searchParams.set('action', 'getLogs')\n    url.searchParams.set('fromBlock', fromBlock.toString())\n    url.searchParams.set('toBlock', 'latest')\n    url.searchParams.set('address', contractAddress)\n    url.searchParams.set('topic0', EVENT_SIGNATURES[eventType])\n\n    const response = await fetch(url.toString())\n    const data = await response.json()\n\n    if (data.status === '1' && Array.isArray(data.result)) {\n      return data.result.map((log: RawLog) => this.parseLog(log)).filter((e: TradingEvent | null): e is TradingEvent => e !== null)\n    }\n\n    return []\n  }\n\n  /**\n   * Get events for a specific NFT (by tokenId)\n   * Includes both offer events and marketplace events\n   * @param tokenId - NFT token ID\n   */\n  async getEventsForToken(tokenId: number): Promise<TradingEvent[]> {\n    const allEvents = await this.getAllEvents()\n\n    return allEvents.filter((event) => {\n      if ('tokenId' in event) {\n        return event.tokenId === tokenId\n      }\n      return false\n    })\n  }\n\n  /**\n   * Get events by user address (offerer, voucherOwner, seller, or buyer)\n   * Includes both offer events and marketplace events\n   * @param userAddress - User's wallet address\n   */\n  async getEventsByUser(userAddress: string): Promise<TradingEvent[]> {\n    const allEvents = await this.getAllEvents()\n    const normalizedAddress = userAddress.toLowerCase()\n\n    return allEvents.filter((event) => {\n      // Offer events\n      if ('offerer' in event && event.offerer.toLowerCase() === normalizedAddress) {\n        return true\n      }\n      if ('voucherOwner' in event && event.voucherOwner.toLowerCase() === normalizedAddress) {\n        return true\n      }\n      // Marketplace events\n      if ('seller' in event && event.seller.toLowerCase() === normalizedAddress) {\n        return true\n      }\n      if ('buyer' in event && event.buyer.toLowerCase() === normalizedAddress) {\n        return true\n      }\n      return false\n    })\n  }\n\n  /**\n   * Parse raw log into typed event\n   */\n  private parseLog(log: RawLog): TradingEvent | null {\n    const signature = log.topics[0]\n    const blockNumber = parseInt(log.blockNumber, 16)\n    const timestamp = parseInt(log.timeStamp, 16)\n    const transactionHash = log.transactionHash\n\n    const baseEvent = {\n      blockNumber,\n      timestamp,\n      transactionHash,\n    }\n\n    try {\n      switch (signature) {\n        // Offer events\n        case EVENT_SIGNATURES.OfferMade:\n          return this.parseOfferMade(log, baseEvent)\n\n        case EVENT_SIGNATURES.OfferAccepted:\n          return this.parseOfferAccepted(log, baseEvent)\n\n        case EVENT_SIGNATURES.OfferCancelled:\n          return this.parseOfferCancelled(log, baseEvent)\n\n        case EVENT_SIGNATURES.OfferRejected:\n          return this.parseOfferRejected(log, baseEvent)\n\n        // Marketplace events\n        case EVENT_SIGNATURES.VoucherSold:\n          return this.parseVoucherSold(log, baseEvent)\n\n        case EVENT_SIGNATURES.VoucherListed:\n          return this.parseVoucherListed(log, baseEvent)\n\n        case EVENT_SIGNATURES.ListingCancelled:\n          return this.parseListingCancelled(log, baseEvent)\n\n        default:\n          console.warn('Unknown event signature:', signature)\n          return null\n      }\n    } catch (error) {\n      console.error('Error parsing log:', error, log)\n      return null\n    }\n  }\n\n  /**\n   * Parse OfferMade event\n   * event OfferMade(uint256 indexed offerId, address indexed offerer, address indexed voucherOwner, uint256 tokenId, uint256 amount, uint256 offerPrice)\n   */\n  private parseOfferMade(log: RawLog, baseEvent: Omit<BaseEvent, 'eventType'>): OfferMadeEvent {\n    const offerId = BigInt(log.topics[1]).toString()\n    const offerer = '0x' + log.topics[2].slice(26) // Remove padding\n    const voucherOwner = '0x' + log.topics[3].slice(26)\n\n    // Decode non-indexed parameters from data\n    const decoded = this.abiCoder.decode(['uint256', 'uint256', 'uint256'], log.data)\n\n    return {\n      ...baseEvent,\n      eventType: 'OfferMade',\n      offerId,\n      offerer,\n      voucherOwner,\n      tokenId: Number(decoded[0]),\n      amount: decoded[1].toString(),\n      offerPrice: decoded[2].toString(),\n    }\n  }\n\n  /**\n   * Parse OfferAccepted event\n   * event OfferAccepted(uint256 indexed offerId, address indexed offerer, address indexed voucherOwner, uint256 tokenId, uint256 amount, uint256 offerPrice)\n   */\n  private parseOfferAccepted(log: RawLog, baseEvent: Omit<BaseEvent, 'eventType'>): OfferAcceptedEvent {\n    const offerId = BigInt(log.topics[1]).toString()\n    const offerer = '0x' + log.topics[2].slice(26)\n    const voucherOwner = '0x' + log.topics[3].slice(26)\n\n    const decoded = this.abiCoder.decode(['uint256', 'uint256', 'uint256'], log.data)\n\n    return {\n      ...baseEvent,\n      eventType: 'OfferAccepted',\n      offerId,\n      offerer,\n      voucherOwner,\n      tokenId: Number(decoded[0]),\n      amount: decoded[1].toString(),\n      offerPrice: decoded[2].toString(),\n    }\n  }\n\n  /**\n   * Parse OfferCancelled event\n   * event OfferCancelled(uint256 indexed offerId, address indexed offerer)\n   */\n  private parseOfferCancelled(log: RawLog, baseEvent: Omit<BaseEvent, 'eventType'>): OfferCancelledEvent {\n    const offerId = BigInt(log.topics[1]).toString()\n    const offerer = '0x' + log.topics[2].slice(26)\n\n    return {\n      ...baseEvent,\n      eventType: 'OfferCancelled',\n      offerId,\n      offerer,\n    }\n  }\n\n  /**\n   * Parse OfferRejected event\n   * event OfferRejected(uint256 indexed offerId, address indexed voucherOwner)\n   */\n  private parseOfferRejected(log: RawLog, baseEvent: Omit<BaseEvent, 'eventType'>): OfferRejectedEvent {\n    const offerId = BigInt(log.topics[1]).toString()\n    const voucherOwner = '0x' + log.topics[2].slice(26)\n\n    return {\n      ...baseEvent,\n      eventType: 'OfferRejected',\n      offerId,\n      voucherOwner,\n    }\n  }\n\n  /**\n   * Parse VoucherSold event\n   * event VoucherSold(address indexed seller, address indexed buyer, uint256 indexed tokenId, uint256 amount, uint256 totalPrice)\n   */\n  private parseVoucherSold(log: RawLog, baseEvent: Omit<BaseEvent, 'eventType'>): VoucherSoldEvent {\n    const seller = '0x' + log.topics[1].slice(26)\n    const buyer = '0x' + log.topics[2].slice(26)\n    const tokenId = Number(BigInt(log.topics[3]))\n\n    // Decode non-indexed parameters from data\n    const decoded = this.abiCoder.decode(['uint256', 'uint256'], log.data)\n\n    return {\n      ...baseEvent,\n      eventType: 'VoucherSold',\n      seller,\n      buyer,\n      tokenId,\n      amount: decoded[0].toString(),\n      totalPrice: decoded[1].toString(),\n    }\n  }\n\n  /**\n   * Parse VoucherListed event\n   * event VoucherListed(address indexed seller, uint256 indexed tokenId, uint256 amount, uint256 pricePerItem)\n   */\n  private parseVoucherListed(log: RawLog, baseEvent: Omit<BaseEvent, 'eventType'>): VoucherListedEvent {\n    const seller = '0x' + log.topics[1].slice(26)\n    const tokenId = Number(BigInt(log.topics[2]))\n\n    const decoded = this.abiCoder.decode(['uint256', 'uint256'], log.data)\n\n    return {\n      ...baseEvent,\n      eventType: 'VoucherListed',\n      seller,\n      tokenId,\n      amount: decoded[0].toString(),\n      pricePerItem: decoded[1].toString(),\n    }\n  }\n\n  /**\n   * Parse ListingCancelled event\n   * event ListingCancelled(address indexed seller, uint256 indexed tokenId)\n   */\n  private parseListingCancelled(log: RawLog, baseEvent: Omit<BaseEvent, 'eventType'>): ListingCancelledEvent {\n    const seller = '0x' + log.topics[1].slice(26)\n    const tokenId = Number(BigInt(log.topics[2]))\n\n    return {\n      ...baseEvent,\n      eventType: 'ListingCancelled',\n      seller,\n      tokenId,\n    }\n  }\n\n  /**\n   * Get paginated results (handles >1000 logs limit)\n   */\n  async getAllEventsWithPagination(): Promise<TradingEvent[]> {\n    let allEvents: TradingEvent[] = []\n    let fromBlock: number | string = 0\n    let hasMore = true\n    let iterations = 0\n    const MAX_ITERATIONS = 100 // Safety limit\n\n    while (hasMore && iterations < MAX_ITERATIONS) {\n      const events = await this.getAllEvents(fromBlock)\n      allEvents = [...allEvents, ...events]\n\n      if (events.length < 1000) {\n        hasMore = false\n      } else {\n        // Get next page starting from last block + 1\n        const maxBlock = Math.max(...events.map((e) => e.blockNumber))\n        fromBlock = maxBlock + 1\n      }\n\n      iterations++\n    }\n\n    // Remove duplicates (same transaction hash + event type)\n    const uniqueEvents = allEvents.filter(\n      (event, index, self) =>\n        index ===\n        self.findIndex(\n          (e) => e.transactionHash === event.transactionHash && e.eventType === event.eventType\n        )\n    )\n\n    return uniqueEvents\n  }\n}\n\n/**\n * Singleton instance\n */\nexport const explorerAPI = new ExplorerAPIService()\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6990, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/lib/hooks/useOfferHistory.ts"],"sourcesContent":["/**\n * React hooks for fetching and managing offer history\n * Uses the BasedAI Explorer API to get historical event data\n */\n\nimport { useQuery } from '@tanstack/react-query'\nimport { useAccount } from 'wagmi'\nimport { explorerAPI, type TradingEvent, type EventType } from '@/lib/services/explorer-api'\nimport { useMemo } from 'react'\n\n/**\n * Offer timeline entry with complete history\n */\nexport interface OfferTimeline {\n  offerId: string\n  tokenId: number\n  offerer: string\n  voucherOwner: string\n  amount: string\n  offerPrice: string\n  status: 'active' | 'accepted' | 'cancelled' | 'rejected'\n  createdAt: number\n  resolvedAt?: number\n  events: TradingEvent[]\n}\n\n/**\n * NFT statistics\n */\nexport interface NFTStats {\n  totalOffers: number\n  acceptedOffers: number\n  cancelledOffers: number\n  rejectedOffers: number\n  activeOffers: number\n  totalVolume: bigint // Total BASED traded\n  averagePrice: bigint // Average offer price\n  lastSalePrice?: bigint\n  lastSaleDate?: number\n}\n\n/**\n * Get complete offer history for a specific NFT\n */\nexport function useNFTHistory(tokenId: number | null) {\n  return useQuery({\n    queryKey: ['nft-history', tokenId],\n    queryFn: () => explorerAPI.getEventsForToken(tokenId!),\n    enabled: tokenId !== null,\n    staleTime: 30000, // 30 seconds\n    refetchInterval: 60000, // Refetch every minute\n  })\n}\n\n/**\n * Get offer history for the connected user\n */\nexport function useUserHistory(userAddress?: `0x${string}`) {\n  return useQuery({\n    queryKey: ['user-history', userAddress],\n    queryFn: () => explorerAPI.getEventsByUser(userAddress!),\n    enabled: !!userAddress,\n    staleTime: 30000,\n    refetchInterval: 60000,\n  })\n}\n\n/**\n * Get all events of a specific type\n */\nexport function useEventsByType(eventType: EventType) {\n  return useQuery({\n    queryKey: ['events-by-type', eventType],\n    queryFn: () => explorerAPI.getEventsByType(eventType),\n    staleTime: 30000,\n    refetchInterval: 60000,\n  })\n}\n\n/**\n * Get all offer events (complete history)\n */\nexport function useAllOfferEvents() {\n  return useQuery({\n    queryKey: ['all-offer-events'],\n    queryFn: () => explorerAPI.getAllEventsWithPagination(),\n    staleTime: 60000, // 1 minute\n    refetchInterval: 120000, // Refetch every 2 minutes\n  })\n}\n\n/**\n * Process events into offer timeline (groups events by offer ID)\n */\nexport function useOfferTimeline(tokenId: number | null) {\n  const { data: events, isLoading, error } = useNFTHistory(tokenId)\n\n  const timeline = useMemo((): OfferTimeline[] => {\n    if (!events || events.length === 0) return []\n\n    // Group events by offer ID (only process offer events, not marketplace events)\n    const offerMap = new Map<string, OfferTimeline>()\n\n    events.forEach((event) => {\n      // Skip marketplace events - they don't have offerId\n      if (event.eventType === 'VoucherSold' || event.eventType === 'VoucherListed' || event.eventType === 'ListingCancelled') {\n        return\n      }\n\n      let offerId: string\n      let offer: OfferTimeline\n\n      if (event.eventType === 'OfferMade') {\n        offerId = event.offerId\n\n        // Create new offer timeline\n        offer = {\n          offerId: event.offerId,\n          tokenId: event.tokenId,\n          offerer: event.offerer,\n          voucherOwner: event.voucherOwner,\n          amount: event.amount,\n          offerPrice: event.offerPrice,\n          status: 'active',\n          createdAt: event.timestamp,\n          events: [event],\n        }\n        offerMap.set(offerId, offer)\n      } else {\n        // For other offer events (Accepted, Cancelled, Rejected)\n        if (!('offerId' in event)) return // Type guard\n\n        offerId = event.offerId\n        offer = offerMap.get(offerId)!\n\n        if (offer) {\n          // Add event to existing offer\n          offer.events.push(event)\n\n          // Update status based on event type\n          if (event.eventType === 'OfferAccepted') {\n            offer.status = 'accepted'\n            offer.resolvedAt = event.timestamp\n          } else if (event.eventType === 'OfferCancelled') {\n            offer.status = 'cancelled'\n            offer.resolvedAt = event.timestamp\n          } else if (event.eventType === 'OfferRejected') {\n            offer.status = 'rejected'\n            offer.resolvedAt = event.timestamp\n          }\n        }\n      }\n    })\n\n    // Sort by creation time (newest first)\n    return Array.from(offerMap.values()).sort((a, b) => b.createdAt - a.createdAt)\n  }, [events])\n\n  return { timeline, isLoading, error }\n}\n\n/**\n * Calculate NFT statistics from events\n */\nexport function useNFTStats(tokenId: number | null) {\n  const { data: events, isLoading } = useNFTHistory(tokenId)\n\n  const stats = useMemo((): NFTStats | null => {\n    if (!events || events.length === 0) return null\n\n    let totalOffers = 0\n    let acceptedOffers = 0\n    let cancelledOffers = 0\n    let rejectedOffers = 0\n    let totalVolume = BigInt(0)\n    let lastSalePrice: bigint | undefined\n    let lastSaleDate: number | undefined\n\n    // Track offer statuses\n    const offerStatuses = new Map<string, 'accepted' | 'cancelled' | 'rejected' | 'active'>()\n\n    events.forEach((event) => {\n      if (event.eventType === 'OfferMade') {\n        totalOffers++\n        offerStatuses.set(event.offerId, 'active')\n      } else if (event.eventType === 'OfferAccepted') {\n        offerStatuses.set(event.offerId, 'accepted')\n        totalVolume += BigInt(event.offerPrice)\n        lastSalePrice = BigInt(event.offerPrice)\n        lastSaleDate = event.timestamp\n      } else if (event.eventType === 'OfferCancelled') {\n        offerStatuses.set(event.offerId, 'cancelled')\n      } else if (event.eventType === 'OfferRejected') {\n        offerStatuses.set(event.offerId, 'rejected')\n      }\n    })\n\n    // Count final statuses\n    offerStatuses.forEach((status) => {\n      if (status === 'accepted') acceptedOffers++\n      else if (status === 'cancelled') cancelledOffers++\n      else if (status === 'rejected') rejectedOffers++\n    })\n\n    const activeOffers = totalOffers - acceptedOffers - cancelledOffers - rejectedOffers\n\n    // Calculate average price (only from accepted offers)\n    const averagePrice = acceptedOffers > 0 ? totalVolume / BigInt(acceptedOffers) : BigInt(0)\n\n    return {\n      totalOffers,\n      acceptedOffers,\n      cancelledOffers,\n      rejectedOffers,\n      activeOffers,\n      totalVolume,\n      averagePrice,\n      lastSalePrice,\n      lastSaleDate,\n    }\n  }, [events])\n\n  return { stats, isLoading }\n}\n\n/**\n * Get user's offer and marketplace statistics\n */\nexport function useUserStats(userAddress?: `0x${string}`) {\n  const { data: events, isLoading } = useUserHistory(userAddress)\n\n  const stats = useMemo(() => {\n    if (!events || events.length === 0) {\n      return {\n        offersMade: 0,\n        offersReceived: 0,\n        offersAccepted: 0,\n        offersCancelled: 0,\n        offersRejected: 0,\n        vouchersSold: 0,\n        vouchersListed: 0,\n        listingsCancelled: 0,\n        totalSpent: BigInt(0),\n        totalEarned: BigInt(0),\n      }\n    }\n\n    let offersMade = 0\n    let offersReceived = 0\n    let offersAccepted = 0\n    let offersCancelled = 0\n    let offersRejected = 0\n    let vouchersSold = 0\n    let vouchersListed = 0\n    let listingsCancelled = 0\n    let totalSpent = BigInt(0)\n    let totalEarned = BigInt(0)\n\n    const normalizedAddress = userAddress?.toLowerCase()\n\n    events.forEach((event) => {\n      // Offer events\n      if (event.eventType === 'OfferMade') {\n        if ('offerer' in event && event.offerer.toLowerCase() === normalizedAddress) {\n          offersMade++\n        }\n        if (\n          'voucherOwner' in event &&\n          event.voucherOwner.toLowerCase() === normalizedAddress &&\n          event.voucherOwner !== '0x0000000000000000000000000000000000000000'\n        ) {\n          offersReceived++\n        }\n      } else if (event.eventType === 'OfferAccepted') {\n        offersAccepted++\n        if ('offerer' in event && event.offerer.toLowerCase() === normalizedAddress) {\n          totalSpent += BigInt(event.offerPrice)\n        }\n        if ('voucherOwner' in event && event.voucherOwner.toLowerCase() === normalizedAddress) {\n          totalEarned += BigInt(event.offerPrice)\n        }\n      } else if (event.eventType === 'OfferCancelled') {\n        if ('offerer' in event && event.offerer.toLowerCase() === normalizedAddress) {\n          offersCancelled++\n        }\n      } else if (event.eventType === 'OfferRejected') {\n        if ('voucherOwner' in event && event.voucherOwner.toLowerCase() === normalizedAddress) {\n          offersRejected++\n        }\n      }\n      // Marketplace events\n      else if (event.eventType === 'VoucherSold') {\n        if ('seller' in event && event.seller.toLowerCase() === normalizedAddress) {\n          vouchersSold++\n          totalEarned += BigInt(event.totalPrice)\n        }\n        if ('buyer' in event && event.buyer.toLowerCase() === normalizedAddress) {\n          totalSpent += BigInt(event.totalPrice)\n        }\n      } else if (event.eventType === 'VoucherListed') {\n        if ('seller' in event && event.seller.toLowerCase() === normalizedAddress) {\n          vouchersListed++\n        }\n      } else if (event.eventType === 'ListingCancelled') {\n        if ('seller' in event && event.seller.toLowerCase() === normalizedAddress) {\n          listingsCancelled++\n        }\n      }\n    })\n\n    return {\n      offersMade,\n      offersReceived,\n      offersAccepted,\n      offersCancelled,\n      offersRejected,\n      vouchersSold,\n      vouchersListed,\n      listingsCancelled,\n      totalSpent,\n      totalEarned,\n    }\n  }, [events, userAddress])\n\n  return { stats, isLoading }\n}\n\n/**\n * Hook to get connected user's history automatically\n */\nexport function useMyOfferHistory() {\n  const { address } = useAccount()\n  return useUserHistory(address)\n}\n\n/**\n * Hook to get connected user's stats automatically\n */\nexport function useMyStats() {\n  const { address } = useAccount()\n  return useUserStats(address)\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7289, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/lib/hooks/useVoucherBalance.ts"],"sourcesContent":["'use client'\n\nimport { useReadContract, useAccount } from 'wagmi'\nimport { KEKTECH_VOUCHERS, VOUCHER_TYPES } from '@/config/contracts'\n\n/**\n * Voucher Balance Item\n */\nexport interface VoucherBalance {\n  id: number\n  name: string\n  description: string\n  icon: string\n  imageUrl?: string\n  rarity: string\n  balance: bigint\n  balanceNumber: number\n}\n\n/**\n * useVoucherBalance Hook\n *\n * Fetches all voucher balances (ERC-1155) for connected wallet\n * Queries all known token IDs in a single batch call\n *\n * @returns Object containing voucher balances, loading state, and error state\n */\nexport function useVoucherBalance() {\n  const { address, isConnected } = useAccount()\n\n  // Prepare batch query args\n  const accounts = address\n    ? KEKTECH_VOUCHERS.knownTokenIds.map(() => address)\n    : undefined\n  const ids = KEKTECH_VOUCHERS.knownTokenIds.map((id) => BigInt(id))\n\n  // Read all voucher balances in one call\n  const {\n    data: rawBalances,\n    isLoading,\n    isError,\n    error,\n    refetch,\n  } = useReadContract({\n    address: KEKTECH_VOUCHERS.address,\n    abi: KEKTECH_VOUCHERS.abi,\n    functionName: 'balanceOfBatch',\n    args: accounts && ids.length > 0 ? [accounts, ids] : undefined,\n    query: {\n      enabled: isConnected && !!address,\n      refetchInterval: 15000, // Refresh every 15 seconds\n    },\n  })\n\n  // Process balances into structured format\n  const vouchers: VoucherBalance[] = VOUCHER_TYPES.map((voucherType, index) => {\n    const balance = rawBalances?.[index] ?? BigInt(0)\n    return {\n      id: voucherType.id,\n      name: voucherType.name,\n      description: voucherType.description,\n      icon: voucherType.icon,\n      imageUrl: voucherType.imageUrl,\n      rarity: voucherType.rarity,\n      balance,\n      balanceNumber: Number(balance),\n    }\n  })\n\n  // Filter to only vouchers with non-zero balance\n  const ownedVouchers = vouchers.filter((v) => v.balanceNumber > 0)\n\n  // Total voucher count across all types\n  const totalVouchers = vouchers.reduce((sum, v) => sum + v.balanceNumber, 0)\n\n  // Count of unique voucher types owned\n  const uniqueVoucherTypes = ownedVouchers.length\n\n  return {\n    // Voucher data\n    vouchers, // All voucher types (including zero balance)\n    ownedVouchers, // Only vouchers with balance > 0\n    totalVouchers, // Total count across all types\n    uniqueVoucherTypes, // Count of different voucher types owned\n\n    // Contract info\n    address: KEKTECH_VOUCHERS.address,\n    explorerUrl: KEKTECH_VOUCHERS.explorerUrl,\n\n    // State\n    isLoading,\n    isError,\n    error: error?.message || null,\n    isConnected,\n\n    // Actions\n    refetch,\n  }\n}\n"],"names":[],"mappings":";;;;AAEA;AAAA;AACA;AAAA;AAHA;;;AA2BO,SAAS;IACd,MAAM,EAAE,OAAO,EAAE,WAAW,EAAE,GAAG,IAAA,8NAAU;IAE3C,2BAA2B;IAC3B,MAAM,WAAW,UACb,mNAAgB,CAAC,aAAa,CAAC,GAAG,CAAC,IAAM,WACzC;IACJ,MAAM,MAAM,mNAAgB,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,KAAO,OAAO;IAE9D,wCAAwC;IACxC,MAAM,EACJ,MAAM,WAAW,EACjB,SAAS,EACT,OAAO,EACP,KAAK,EACL,OAAO,EACR,GAAG,IAAA,wOAAe,EAAC;QAClB,SAAS,mNAAgB,CAAC,OAAO;QACjC,KAAK,mNAAgB,CAAC,GAAG;QACzB,cAAc;QACd,MAAM,YAAY,IAAI,MAAM,GAAG,IAAI;YAAC;YAAU;SAAI,GAAG;QACrD,OAAO;YACL,SAAS,eAAe,CAAC,CAAC;YAC1B,iBAAiB;QACnB;IACF;IAEA,0CAA0C;IAC1C,MAAM,WAA6B,gNAAa,CAAC,GAAG,CAAC,CAAC,aAAa;QACjE,MAAM,UAAU,aAAa,CAAC,MAAM,IAAI,OAAO;QAC/C,OAAO;YACL,IAAI,YAAY,EAAE;YAClB,MAAM,YAAY,IAAI;YACtB,aAAa,YAAY,WAAW;YACpC,MAAM,YAAY,IAAI;YACtB,UAAU,YAAY,QAAQ;YAC9B,QAAQ,YAAY,MAAM;YAC1B;YACA,eAAe,OAAO;QACxB;IACF;IAEA,gDAAgD;IAChD,MAAM,gBAAgB,SAAS,MAAM,CAAC,CAAC,IAAM,EAAE,aAAa,GAAG;IAE/D,uCAAuC;IACvC,MAAM,gBAAgB,SAAS,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,aAAa,EAAE;IAEzE,sCAAsC;IACtC,MAAM,qBAAqB,cAAc,MAAM;IAE/C,OAAO;QACL,eAAe;QACf;QACA;QACA;QACA;QAEA,gBAAgB;QAChB,SAAS,mNAAgB,CAAC,OAAO;QACjC,aAAa,mNAAgB,CAAC,WAAW;QAEzC,QAAQ;QACR;QACA;QACA,OAAO,OAAO,WAAW;QACzB;QAEA,UAAU;QACV;IACF;AACF","debugId":null}},
    {"offset": {"line": 7361, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/lib/hooks/useAllReceivableOffers.ts"],"sourcesContent":["/**\n * useAllReceivableOffers Hook\n *\n * Comprehensive offer detection that includes:\n * 1. Targeted offers (voucherOwner = your address)\n * 2. General offers (voucherOwner = 0x0) for tokens you own\n *\n * This fixes the issue where general offers don't show up in \"Offers You Can Accept\"\n */\n\nimport { useState, useEffect } from 'react'\nimport { useAccount } from 'wagmi'\nimport { useReceivedOffers, useTokenOffers } from './useKektvOffers'\nimport { useVoucherBalance } from './useVoucherBalance'\n\nexport function useAllReceivableOffers() {\n  const { address } = useAccount()\n  const [allOfferIds, setAllOfferIds] = useState<bigint[]>([])\n  const [activeOfferIds, setActiveOfferIds] = useState<bigint[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n\n  // Get targeted offers (voucherOwner = your address)\n  const { offerIds: targetedOffers, isLoading: targetedLoading, refetch: refetchTargeted } = useReceivedOffers(address)\n\n  // Get vouchers you own\n  const { ownedVouchers, isLoading: balanceLoading } = useVoucherBalance()\n\n  // Get general offers for each token you own\n  const tokenId0 = ownedVouchers.find(v => v.id === 0) ? 0 : null\n  const tokenId1 = ownedVouchers.find(v => v.id === 1) ? 1 : null\n  const tokenId2 = ownedVouchers.find(v => v.id === 2) ? 2 : null\n  const tokenId3 = ownedVouchers.find(v => v.id === 3) ? 3 : null\n\n  const { offerIds: token0Offers, isLoading: token0Loading, refetch: refetch0 } = useTokenOffers(tokenId0)\n  const { offerIds: token1Offers, isLoading: token1Loading, refetch: refetch1 } = useTokenOffers(tokenId1)\n  const { offerIds: token2Offers, isLoading: token2Loading, refetch: refetch2 } = useTokenOffers(tokenId2)\n  const { offerIds: token3Offers, isLoading: token3Loading, refetch: refetch3 } = useTokenOffers(tokenId3)\n\n  // Combine and deduplicate all offers\n  useEffect(() => {\n    const combineOffers = async () => {\n      setIsLoading(true)\n\n      // Combine all offer IDs\n      const allIds = new Set<string>()\n\n      // Add targeted offers\n      targetedOffers.forEach(id => allIds.add(id.toString()))\n\n      // Add general offers for tokens you own\n      token0Offers.forEach(id => allIds.add(id.toString()))\n      token1Offers.forEach(id => allIds.add(id.toString()))\n      token2Offers.forEach(id => allIds.add(id.toString()))\n      token3Offers.forEach(id => allIds.add(id.toString()))\n\n      // Convert back to bigint array\n      const uniqueIds = Array.from(allIds).map(id => BigInt(id))\n\n      setAllOfferIds(uniqueIds)\n      setIsLoading(false)\n    }\n\n    if (!targetedLoading && !balanceLoading && !token0Loading && !token1Loading && !token2Loading && !token3Loading) {\n      combineOffers()\n    }\n  }, [\n    targetedOffers,\n    token0Offers,\n    token1Offers,\n    token2Offers,\n    token3Offers,\n    targetedLoading,\n    balanceLoading,\n    token0Loading,\n    token1Loading,\n    token2Loading,\n    token3Loading,\n  ])\n\n  // Note: Active filtering is intentionally done at the component level\n  // The cards already filter inactive offers for display\n  // For counting purposes, UserActivityPage should count the displayed cards\n  // not the raw offer IDs to avoid the \"shows 2, displays 1\" bug\n  useEffect(() => {\n    // For now, set activeOfferIds = allOfferIds\n    // The component will filter them when rendering/counting\n    setActiveOfferIds(allOfferIds)\n  }, [allOfferIds])\n\n  const refetch = async () => {\n    await Promise.all([\n      refetchTargeted(),\n      refetch0(),\n      refetch1(),\n      refetch2(),\n      refetch3(),\n    ])\n  }\n\n  return {\n    offerIds: allOfferIds, // All offers (active + inactive)\n    activeOfferIds, // Only active offers (for accurate counting)\n    isLoading,\n    refetch,\n  }\n}\n\n/**\n * Hook to filter receivable offers to only ones you can actually accept\n * Filters out:\n * - Offers you made yourself\n * - Inactive offers\n * - Offers for tokens you don't own (general offers)\n */\nexport function useFilteredReceivableOffers() {\n  const { address } = useAccount()\n  const { offerIds: allOfferIds, isLoading, refetch } = useAllReceivableOffers()\n  const { ownedVouchers } = useVoucherBalance()\n  const [filteredOfferIds, setFilteredOfferIds] = useState<bigint[]>([])\n\n  useEffect(() => {\n    if (!address || isLoading) return\n\n    const filterOffers = async () => {\n      const filtered: bigint[] = []\n\n      for (const offerId of allOfferIds) {\n        // Note: We can't use hooks in loops, so we'll need to do the filtering\n        // on the component level or accept some offers that aren't valid\n        // For now, just return all offers and let the cards handle filtering\n        filtered.push(offerId)\n      }\n\n      setFilteredOfferIds(filtered)\n    }\n\n    filterOffers()\n  }, [allOfferIds, address, isLoading, ownedVouchers])\n\n  return {\n    offerIds: filteredOfferIds,\n    isLoading,\n    refetch,\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7496, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/lib/hooks/useKektvOffersApproval.ts"],"sourcesContent":["import { useAccount, useWriteContract, useWaitForTransactionReceipt, useReadContract } from 'wagmi'\nimport { useEffect } from 'react'\nimport { KEKTECH_VOUCHERS } from '@/config/contracts/kektech-vouchers'\nimport { KEKTV_OFFERS_ADDRESS } from '@/config/contracts/kektv-offers'\n\n/**\n * Hook to manage ERC-1155 voucher approval for the OFFERS contract\n *\n * This is separate from useKektvApproval which is for the marketplace!\n * The offers contract needs approval to transfer vouchers when accepting offers.\n *\n * ERC-1155 uses setApprovalForAll (no single token approval)\n * Once approved, offers contract can transfer all voucher types\n */\nexport function useKektvOffersApproval() {\n  const { address } = useAccount()\n  const { writeContractAsync, data: hash, isPending, error } = useWriteContract()\n\n  const { isLoading: isConfirming, isSuccess } = useWaitForTransactionReceipt({\n    hash,\n  })\n\n  // Check if offers contract is already approved\n  const { data: isApproved, isLoading, refetch } = useReadContract({\n    address: KEKTECH_VOUCHERS.address,\n    abi: KEKTECH_VOUCHERS.abi,\n    functionName: 'isApprovedForAll',\n    args: address ? [address, KEKTV_OFFERS_ADDRESS] : undefined,\n    query: {\n      enabled: !!address, // Only query when wallet connected\n      staleTime: 0, // Always fetch fresh data (no stale cache)\n      gcTime: 0, // Don't cache results (wagmi v2 uses gcTime instead of cacheTime)\n    },\n  })\n\n  // DEBUG: Log approval state changes\n  useEffect(() => {\n    if (address) {\n      console.log('üîê Offers Contract Approval Status:', {\n        userAddress: address,\n        offersContractAddress: KEKTV_OFFERS_ADDRESS,\n        isApprovedRaw: isApproved,\n        isApprovedBoolean: Boolean(isApproved),\n        isLoading,\n      })\n    }\n  }, [address, isApproved, isLoading])\n\n  /**\n   * Approve offers contract to transfer all voucher types\n   * Required before accepting offers!\n   */\n  const approveOffersContract = async () => {\n    if (!address) throw new Error('Wallet not connected')\n\n    try {\n      const hash = await writeContractAsync({\n        address: KEKTECH_VOUCHERS.address,\n        abi: KEKTECH_VOUCHERS.abi,\n        functionName: 'setApprovalForAll',\n        args: [KEKTV_OFFERS_ADDRESS, true],\n      })\n\n      return hash\n    } catch (error) {\n      throw error\n    }\n  }\n\n  return {\n    isApproved: Boolean(isApproved),\n    isLoading,\n    approveOffersContract,\n    isPending,\n    isConfirming,\n    isSuccess,\n    error,\n    hash,\n    refetch,\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;;;AAWO,SAAS;IACd,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,8NAAU;IAC9B,MAAM,EAAE,kBAAkB,EAAE,MAAM,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,IAAA,0OAAgB;IAE7E,MAAM,EAAE,WAAW,YAAY,EAAE,SAAS,EAAE,GAAG,IAAA,kQAA4B,EAAC;QAC1E;IACF;IAEA,+CAA+C;IAC/C,MAAM,EAAE,MAAM,UAAU,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,IAAA,wOAAe,EAAC;QAC/D,SAAS,mNAAgB,CAAC,OAAO;QACjC,KAAK,mNAAgB,CAAC,GAAG;QACzB,cAAc;QACd,MAAM,UAAU;YAAC;YAAS,mNAAoB;SAAC,GAAG;QAClD,OAAO;YACL,SAAS,CAAC,CAAC;YACX,WAAW;YACX,QAAQ;QACV;IACF;IAEA,oCAAoC;IACpC,IAAA,uQAAS,EAAC;QACR,IAAI,SAAS;YACX,QAAQ,GAAG,CAAC,uCAAuC;gBACjD,aAAa;gBACb,uBAAuB,mNAAoB;gBAC3C,eAAe;gBACf,mBAAmB,QAAQ;gBAC3B;YACF;QACF;IACF,GAAG;QAAC;QAAS;QAAY;KAAU;IAEnC;;;GAGC,GACD,MAAM,wBAAwB;QAC5B,IAAI,CAAC,SAAS,MAAM,IAAI,MAAM;QAE9B,IAAI;YACF,MAAM,OAAO,MAAM,mBAAmB;gBACpC,SAAS,mNAAgB,CAAC,OAAO;gBACjC,KAAK,mNAAgB,CAAC,GAAG;gBACzB,cAAc;gBACd,MAAM;oBAAC,mNAAoB;oBAAE;iBAAK;YACpC;YAEA,OAAO;QACT,EAAE,OAAO,OAAO;YACd,MAAM;QACR;IACF;IAEA,OAAO;QACL,YAAY,QAAQ;QACpB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 7584, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/lib/hooks/useMarketplaceListing.ts"],"sourcesContent":["'use client'\n\nimport { useReadContract, useAccount } from 'wagmi'\nimport { KEKTV_MARKETPLACE_ADDRESS, KEKTV_MARKETPLACE_ABI } from '@/config/contracts/kektv-marketplace'\n\n/**\n * useMarketplaceListing Hook\n * \n * Checks if a specific token is currently listed on the marketplace\n * Used to detect conflicts when accepting offers\n * \n * @param tokenId - The voucher token ID to check\n * @returns Listing details including amount, price, and active status\n */\nexport function useMarketplaceListing(tokenId: number | bigint | null) {\n  const { address } = useAccount()\n\n  const {\n    data: listing,\n    isLoading,\n    refetch,\n  } = useReadContract({\n    address: KEKTV_MARKETPLACE_ADDRESS,\n    abi: KEKTV_MARKETPLACE_ABI,\n    functionName: 'listings',\n    args: address && tokenId !== null ? [address, BigInt(tokenId)] : undefined,\n    query: {\n      enabled: !!address && tokenId !== null,\n      refetchInterval: 5000, // Refresh every 5 seconds\n    },\n  })\n\n  // Parse listing data from contract tuple\n  const isListed = listing ? listing[2] === true && listing[0] > 0n : false\n  const listingAmount = listing ? listing[0] : 0n\n  const listingPrice = listing ? listing[1] : 0n\n\n  return {\n    isListed,\n    listing: {\n      amount: listingAmount,\n      pricePerItem: listingPrice,\n      active: isListed,\n    },\n    isLoading,\n    refetch,\n  }\n}\n"],"names":[],"mappings":";;;;AAEA;AAAA;AACA;AAHA;;;AAcO,SAAS,sBAAsB,OAA+B;IACnE,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,8NAAU;IAE9B,MAAM,EACJ,MAAM,OAAO,EACb,SAAS,EACT,OAAO,EACR,GAAG,IAAA,wOAAe,EAAC;QAClB,SAAS,6NAAyB;QAClC,KAAK,yNAAqB;QAC1B,cAAc;QACd,MAAM,WAAW,YAAY,OAAO;YAAC;YAAS,OAAO;SAAS,GAAG;QACjE,OAAO;YACL,SAAS,CAAC,CAAC,WAAW,YAAY;YAClC,iBAAiB;QACnB;IACF;IAEA,yCAAyC;IACzC,MAAM,WAAW,UAAU,OAAO,CAAC,EAAE,KAAK,QAAQ,OAAO,CAAC,EAAE,GAAG,EAAE,GAAG;IACpE,MAAM,gBAAgB,UAAU,OAAO,CAAC,EAAE,GAAG,EAAE;IAC/C,MAAM,eAAe,UAAU,OAAO,CAAC,EAAE,GAAG,EAAE;IAE9C,OAAO;QACL;QACA,SAAS;YACP,QAAQ;YACR,cAAc;YACd,QAAQ;QACV;QACA;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 7628, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/lib/hooks/useActiveOfferCount.ts"],"sourcesContent":["/**\n * useActiveOfferCount Hook\n *\n * Counts only ACTIVE offers from a list of offer IDs\n * Fixes the bug where counter shows \"2 offers\" but only 1 card displays\n * (because inactive offers are included in the count)\n */\n\nimport { useState, useEffect } from 'react'\nimport { useReadContracts } from 'wagmi'\nimport type { Abi } from 'viem'\nimport { KEKTV_OFFERS_ADDRESS, KEKTV_OFFERS_ABI } from '@/config/contracts/kektv-offers'\n\nexport function useActiveOfferCount(offerIds: bigint[]) {\n  const [activeCount, setActiveCount] = useState(0)\n\n  // Batch-fetch all offer details efficiently using multicall\n  const { data: offersData, isLoading } = useReadContracts({\n    contracts: offerIds.map(id => ({\n      address: KEKTV_OFFERS_ADDRESS,\n      abi: KEKTV_OFFERS_ABI as Abi,\n      functionName: 'getOffer',\n      args: [id],\n    })),\n    query: {\n      enabled: offerIds.length > 0,\n    },\n  })\n\n  useEffect(() => {\n    if (!offersData || isLoading) {\n      setActiveCount(0)\n      return\n    }\n\n    // Count how many offers are active\n    let count = 0\n    for (const result of offersData) {\n      if (result.status === 'success' && result.result) {\n        // Parse offer struct (can be object or array depending on wagmi version)\n        const offer = result.result as unknown\n        const offerAsObject = offer as Record<string, unknown>\n        const offerAsArray = offer as unknown[]\n\n        // Check if offer.active is true (handle both object and array formats)\n        const isActive = offerAsObject.active !== undefined\n          ? (offerAsObject.active as boolean)\n          : (offerAsArray[7] as boolean)\n\n        if (isActive) {\n          count++\n        }\n      }\n    }\n\n    setActiveCount(count)\n  }, [offersData, isLoading])\n\n  return {\n    activeCount,\n    isLoading,\n  }\n}\n"],"names":[],"mappings":"AAAA;;;;;;CAMC;;;;AAED;AACA;AAEA;;;;AAEO,SAAS,oBAAoB,QAAkB;IACpD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,sQAAQ,EAAC;IAE/C,4DAA4D;IAC5D,MAAM,EAAE,MAAM,UAAU,EAAE,SAAS,EAAE,GAAG,IAAA,0OAAgB,EAAC;QACvD,WAAW,SAAS,GAAG,CAAC,CAAA,KAAM,CAAC;gBAC7B,SAAS,mNAAoB;gBAC7B,KAAK,+MAAgB;gBACrB,cAAc;gBACd,MAAM;oBAAC;iBAAG;YACZ,CAAC;QACD,OAAO;YACL,SAAS,SAAS,MAAM,GAAG;QAC7B;IACF;IAEA,IAAA,uQAAS,EAAC;QACR,IAAI,CAAC,cAAc,WAAW;YAC5B,eAAe;YACf;QACF;QAEA,mCAAmC;QACnC,IAAI,QAAQ;QACZ,KAAK,MAAM,UAAU,WAAY;YAC/B,IAAI,OAAO,MAAM,KAAK,aAAa,OAAO,MAAM,EAAE;gBAChD,yEAAyE;gBACzE,MAAM,QAAQ,OAAO,MAAM;gBAC3B,MAAM,gBAAgB;gBACtB,MAAM,eAAe;gBAErB,uEAAuE;gBACvE,MAAM,WAAW,cAAc,MAAM,KAAK,YACrC,cAAc,MAAM,GACpB,YAAY,CAAC,EAAE;gBAEpB,IAAI,UAAU;oBACZ;gBACF;YACF;QACF;QAEA,eAAe;IACjB,GAAG;QAAC;QAAY;KAAU;IAE1B,OAAO;QACL;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 7694, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/components/marketplace/UserActivityPage.tsx"],"sourcesContent":["/**\n * User Activity Page\n * Comprehensive trading hub with NFT card-based layout\n * Shows your listings, offers, and offers you can accept as visual cards\n */\n\n'use client'\n\nimport { useState, useRef, useEffect } from 'react'\nimport Image from 'next/image'\nimport { useAccount } from 'wagmi'\nimport { useMyOfferHistory } from '@/lib/hooks/useOfferHistory'\nimport { useKektvListings } from '@/lib/hooks/useKektvListings'\nimport { useKektvOffers } from '@/lib/hooks/useKektvOffers'\nimport { useKektvMarketplace } from '@/lib/hooks/useKektvMarketplace'\nimport { useUserOffers, useOfferDetails } from '@/lib/hooks/useKektvOffers'\nimport { useAllVoucherMetadata } from '@/lib/hooks/useVoucherMetadata'\nimport { useAllReceivableOffers } from '@/lib/hooks/useAllReceivableOffers'\nimport { useVoucherBalance } from '@/lib/hooks/useVoucherBalance'\nimport { useKektvOffersApproval } from '@/lib/hooks/useKektvOffersApproval'\nimport { useMarketplaceListing } from '@/lib/hooks/useMarketplaceListing'\nimport { useActiveOfferCount } from '@/lib/hooks/useActiveOfferCount'\nimport { formatUnits } from 'ethers'\nimport type { TradingEvent } from '@/lib/services/explorer-api'\nimport { VOUCHER_NAMES } from '@/config/contracts/kektv-offers'\n\n// Constants\nconst EXPLORER_BASE_URL = 'https://explorer.bf1337.org'\n\n// Helper function to safely get voucher name\nfunction getVoucherName(tokenId: number | bigint | undefined): string {\n  if (tokenId === undefined) return 'Unknown Voucher'\n  const id = Number(tokenId)\n  if (id in VOUCHER_NAMES) {\n    return VOUCHER_NAMES[id as keyof typeof VOUCHER_NAMES]\n  }\n  return `Voucher #${id}`\n}\n\n// Helper function to safely calculate price per item\nfunction calculatePricePerItem(offerPrice: bigint, amount: bigint): number {\n  const priceNum = Number(offerPrice)\n  const amountNum = Number(amount)\n  if (amountNum === 0 || !isFinite(amountNum) || amountNum < 0) return 0\n  return priceNum / amountNum / 1e18\n}\n\n// Helper function to safely calculate total price\nfunction calculateTotalPrice(offerPrice: bigint): number {\n  return Number(offerPrice) / 1e18\n}\n\nexport function UserActivityPage() {\n  const { address, isConnected } = useAccount()\n  const { data: events, isLoading, refetch: refetchHistory } = useMyOfferHistory()\n  const { listings, refetch: refetchListings } = useKektvListings(address)\n  const { offerIds: madeOfferIds, refetch: refetchMade } = useUserOffers(address)\n  const { offerIds: receivedOfferIds, refetch: refetchReceived } = useAllReceivableOffers() // NEW: Comprehensive offer detection\n  const { metadataMap } = useAllVoucherMetadata()\n  const { ownedVouchers } = useVoucherBalance() // For filtering offers\n  const [activeTab, setActiveTab] = useState<'accept' | 'your-offers' | 'listings'>('accept')\n\n  // FIX: Count only ACTIVE offers (fixes \"shows 2, displays 1\" bug)\n  const { activeCount: activeReceivedCount } = useActiveOfferCount(receivedOfferIds)\n  const { activeCount: activeMadeCount } = useActiveOfferCount(madeOfferIds)\n\n  // DEBUG: Log offer IDs to diagnose display issues\n  console.log('üéØ UserActivityPage - Offer IDs:', {\n    address,\n    madeOfferIds: madeOfferIds.map(id => id.toString()),\n    receivedOfferIds: receivedOfferIds.map(id => id.toString()),\n    madeCount: madeOfferIds.length,\n    receivedCount: receivedOfferIds.length,\n  })\n\n  const handleRefresh = async () => {\n    await Promise.all([refetchHistory(), refetchListings(), refetchMade(), refetchReceived()])\n  }\n\n  if (!isConnected) {\n    return (\n      <div className=\"max-w-4xl mx-auto text-center py-16\">\n        <div className=\"text-6xl mb-4\">üë§</div>\n        <h2 className=\"text-2xl font-bold text-[#daa520] mb-2 font-fredoka\">\n          Connect Your Wallet\n        </h2>\n        <p className=\"text-gray-400\">Connect your wallet to view your trading activity</p>\n      </div>\n    )\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"max-w-4xl mx-auto text-center py-16\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#daa520] mx-auto mb-4\"></div>\n        <p className=\"text-gray-400\">Loading your activity...</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto\">\n      {/* Header */}\n      <div className=\"text-center space-y-2 py-6\">\n        <div className=\"flex items-center justify-center gap-4\">\n          <h1 className=\"text-4xl font-bold text-[#daa520] font-fredoka\">My Trading Activity</h1>\n          <button\n            onClick={handleRefresh}\n            disabled={isLoading}\n            className=\"px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-sm text-gray-300 hover:border-[#daa520] transition disabled:opacity-50\"\n          >\n            üîÑ Refresh\n          </button>\n        </div>\n        <p className=\"text-gray-400\">Manage your offers, listings, and view trading history</p>\n      </div>\n\n      {/* Compact Horizontal Statistics Bar - STICKY (Doubles as navigation) */}\n      <div className=\"sticky top-0 z-20 bg-black/90 backdrop-blur-sm border-b border-gray-700/50\">\n        <div className=\"flex items-center justify-around py-4 px-6\">\n          <StatBarItem\n            icon=\"‚ú®\"\n            label=\"Offers to Accept\"\n            value={activeReceivedCount}\n            highlight={activeReceivedCount > 0}\n            onClick={() => setActiveTab('accept')}\n            isActive={activeTab === 'accept'}\n          />\n          <StatBarItem\n            icon=\"üíº\"\n            label=\"Your Active Offers\"\n            value={activeMadeCount}\n            highlight={activeMadeCount > 0}\n            onClick={() => setActiveTab('your-offers')}\n            isActive={activeTab === 'your-offers'}\n          />\n          <StatBarItem\n            icon=\"üè™\"\n            label=\"Active Listings\"\n            value={listings.length}\n            highlight={listings.length > 0}\n            onClick={() => setActiveTab('listings')}\n            isActive={activeTab === 'listings'}\n          />\n        </div>\n      </div>\n\n      {/* Single Active Section - Conditional Rendering */}\n      <div className=\"p-6\">\n        {activeTab === 'accept' && (\n          <OffersYouCanAcceptSection\n            offerIds={receivedOfferIds}\n            onRefresh={handleRefresh}\n            metadataMap={metadataMap}\n            ownedVouchers={ownedVouchers}\n            userAddress={address}\n          />\n        )}\n\n        {activeTab === 'your-offers' && (\n          <YourOffersSection\n            offerIds={madeOfferIds}\n            onRefresh={handleRefresh}\n            metadataMap={metadataMap}\n          />\n        )}\n\n        {activeTab === 'listings' && (\n          <YourMarketplaceListingsSection\n            listings={listings}\n            onRefresh={handleRefresh}\n            metadataMap={metadataMap}\n          />\n        )}\n      </div>\n\n      {/* Historical Activity - Moved to bottom */}\n      <div className=\"px-6 pb-6 space-y-4 pt-6 border-t border-gray-700\">\n        <h2 className=\"text-2xl font-bold text-[#daa520] font-fredoka\">üìú Activity History</h2>\n        <ActivityHistory events={events || []} userAddress={address!} />\n      </div>\n    </div>\n  )\n}\n\n/**\n * Stat Bar Item - Compact horizontal stat with click-to-navigate\n */\nfunction StatBarItem({\n  icon,\n  label,\n  value,\n  highlight,\n  onClick,\n  isActive,\n}: {\n  icon: string\n  label: string\n  value: number\n  highlight?: boolean\n  onClick: () => void\n  isActive: boolean\n}) {\n  return (\n    <button\n      onClick={onClick}\n      className={`flex items-center gap-3 px-6 py-2 rounded-lg transition-all cursor-pointer ${\n        isActive\n          ? 'bg-[#daa520]/20 border border-[#daa520]/50'\n          : 'border border-transparent hover:bg-gray-800/50'\n      }`}\n    >\n      <span className=\"text-3xl\">{icon}</span>\n      <div className=\"text-left\">\n        <div className={`text-2xl font-bold ${highlight ? 'text-[#daa520]' : 'text-white'}`}>\n          {value}\n        </div>\n        <div className=\"text-xs text-gray-400 whitespace-nowrap\">{label}</div>\n      </div>\n    </button>\n  )\n}\n\n/**\n * Offers You Can Accept Section - NFT Card Grid\n */\nfunction OffersYouCanAcceptSection({\n  offerIds,\n  onRefresh,\n  metadataMap,\n  ownedVouchers,\n  userAddress,\n}: {\n  offerIds: bigint[]\n  onRefresh: () => void\n  metadataMap: ReturnType<typeof useAllVoucherMetadata>['metadataMap']\n  ownedVouchers: ReturnType<typeof useVoucherBalance>['ownedVouchers']\n  userAddress: `0x${string}` | undefined\n}) {\n  if (offerIds.length === 0) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"text-6xl mb-4\">üí∞</div>\n        <p className=\"text-lg text-gray-400\">No offers to accept right now</p>\n        <p className=\"text-sm text-gray-500 mt-2\">Offers on your vouchers will appear here as NFT cards</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-4 gap-5\">\n      {offerIds.map((offerId) => (\n        <AcceptableOfferNFTCard\n          key={offerId.toString()}\n          offerId={offerId}\n          onRefresh={onRefresh}\n          metadataMap={metadataMap}\n          ownedVouchers={ownedVouchers}\n          userAddress={userAddress}\n        />\n      ))}\n    </div>\n  )\n}\n\n/**\n * Acceptable Offer NFT Card - Full voucher card with image\n * NOW WITH SMART FILTERING:\n * - Filters out offers you made yourself\n * - Filters out inactive offers\n * - Filters out general offers for tokens you don't own\n */\nfunction AcceptableOfferNFTCard({\n  offerId,\n  onRefresh,\n  metadataMap,\n  ownedVouchers,\n  userAddress,\n}: {\n  offerId: bigint\n  onRefresh: () => void\n  metadataMap: ReturnType<typeof useAllVoucherMetadata>['metadataMap']\n  ownedVouchers: ReturnType<typeof useVoucherBalance>['ownedVouchers']\n  userAddress: `0x${string}` | undefined\n}) {\n  const { offer, isLoading } = useOfferDetails(offerId)\n  const { acceptOffer, rejectOffer, isPending } = useKektvOffers()\n  const { cancelListing } = useKektvMarketplace()\n  const {\n    isApproved,\n    isLoading: isCheckingApproval,\n    approveOffersContract,\n    isPending: isApprovePending,\n    isConfirming: isApproveConfirming,\n    refetch: refetchApproval\n  } = useKektvOffersApproval()\n\n  // Check if this token is listed on marketplace\n  const { isListed, listing: _listing, refetch: refetchListing } = useMarketplaceListing(\n    offer ? Number(offer.tokenId) : null\n  )\n\n  const [isAccepting, setIsAccepting] = useState(false)\n  const [isRejecting, setIsRejecting] = useState(false)\n  const [isDelisting, setIsDelisting] = useState(false)\n  const isMountedRef = useRef(true)\n\n  useEffect(() => {\n    return () => {\n      isMountedRef.current = false\n    }\n  }, [])\n\n  const handleApprove = async () => {\n    try {\n      await approveOffersContract()\n      // Approval successful - refetch approval status to update UI\n      // Wait longer for blockchain confirmation (3 blocks ~36s)\n      setTimeout(() => {\n        refetchApproval()\n      }, 5000) // Wait 5s for blockchain confirmation\n    } catch (error) {\n      console.error('Failed to approve:', error)\n    }\n  }\n\n  const handleAccept = async () => {\n    if (!offer) return\n\n    try {\n      // Step 1: Check if token is listed on marketplace\n      if (isListed) {\n        console.log('üè™ Token is listed on marketplace - auto-delisting first')\n        setIsDelisting(true)\n\n        try {\n          // Delist from marketplace first\n          await cancelListing(offer.tokenId)\n          console.log('‚úÖ Successfully delisted from marketplace')\n\n          // Wait for blockchain confirmation\n          await new Promise(resolve => setTimeout(resolve, 3000))\n\n          // Refetch listing status to confirm\n          await refetchListing()\n        } catch (delistError) {\n          console.error('‚ùå Failed to delist:', delistError)\n          throw new Error('Failed to delist from marketplace. Please try manually.')\n        } finally {\n          setIsDelisting(false)\n        }\n      }\n\n      // Step 2: Accept the offer\n      setIsAccepting(true)\n      console.log('‚úÖ Accepting offer...')\n      await acceptOffer(offerId)\n\n      if (isMountedRef.current) {\n        onRefresh()\n      }\n    } catch (error) {\n      console.error('Failed to accept offer:', error)\n    } finally {\n      if (isMountedRef.current) {\n        setIsAccepting(false)\n        setIsDelisting(false)\n      }\n    }\n  }\n\n  const handleReject = async () => {\n    try {\n      setIsRejecting(true)\n      await rejectOffer(offerId)\n      if (isMountedRef.current) {\n        onRefresh()\n      }\n    } catch (error) {\n      console.error('Failed to reject offer:', error)\n    } finally {\n      if (isMountedRef.current) {\n        setIsRejecting(false)\n      }\n    }\n  }\n\n  // IMPORTANT: Check loading state FIRST before accessing offer properties\n  if (isLoading || !offer) {\n    return (\n      <div className=\"bg-gradient-to-br from-[#daa520]/10 to-yellow-600/10 rounded-lg border border-[#daa520]/20 p-6\">\n        <div className=\"animate-pulse text-center text-gray-400\">Loading offer...</div>\n      </div>\n    )\n  }\n\n  // CRITICAL: Validate ALL required offer properties exist before using them\n  // The contract might return partial data in edge cases\n  if (!offer.offerer || !offer.voucherOwner || offer.tokenId === undefined || offer.amount === undefined || offer.offerPrice === undefined) {\n    console.log('üö´ Offer filtered: Missing properties', {\n      offerId: offerId.toString(),\n      hasOfferer: !!offer.offerer,\n      hasVoucherOwner: !!offer.voucherOwner,\n      hasTokenId: offer.tokenId !== undefined,\n      hasAmount: offer.amount !== undefined,\n      hasOfferPrice: offer.offerPrice !== undefined,\n    })\n    return null\n  }\n\n  // DEBUG: Log offer details to diagnose filtering\n  console.log('üîç Checking offer:', {\n    offerId: offerId.toString(),\n    tokenId: offer.tokenId.toString(),\n    offerer: offer.offerer,\n    voucherOwner: offer.voucherOwner,\n    amount: offer.amount.toString(),\n    active: offer.active,\n    userAddress: userAddress,\n  })\n\n  // SIMPLIFIED filtering: Only filter out obviously wrong offers\n  // Ownership validation will happen when user tries to accept\n  if (userAddress) {\n    // 1. Filter out offers you made yourself\n    if (offer.offerer.toLowerCase() === userAddress.toLowerCase()) {\n      console.log('üö´ Offer filtered: You made this offer yourself')\n      return null\n    }\n\n    // 2. Filter out inactive offers\n    if (!offer.active) {\n      console.log('üö´ Offer filtered: Offer is inactive')\n      return null\n    }\n\n    // 3. Distinguish GENERAL offers (voucherOwner = 0x0) vs TARGETED offers (voucherOwner = specific address)\n    const isGeneralOffer = offer.voucherOwner === '0x0000000000000000000000000000000000000000'\n    console.log('üìä Offer type check:', {\n      offerId: offerId.toString(),\n      tokenId: offer.tokenId.toString(),\n      voucherOwner: offer.voucherOwner,\n      isGeneralOffer,\n      userAddress,\n      ownedVouchers: ownedVouchers.map(v => ({ id: v.id, balance: v.balanceNumber })),\n    })\n\n    if (!isGeneralOffer) {\n      // TARGETED OFFER - only show if it's targeted at YOU\n      if (offer.voucherOwner.toLowerCase() !== userAddress.toLowerCase()) {\n        console.log('üö´ Offer filtered: Targeted offer not for someone else')\n        return null\n      }\n      // Targeted offer for you - show it (user can accept or reject)\n    } else {\n      // GENERAL OFFER - only show if you own enough vouchers to accept\n      // General offers CANNOT be rejected by users, so don't show if insufficient balance\n      const userVoucher = ownedVouchers.find(v => v.id === Number(offer.tokenId))\n      const hasEnoughVouchers = userVoucher && userVoucher.balanceNumber >= Number(offer.amount)\n\n      if (!hasEnoughVouchers) {\n        console.log('üö´ Offer filtered: General offer but insufficient vouchers', {\n          needed: offer.amount.toString(),\n          owned: userVoucher?.balanceNumber ?? 0,\n        })\n        return null // Don't show general offers if user can't accept them\n      }\n      // General offer and user has enough - show it (user can only accept, not reject)\n    }\n  }\n\n  console.log('‚úÖ Offer PASSED filters - rendering card!')\n\n  const metadata = metadataMap[Number(offer.tokenId)]\n  const mediaUrl = metadata?.animation_url || metadata?.image\n  const voucherName = metadata?.name || getVoucherName(offer.tokenId)\n  const pricePerItem = calculatePricePerItem(offer.offerPrice, offer.amount)\n  const totalPrice = calculateTotalPrice(offer.offerPrice)\n\n  // Determine offer type for UI rendering\n  const isGeneralOffer = offer.voucherOwner === '0x0000000000000000000000000000000000000000'\n\n  // Check if user owns enough vouchers (defensive check, should already be filtered)\n  const userVoucher = ownedVouchers.find(v => v.id === Number(offer.tokenId))\n  const hasEnoughVouchers = userVoucher && userVoucher.balanceNumber >= Number(offer.amount)\n\n  return (\n    <div className=\"bg-gradient-to-br from-green-500/10 to-emerald-600/10 rounded-lg border-2 border-green-500/30 hover:border-green-500/50 transition-all relative shadow-lg\">\n      {/* \"You Can Accept\" Badge */}\n      <div className=\"absolute top-3 right-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white text-xs px-3 py-1 rounded-full font-bold shadow-lg z-10\">\n        ‚ú® Accept This\n      </div>\n\n      <div className=\"p-6 space-y-4\">\n        {/* Voucher Media */}\n        {mediaUrl ? (\n          <div className=\"relative w-full h-48 rounded-lg overflow-hidden bg-black/20 mb-4\">\n            <Image\n              src={mediaUrl}\n              alt={voucherName}\n              fill\n              className=\"object-contain\"\n              unoptimized\n            />\n          </div>\n        ) : (\n          <div className=\"text-center mb-4\">\n            <div className=\"text-6xl mb-2\">üí∞</div>\n          </div>\n        )}\n\n        {/* Voucher Info */}\n        <div className=\"text-center mb-2\">\n          <h3 className=\"text-xl font-bold text-[#daa520] font-fredoka\">\n            {voucherName}\n          </h3>\n          <p className=\"text-xs text-gray-500 mt-1\">\n            #{offer.tokenId.toString()}\n          </p>\n        </div>\n\n        {/* Offer Details */}\n        <div className=\"space-y-2 text-sm bg-black/20 rounded-lg p-4\">\n          <div className=\"flex justify-between text-gray-400\">\n            <span>Offerer:</span>\n            <span className=\"text-white font-mono text-xs\">\n              {offer.offerer.slice(0, 6)}...{offer.offerer.slice(-4)}\n            </span>\n          </div>\n          <div className=\"flex justify-between text-gray-400\">\n            <span>Quantity:</span>\n            <span className=\"text-white font-bold\">{offer.amount.toString()}</span>\n          </div>\n          <div className=\"flex justify-between text-gray-400\">\n            <span>Price/Each:</span>\n            <span className=\"text-white font-bold\">\n              {pricePerItem.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} BASED\n            </span>\n          </div>\n          <div className=\"flex justify-between border-t border-gray-800 pt-2 mt-2\">\n            <span className=\"font-bold text-gray-300\">Total:</span>\n            <span className=\"text-[#daa520] font-bold text-lg\">\n              {totalPrice.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} BASED\n            </span>\n          </div>\n          <div className=\"text-xs text-gray-500 text-center mt-2\">\n            üí∞ BASED escrowed\n          </div>\n        </div>\n\n        {/* Action Buttons */}\n        {!hasEnoughVouchers ? (\n          /* User doesn't own enough vouchers (defensive - should be filtered out) */\n          <div className=\"space-y-3\">\n            <div className=\"text-center bg-red-500/10 border border-red-500/30 rounded-lg p-4\">\n              <div className=\"text-red-400 font-bold mb-1\">‚ùå Insufficient Vouchers</div>\n              <div className=\"text-xs text-gray-400\">\n                You need {offer.amount.toString()} {voucherName} but only have {userVoucher?.balanceNumber ?? 0}\n              </div>\n            </div>\n            {/* Only show reject button for TARGETED offers (general offers can't be rejected) */}\n            {!isGeneralOffer && (\n              <button\n                onClick={handleReject}\n                disabled={isPending || isRejecting}\n                className=\"w-full py-3 rounded-lg font-fredoka font-bold transition-all disabled:opacity-50 disabled:cursor-not-allowed bg-gradient-to-r from-red-500 to-rose-600 text-white hover:scale-105 shadow-lg shadow-red-500/30\"\n              >\n                {isRejecting ? 'Rejecting...' : 'üö´ Reject Offer'}\n              </button>\n            )}\n            {/* General offers: Show explanation instead of reject button */}\n            {isGeneralOffer && (\n              <div className=\"text-center text-xs text-gray-500 p-2\">\n                ‚ÑπÔ∏è General offers cannot be rejected. Only the offerer can cancel.\n              </div>\n            )}\n          </div>\n        ) : !isApproved && !isCheckingApproval ? (\n          /* Show approval button first if not approved */\n          <button\n            onClick={handleApprove}\n            disabled={isApprovePending || isApproveConfirming}\n            className=\"w-full py-3 rounded-lg font-fredoka font-bold transition-all disabled:opacity-50 disabled:cursor-not-allowed bg-gradient-to-r from-yellow-500 to-orange-600 text-white hover:scale-105 shadow-lg shadow-yellow-500/30\"\n          >\n            {isApprovePending || isApproveConfirming ? 'üîÑ Approving...' : 'üîì Approve First'}\n          </button>\n        ) : (\n          /* Show accept/reject buttons once approved */\n          <div className={isGeneralOffer ? \"space-y-3\" : \"grid grid-cols-2 gap-3\"}>\n            {/* Accept Button - with auto-delist support */}\n            <div className={isGeneralOffer ? 'w-full' : ''}>\n              {/* Show marketplace warning if listed */}\n              {isListed && !isDelisting && !isAccepting && (\n                <div className=\"mb-2 text-xs text-yellow-400 text-center p-2 bg-yellow-500/10 border border-yellow-500/30 rounded\">\n                  ‚ö†Ô∏è Listed on marketplace - will auto-delist first\n                </div>\n              )}\n              <button\n                onClick={handleAccept}\n                disabled={isPending || isAccepting || isDelisting || isRejecting || isCheckingApproval}\n                className={`w-full py-3 rounded-lg font-fredoka font-bold transition-all disabled:opacity-50 disabled:cursor-not-allowed bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:scale-105 shadow-lg shadow-green-500/30`}\n              >\n                {isDelisting ? 'üè™ Delisting...' : isAccepting ? '‚úÖ Accepting...' : isListed ? 'üîÑ Delist & Accept' : '‚úÖ Accept'}\n              </button>\n            </div>\n\n            {/* Reject Button - ONLY for targeted offers */}\n            {!isGeneralOffer && (\n              <button\n                onClick={handleReject}\n                disabled={isPending || isAccepting || isRejecting || isCheckingApproval}\n                className=\"py-3 rounded-lg font-fredoka font-bold transition-all disabled:opacity-50 disabled:cursor-not-allowed bg-red-500/20 border border-red-500/50 text-red-400 hover:bg-red-500/30\"\n              >\n                {isRejecting ? 'Rejecting...' : 'üö´ Reject'}\n              </button>\n            )}\n\n            {/* General offers: Show info message */}\n            {isGeneralOffer && (\n              <div className=\"text-center text-xs text-gray-500 p-2\">\n                ‚ÑπÔ∏è General offers cannot be rejected\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\n/**\n * Your Offers Section - NFT Card Grid\n */\nfunction YourOffersSection({\n  offerIds,\n  onRefresh,\n  metadataMap,\n}: {\n  offerIds: bigint[]\n  onRefresh: () => void\n  metadataMap: ReturnType<typeof useAllVoucherMetadata>['metadataMap']\n}) {\n  if (offerIds.length === 0) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"text-6xl mb-4\">üíº</div>\n        <p className=\"text-lg text-gray-400\">You haven&apos;t created any offers yet</p>\n        <p className=\"text-sm text-gray-500 mt-2\">Browse All Offers and make an offer to get started</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-4 gap-5\">\n      {offerIds.map((offerId) => (\n        <YourOfferNFTCard\n          key={offerId.toString()}\n          offerId={offerId}\n          onRefresh={onRefresh}\n          metadataMap={metadataMap}\n        />\n      ))}\n    </div>\n  )\n}\n\n/**\n * Your Offer NFT Card - Full voucher card with image\n */\nfunction YourOfferNFTCard({\n  offerId,\n  onRefresh,\n  metadataMap,\n}: {\n  offerId: bigint\n  onRefresh: () => void\n  metadataMap: ReturnType<typeof useAllVoucherMetadata>['metadataMap']\n}) {\n  const { offer, isLoading } = useOfferDetails(offerId)\n  const { cancelOffer, isPending } = useKektvOffers()\n  const [isCancelling, setIsCancelling] = useState(false)\n  const isMountedRef = useRef(true)\n\n  console.log('üíº YourOfferNFTCard rendering:', {\n    offerId: offerId.toString(),\n    isLoading,\n    hasOffer: !!offer,\n  })\n\n  useEffect(() => {\n    return () => {\n      isMountedRef.current = false\n    }\n  }, [])\n\n  const handleCancel = async () => {\n    try {\n      setIsCancelling(true)\n      await cancelOffer(offerId)\n      if (isMountedRef.current) {\n        onRefresh()\n      }\n    } catch (error) {\n      console.error('Failed to cancel offer:', error)\n    } finally {\n      if (isMountedRef.current) {\n        setIsCancelling(false)\n      }\n    }\n  }\n\n  if (isLoading || !offer) {\n    console.log('üíº YourOfferNFTCard: Still loading or no offer data')\n    return (\n      <div className=\"bg-gradient-to-br from-[#daa520]/10 to-yellow-600/10 rounded-lg border border-[#daa520]/20 p-6\">\n        <div className=\"animate-pulse text-center text-gray-400\">Loading offer...</div>\n      </div>\n    )\n  }\n\n  // CRITICAL: Validate ALL required offer properties exist\n  if (!offer.offerer || !offer.voucherOwner || offer.tokenId === undefined || offer.amount === undefined || offer.offerPrice === undefined) {\n    console.log('üíº YourOfferNFTCard: Missing properties - filtering out', {\n      hasOfferer: !!offer.offerer,\n      hasVoucherOwner: !!offer.voucherOwner,\n      hasTokenId: offer.tokenId !== undefined,\n      hasAmount: offer.amount !== undefined,\n      hasOfferPrice: offer.offerPrice !== undefined,\n    })\n    return null\n  }\n\n  console.log('üíº YourOfferNFTCard: Rendering card for offer', {\n    offerId: offerId.toString(),\n    tokenId: offer.tokenId.toString(),\n    amount: offer.amount.toString(),\n    active: offer.active,\n  })\n\n  // CRITICAL: Filter out inactive (cancelled/accepted/rejected) offers\n  if (!offer.active) {\n    console.log('üíº YourOfferNFTCard: Filtering out inactive offer', {\n      offerId: offerId.toString(),\n      active: offer.active,\n    })\n    return null\n  }\n\n  const metadata = metadataMap[Number(offer.tokenId)]\n  const mediaUrl = metadata?.animation_url || metadata?.image\n  const voucherName = metadata?.name || getVoucherName(offer.tokenId)\n  const pricePerItem = calculatePricePerItem(offer.offerPrice, offer.amount)\n  const totalPrice = calculateTotalPrice(offer.offerPrice)\n\n  return (\n    <div className=\"bg-gradient-to-br from-[#daa520]/10 to-yellow-600/10 rounded-lg border border-[#daa520]/20 hover:border-[#daa520]/40 transition-all shadow-md\">\n      <div className=\"p-6 space-y-4\">\n        {/* Voucher Media */}\n        {mediaUrl ? (\n          <div className=\"relative w-full h-48 rounded-lg overflow-hidden bg-black/20 mb-4\">\n            <Image\n              src={mediaUrl}\n              alt={voucherName}\n              fill\n              className=\"object-contain\"\n              unoptimized\n            />\n          </div>\n        ) : (\n          <div className=\"text-center mb-4\">\n            <div className=\"text-6xl mb-2\">üíº</div>\n          </div>\n        )}\n\n        {/* Voucher Info */}\n        <div className=\"text-center mb-2\">\n          <h3 className=\"text-xl font-bold text-[#daa520] font-fredoka\">\n            {voucherName}\n          </h3>\n          <p className=\"text-xs text-gray-500 mt-1\">\n            #{offer.tokenId.toString()}\n          </p>\n        </div>\n\n        {/* Offer Details */}\n        <div className=\"space-y-2 text-sm bg-black/20 rounded-lg p-4\">\n          <div className=\"flex justify-between text-gray-400\">\n            <span>To:</span>\n            <span className=\"text-white font-mono text-xs\">\n              {offer.voucherOwner === '0x0000000000000000000000000000000000000000'\n                ? 'Anyone'\n                : `${offer.voucherOwner.slice(0, 6)}...${offer.voucherOwner.slice(-4)}`\n              }\n            </span>\n          </div>\n          <div className=\"flex justify-between text-gray-400\">\n            <span>Quantity:</span>\n            <span className=\"text-white font-bold\">{offer.amount.toString()}</span>\n          </div>\n          <div className=\"flex justify-between text-gray-400\">\n            <span>Price/Each:</span>\n            <span className=\"text-white font-bold\">\n              {pricePerItem.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} BASED\n            </span>\n          </div>\n          <div className=\"flex justify-between border-t border-gray-800 pt-2 mt-2\">\n            <span className=\"font-bold text-gray-300\">Total:</span>\n            <span className=\"text-[#daa520] font-bold text-lg\">\n              {totalPrice.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} BASED\n            </span>\n          </div>\n        </div>\n\n        {/* Cancel Button */}\n        <button\n          onClick={handleCancel}\n          disabled={isPending || isCancelling}\n          className=\"w-full py-3 rounded-lg font-fredoka font-bold transition-all disabled:opacity-50 disabled:cursor-not-allowed bg-red-500/20 border border-red-500/50 text-red-400 hover:bg-red-500/30\"\n        >\n          {isPending || isCancelling ? 'Cancelling...' : '‚ùå Cancel Offer'}\n        </button>\n      </div>\n    </div>\n  )\n}\n\n/**\n * Your Marketplace Listings Section - NFT Card Grid\n */\nfunction YourMarketplaceListingsSection({\n  listings,\n  onRefresh,\n  metadataMap,\n}: {\n  listings: ReturnType<typeof useKektvListings>['listings']\n  onRefresh: () => void\n  metadataMap: ReturnType<typeof useAllVoucherMetadata>['metadataMap']\n}) {\n  if (listings.length === 0) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"text-6xl mb-4\">üè™</div>\n        <p className=\"text-lg text-gray-400\">You don&apos;t have any active listings</p>\n        <p className=\"text-sm text-gray-500 mt-2\">List your vouchers for sale to get started</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-4 gap-5\">\n      {listings.map((listing) => (\n        <MarketplaceListingNFTCard\n          key={`${listing.seller}-${listing.tokenId}`}\n          listing={listing}\n          onRefresh={onRefresh}\n          metadataMap={metadataMap}\n        />\n      ))}\n    </div>\n  )\n}\n\n/**\n * Marketplace Listing NFT Card - Full voucher card with image\n */\nfunction MarketplaceListingNFTCard({\n  listing,\n  onRefresh,\n  metadataMap,\n}: {\n  listing: ReturnType<typeof useKektvListings>['listings'][0]\n  onRefresh: () => void\n  metadataMap: ReturnType<typeof useAllVoucherMetadata>['metadataMap']\n}) {\n  const { cancelListing, isPending } = useKektvMarketplace()\n  const [isCancelling, setIsCancelling] = useState(false)\n  const isMountedRef = useRef(true)\n\n  useEffect(() => {\n    return () => {\n      isMountedRef.current = false\n    }\n  }, [])\n\n  const handleCancel = async () => {\n    try {\n      setIsCancelling(true)\n      await cancelListing(BigInt(listing.tokenId))\n      if (isMountedRef.current) {\n        onRefresh()\n      }\n    } catch (error) {\n      console.error('Failed to cancel listing:', error)\n    } finally {\n      if (isMountedRef.current) {\n        setIsCancelling(false)\n      }\n    }\n  }\n\n  // CRITICAL: Validate ALL required listing properties exist\n  if (listing.tokenId === undefined || listing.amount === undefined || listing.pricePerItem === undefined || listing.totalPrice === undefined) {\n    return null\n  }\n\n  const metadata = metadataMap[Number(listing.tokenId)]\n  const mediaUrl = metadata?.animation_url || metadata?.image\n  const voucherName = metadata?.name || getVoucherName(listing.tokenId)\n  const pricePerItem = Number(listing.pricePerItem) / 1e18\n  const totalPrice = Number(listing.totalPrice) / 1e18\n\n  return (\n    <div className=\"bg-gradient-to-br from-[#daa520]/10 to-yellow-600/10 rounded-lg border border-[#daa520]/20 hover:border-[#daa520]/40 transition-all shadow-md\">\n      <div className=\"p-6 space-y-4\">\n        {/* Voucher Media */}\n        {mediaUrl ? (\n          <div className=\"relative w-full h-48 rounded-lg overflow-hidden bg-black/20 mb-4\">\n            <Image\n              src={mediaUrl}\n              alt={voucherName}\n              fill\n              className=\"object-contain\"\n              unoptimized\n            />\n          </div>\n        ) : (\n          <div className=\"text-center mb-4\">\n            <div className=\"text-6xl mb-2\">üè™</div>\n          </div>\n        )}\n\n        {/* Voucher Info */}\n        <div className=\"text-center mb-2\">\n          <h3 className=\"text-xl font-bold text-[#daa520] font-fredoka\">\n            {voucherName}\n          </h3>\n          <p className=\"text-xs text-gray-500 mt-1\">\n            #{listing.tokenId.toString()}\n          </p>\n        </div>\n\n        {/* Listing Details */}\n        <div className=\"space-y-2 text-sm bg-black/20 rounded-lg p-4\">\n          <div className=\"flex justify-between text-gray-400\">\n            <span>Quantity:</span>\n            <span className=\"text-white font-bold\">{listing.amount.toString()} vouchers</span>\n          </div>\n          <div className=\"flex justify-between text-gray-400\">\n            <span>Price/Each:</span>\n            <span className=\"text-white font-bold\">\n              {pricePerItem.toLocaleString()} BASED\n            </span>\n          </div>\n          <div className=\"flex justify-between border-t border-gray-800 pt-2 mt-2\">\n            <span className=\"font-bold text-gray-300\">Total Value:</span>\n            <span className=\"text-[#daa520] font-bold text-lg\">\n              {totalPrice.toLocaleString()} BASED\n            </span>\n          </div>\n        </div>\n\n        {/* Cancel Button */}\n        <button\n          onClick={handleCancel}\n          disabled={isPending || isCancelling}\n          className=\"w-full py-3 rounded-lg font-fredoka font-bold transition-all disabled:opacity-50 disabled:cursor-not-allowed bg-red-500/20 border border-red-500/50 text-red-400 hover:bg-red-500/30\"\n        >\n          {isPending || isCancelling ? 'Cancelling...' : '‚ùå Cancel Listing'}\n        </button>\n      </div>\n    </div>\n  )\n}\n\n/**\n * Activity History Section\n */\nfunction ActivityHistory({\n  events,\n  userAddress,\n}: {\n  events: TradingEvent[]\n  userAddress: string\n}) {\n  if (events.length === 0) {\n    return (\n      <div className=\"bg-gray-900/60 rounded-lg border border-gray-700/50 p-8 text-center\">\n        <div className=\"text-6xl mb-4\">üì≠</div>\n        <p className=\"text-xl font-fredoka text-gray-400 mb-2\">No activity yet</p>\n        <p className=\"text-sm text-gray-500\">Your trading history will appear here</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-3\">\n      {events.map((event, i) => (\n        <ActivityCard\n          key={`${event.transactionHash}-${i}`}\n          event={event}\n          userAddress={userAddress}\n        />\n      ))}\n    </div>\n  )\n}\n\n/**\n * Activity card (historical event)\n */\nfunction ActivityCard({\n  event,\n  userAddress,\n}: {\n  event: TradingEvent\n  userAddress: string\n}) {\n  const normalizedAddress = userAddress.toLowerCase()\n  const isOfferer = 'offerer' in event && event.offerer.toLowerCase() === normalizedAddress\n  const isOwner = 'voucherOwner' in event && event.voucherOwner.toLowerCase() === normalizedAddress\n  const isSeller = 'seller' in event && event.seller.toLowerCase() === normalizedAddress\n  const isBuyer = 'buyer' in event && event.buyer.toLowerCase() === normalizedAddress\n\n  return (\n    <div className=\"bg-gray-900/60 rounded-lg border border-gray-700/50 p-6 hover:border-gray-600/50 transition\">\n      {/* Header Row: Icon, Title, Date, TX Link */}\n      <div className=\"flex items-center justify-between gap-6 mb-4\">\n        <div className=\"flex items-center gap-3\">\n          <span className=\"text-3xl\">{getEventIcon(event.eventType)}</span>\n          <div>\n            <p className=\"text-base font-bold text-[#daa520]\">\n              {getEventLabel(event.eventType, isOfferer, isOwner, isSeller, isBuyer)}\n            </p>\n            <p className=\"text-sm text-gray-500\">{formatDate(event.timestamp)}</p>\n          </div>\n        </div>\n\n        {/* Transaction link */}\n        <a\n          href={`${EXPLORER_BASE_URL}/tx/${event.transactionHash}`}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"flex-shrink-0 px-4 py-2 bg-[#daa520]/10 border border-[#daa520]/30 rounded-lg text-sm text-[#daa520] hover:bg-[#daa520]/20 hover:border-[#daa520]/50 transition font-fredoka font-bold\"\n        >\n          View TX ‚Üí\n        </a>\n      </div>\n\n      {/* Details Grid: Horizontal Layout */}\n      <div className=\"flex items-center gap-6 flex-wrap\">\n        {'tokenId' in event && (\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-sm text-gray-500\">NFT:</span>\n            <span className=\"text-sm font-bold text-white\">ùïÇ∆éùïÇTV #{event.tokenId}</span>\n          </div>\n        )}\n\n        {'offerPrice' in event && (\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-sm text-gray-500\">Price:</span>\n            <span className=\"text-base font-bold text-[#daa520]\">\n              {formatUnits(event.offerPrice, 18)} BASED\n            </span>\n          </div>\n        )}\n\n        {'totalPrice' in event && (\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-sm text-gray-500\">Total:</span>\n            <span className=\"text-base font-bold text-[#daa520]\">\n              {formatUnits(event.totalPrice, 18)} BASED\n            </span>\n          </div>\n        )}\n\n        {'amount' in event && (\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-sm text-gray-500\">Amount:</span>\n            <span className=\"text-sm font-bold text-white\">{event.amount} vouchers</span>\n          </div>\n        )}\n\n        {/* Role badges */}\n        {isOfferer && (\n          <span className=\"text-xs px-3 py-1 rounded-full bg-blue-500/20 text-blue-400 border border-blue-500/30\">\n            You offered\n          </span>\n        )}\n        {isOwner && (\n          <span className=\"text-xs px-3 py-1 rounded-full bg-purple-500/20 text-purple-400 border border-purple-500/30\">\n            Your voucher\n          </span>\n        )}\n        {isSeller && (\n          <span className=\"text-xs px-3 py-1 rounded-full bg-green-500/20 text-green-400 border border-green-500/30\">\n            You sold\n          </span>\n        )}\n        {isBuyer && (\n          <span className=\"text-xs px-3 py-1 rounded-full bg-orange-500/20 text-orange-400 border border-orange-500/30\">\n            You bought\n          </span>\n        )}\n      </div>\n    </div>\n  )\n}\n\n/**\n * Helper functions\n */\nfunction getEventIcon(eventType: TradingEvent['eventType']): string {\n  switch (eventType) {\n    case 'OfferMade':\n      return 'üí∞'\n    case 'OfferAccepted':\n      return '‚úÖ'\n    case 'OfferCancelled':\n      return '‚ùå'\n    case 'OfferRejected':\n      return 'üö´'\n    case 'VoucherSold':\n      return 'üí∏'\n    case 'VoucherListed':\n      return 'üè™'\n    case 'ListingCancelled':\n      return 'üö´'\n  }\n}\n\nfunction getEventLabel(\n  eventType: TradingEvent['eventType'],\n  isOfferer: boolean,\n  isOwner: boolean,\n  isSeller: boolean,\n  isBuyer: boolean\n): string {\n  switch (eventType) {\n    case 'OfferMade':\n      if (isOfferer) return 'You made an offer'\n      if (isOwner) return 'Received an offer'\n      return 'Offer made'\n\n    case 'OfferAccepted':\n      if (isOfferer) return 'Your offer was accepted!'\n      if (isOwner) return 'You accepted an offer'\n      return 'Offer accepted'\n\n    case 'OfferCancelled':\n      if (isOfferer) return 'You cancelled your offer'\n      if (isOwner) return 'Offer was cancelled'\n      return 'Offer cancelled'\n\n    case 'OfferRejected':\n      if (isOfferer) return 'Your offer was rejected'\n      if (isOwner) return 'You rejected an offer'\n      return 'Offer rejected'\n\n    case 'VoucherSold':\n      if (isSeller) return 'You sold vouchers'\n      if (isBuyer) return 'You bought vouchers'\n      return 'Voucher sold'\n\n    case 'VoucherListed':\n      if (isSeller) return 'You listed vouchers'\n      return 'Voucher listed'\n\n    case 'ListingCancelled':\n      if (isSeller) return 'You cancelled your listing'\n      return 'Listing cancelled'\n  }\n}\n\nfunction formatDate(timestamp: number): string {\n  const date = new Date(timestamp * 1000)\n  const now = new Date()\n  const diffMs = now.getTime() - date.getTime()\n  const diffMins = Math.floor(diffMs / (1000 * 60))\n  const diffHours = Math.floor(diffMs / (1000 * 60 * 60))\n  const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24))\n\n  if (diffMins < 1) return 'Just now'\n  if (diffMins < 60) return `${diffMins} minute${diffMins === 1 ? '' : 's'} ago`\n  if (diffHours < 24) return `${diffHours} hour${diffHours === 1 ? '' : 's'} ago`\n  if (diffDays < 7) return `${diffDays} day${diffDays === 1 ? '' : 's'} ago`\n\n  return date.toLocaleDateString()\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 9609, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/components/marketplace/TradeTab.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useAccount } from 'wagmi'\nimport Image from 'next/image'\nimport { useKektvMarketplace } from '@/lib/hooks/useKektvMarketplace'\nimport { useMarketplaceListingsAPI as useKektvListings } from '@/lib/hooks/useMarketplaceListingsAPI'\nimport { useUserVoucherBalances } from '@/lib/hooks/useKektvListings'\nimport { useKektvApproval } from '@/lib/hooks/useKektvApproval'\nimport { useAllVoucherMetadata, useVoucherMetadata } from '@/lib/hooks/useVoucherMetadata'\nimport { OffersView } from './OffersView'\nimport { UserActivityPage } from './UserActivityPage'\n\n/**\n * KEKTV Marketplace Tab\n *\n * Complete marketplace for KEKTV vouchers (ERC-1155):\n * - Browse and buy listings\n * - List your own vouchers for sale\n * - Make and receive offers on vouchers\n * - Cancel your listings\n */\nexport function TradeTab() {\n  const [view, setView] = useState<'browse' | 'list' | 'offers' | 'activity'>('browse')\n  const [selectedNFT, setSelectedNFT] = useState<number | null>(null)\n  const { isConnected } = useAccount()\n\n  // Show NFT detail view if NFT selected\n  if (selectedNFT !== null) {\n    return <NFTDetailView tokenId={selectedNFT} onBack={() => setSelectedNFT(null)} />\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header */}\n      <div className=\"text-center\">\n        <h2 className=\"text-4xl font-bold text-[#daa520] mb-4 font-fredoka\">\n          ùïÇ∆éùïÇTV Voucher Marketplace\n        </h2>\n        <p className=\"text-gray-400 max-w-2xl mx-auto\">\n          Trade your ùïÇ∆éùïÇTECH Vouchers with the community\n        </p>\n      </div>\n\n      {/* View Switcher */}\n      {isConnected && (\n        <div className=\"flex justify-center gap-4 flex-wrap\">\n          <button\n            onClick={() => setView('browse')}\n            className={`\n              px-6 py-2 rounded-lg font-fredoka font-bold transition-all\n              ${view === 'browse'\n                ? 'bg-[#daa520] text-black shadow-lg shadow-[#daa520]/20'\n                : 'bg-gray-800 text-[#daa520] hover:text-white hover:bg-gray-700'\n              }\n            `}\n          >\n            Browse & Buy\n          </button>\n          <button\n            onClick={() => setView('list')}\n            className={`\n              px-6 py-2 rounded-lg font-fredoka font-bold transition-all\n              ${view === 'list'\n                ? 'bg-[#daa520] text-black shadow-lg shadow-[#daa520]/20'\n                : 'bg-gray-800 text-[#daa520] hover:text-white hover:bg-gray-700'\n              }\n            `}\n          >\n            List for Sale\n          </button>\n          <button\n            onClick={() => setView('offers')}\n            className={`\n              px-6 py-2 rounded-lg font-fredoka font-bold transition-all\n              ${view === 'offers'\n                ? 'bg-[#daa520] text-black shadow-lg shadow-[#daa520]/20'\n                : 'bg-gray-800 text-[#daa520] hover:text-white hover:bg-gray-700'\n              }\n            `}\n          >\n            Offers\n          </button>\n          <button\n            onClick={() => setView('activity')}\n            className={`\n              px-6 py-2 rounded-lg font-fredoka font-bold transition-all\n              ${view === 'activity'\n                ? 'bg-[#daa520] text-black shadow-lg shadow-[#daa520]/20'\n                : 'bg-gray-800 text-[#daa520] hover:text-white hover:bg-gray-700'\n              }\n            `}\n          >\n            My Trading Activity\n          </button>\n        </div>\n      )}\n\n      {/* Content */}\n      {view === 'browse' ? (\n        <BrowseListings onSelectNFT={setSelectedNFT} />\n      ) : view === 'offers' ? (\n        !isConnected ? (\n          <div className=\"text-center py-24\">\n            <div className=\"text-8xl mb-6\">üîå</div>\n            <h3 className=\"text-2xl font-bold text-[#daa520] mb-4 font-fredoka\">Connect Your Wallet</h3>\n            <p className=\"text-gray-400 max-w-md mx-auto\">\n              Connect your wallet to view and make offers\n            </p>\n          </div>\n        ) : (\n          <OffersView />\n        )\n      ) : view === 'activity' ? (\n        <UserActivityPage />\n      ) : !isConnected ? (\n        <div className=\"text-center py-24\">\n          <div className=\"text-8xl mb-6\">üîå</div>\n          <h3 className=\"text-2xl font-bold text-[#daa520] mb-4 font-fredoka\">Connect Your Wallet</h3>\n          <p className=\"text-gray-400 max-w-md mx-auto\">\n            Connect your wallet to list your vouchers for sale\n          </p>\n        </div>\n      ) : (\n        <ListVouchers />\n      )}\n    </div>\n  )\n}\n\n/**\n * Browse and buy voucher listings\n * Shows ALL listings as individual cards + unlisted NFTs\n */\nfunction BrowseListings({ onSelectNFT }: { onSelectNFT: (tokenId: number) => void }) {\n  const { address, isConnected } = useAccount()\n  const { listings, isLoading } = useKektvListings()\n  const marketplace = useKektvMarketplace()\n  const { metadataMap, loading: metadataLoading } = useAllVoucherMetadata()\n\n  // All voucher IDs to display (excluding 0 - test NFT)\n  const allVoucherIds = [1, 2, 3]\n\n  // Sort listings by token ID first, then by price\n  const sortedListings = [...listings].sort((a, b) => {\n    // First sort by tokenId\n    if (a.tokenId !== b.tokenId) {\n      return a.tokenId - b.tokenId\n    }\n    // Then sort by price (cheapest first)\n    const priceA = BigInt(a.pricePerItem)\n    const priceB = BigInt(b.pricePerItem)\n    return priceA < priceB ? -1 : priceA > priceB ? 1 : 0\n  })\n\n  // Track which token IDs have listings\n  const listedTokenIds = new Set(listings.map(l => l.tokenId))\n\n  // Create array of unlisted NFTs\n  const unlistedNFTs = allVoucherIds.filter(id => !listedTokenIds.has(id))\n\n  const handleBuy = async (listing: typeof listings[number]) => {\n    if (!address) return\n\n    try {\n      // Convert string values from API to BigInt\n      await marketplace.buyVoucher(\n        listing.seller,\n        BigInt(listing.tokenId),\n        BigInt(listing.amount), // Convert string to BigInt\n        BigInt(listing.totalPrice) // Convert string to BigInt (CRITICAL!)\n      )\n      alert('Purchase successful! Vouchers transferred to your wallet.')\n    } catch (error) {\n      alert(`Purchase failed: ${error instanceof Error ? error.message : 'Unknown error'}`)\n    }\n  }\n\n  if (isLoading || metadataLoading) {\n    return (\n      <div className=\"text-center py-24\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#daa520] mx-auto mb-4\"></div>\n        <p className=\"text-gray-400\">Loading marketplace...</p>\n      </div>\n    )\n  }\n\n  return (\n    <div>\n      {/* Grid showing ALL individual listings + unlisted NFTs */}\n      <div className=\"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3\">\n\n        {/* First: Show all active listings as individual cards */}\n        {sortedListings.map((listing, index) => {\n          const metadata = metadataMap[listing.tokenId]\n          const mediaUrl = metadata?.animation_url || metadata?.image\n\n          // Find if this is the cheapest listing for this token ID\n          const sameTokenListings = sortedListings.filter(l => l.tokenId === listing.tokenId)\n          const isCheapest = sameTokenListings[0].seller === listing.seller &&\n                            sameTokenListings[0].pricePerItem === listing.pricePerItem\n\n          return (\n            <div\n              key={`listing-${listing.seller}-${listing.tokenId}-${index}`}\n              className=\"bg-gradient-to-br from-[#daa520]/10 to-yellow-600/10 rounded-lg border border-[#daa520]/20 hover:border-[#daa520]/40 overflow-hidden transition-all\"\n            >\n              <div className=\"p-6\">\n                {/* Clickable NFT Card Upper Section */}\n                <div\n                  onClick={() => onSelectNFT(listing.tokenId)}\n                  className=\"cursor-pointer hover:opacity-80 transition-opacity\"\n                >\n                  {/* Voucher Media */}\n                  {mediaUrl ? (\n                    <div className=\"relative w-full h-48 rounded-lg overflow-hidden bg-black/20 mb-4\">\n                      <Image\n                        src={mediaUrl}\n                        alt={metadata?.name || `Voucher #${listing.tokenId}`}\n                        fill\n                        className=\"object-contain\"\n                        unoptimized\n                      />\n                    </div>\n                  ) : (\n                    <div className=\"text-center mb-4\">\n                      <div className=\"text-6xl mb-2\">\n                        {listing.tokenId === 0 ? 'üé´' : listing.tokenId === 1 ? 'üéüÔ∏è' : listing.tokenId === 2 ? 'üèÜ' : 'üíé'}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Voucher Info */}\n                  <div className=\"text-center mb-4\">\n                    <h3 className=\"text-xl font-bold text-[#daa520] font-fredoka\">\n                      {metadata?.name || `Voucher #${listing.tokenId}`}\n                    </h3>\n                    <p className=\"text-xs text-gray-500 mt-1\">Click to view details</p>\n                  </div>\n                </div>\n\n                {/* Seller Badge */}\n                <div className=\"mb-3 p-2 bg-black/20 rounded-lg\">\n                  <p className=\"text-xs text-gray-400 text-center\">\n                    Seller: <span className=\"text-white font-mono\">\n                      {listing.seller.slice(0, 6)}...{listing.seller.slice(-4)}\n                    </span>\n                    {listing.seller === address && (\n                      <span className=\"ml-2 text-[#daa520] font-bold\">(You)</span>\n                    )}\n                  </p>\n                </div>\n\n                {/* Best Price Indicator */}\n                {isCheapest && sameTokenListings.length > 1 && (\n                  <div className=\"mb-3 p-2 bg-green-900/30 border border-green-600/30 rounded-lg\">\n                    <p className=\"text-xs text-green-400 text-center font-bold\">\n                      ‚úÖ Best Price for this NFT!\n                    </p>\n                  </div>\n                )}\n\n                {/* Listing Details */}\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between text-gray-400\">\n                    <span>Quantity:</span>\n                    <span className=\"text-white font-bold\">{listing.amount.toString()}</span>\n                  </div>\n                  <div className=\"flex justify-between text-gray-400\">\n                    <span>Price/Each:</span>\n                    <span className=\"text-white font-bold\">\n                      {(Number(listing.pricePerItem) / 1e18).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} BASED\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between text-gray-400 border-t border-gray-800 pt-2 mt-2\">\n                    <span className=\"font-bold\">You Pay:</span>\n                    <span className=\"text-[#daa520] font-bold text-lg\">\n                      {(Number(listing.totalPrice) / 1e18).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} BASED\n                    </span>\n                  </div>\n                  <div className=\"text-xs text-gray-500 text-center mt-1\">\n                    2.5% platform fee deducted from seller\n                  </div>\n                </div>\n\n                {/* Buy Button */}\n                <button\n                  onClick={() => handleBuy(listing)}\n                  disabled={!isConnected || marketplace.isPending || listing.seller === address}\n                  className={`\n                    w-full mt-4 py-3 rounded-lg font-fredoka font-bold transition-all\n                    ${!isConnected || listing.seller === address\n                      ? 'bg-gray-700 text-gray-500 cursor-not-allowed'\n                      : isCheapest\n                        ? 'bg-gradient-to-r from-green-600 to-green-500 text-white hover:scale-105 shadow-lg shadow-green-600/20'\n                        : 'bg-gradient-to-r from-[#daa520] to-yellow-600 text-black hover:scale-105 shadow-lg shadow-[#daa520]/20'\n                    }\n                  `}\n                >\n                  {!isConnected ? 'üîó Connect Wallet to Buy' :\n                    listing.seller === address ? 'Your Listing' :\n                    marketplace.isPending ? 'Buying...' :\n                    'üí∞ Buy Now'}\n                </button>\n              </div>\n            </div>\n          )\n        })}\n\n        {/* Second: Show unlisted NFTs */}\n        {unlistedNFTs.map((tokenId) => {\n          const metadata = metadataMap[tokenId]\n          const mediaUrl = metadata?.animation_url || metadata?.image\n\n          return (\n            <div\n              key={`unlisted-${tokenId}`}\n              className=\"bg-gradient-to-br from-gray-800/30 to-gray-900/30 rounded-lg border border-gray-700/50 hover:border-gray-600/50 overflow-hidden transition-all\"\n            >\n              <div className=\"p-6\">\n                {/* Clickable NFT Card Upper Section */}\n                <div\n                  onClick={() => onSelectNFT(tokenId)}\n                  className=\"cursor-pointer hover:opacity-80 transition-opacity\"\n                >\n                  {/* Voucher Media */}\n                  {mediaUrl ? (\n                    <div className=\"relative w-full h-48 rounded-lg overflow-hidden bg-black/20 mb-4\">\n                      <Image\n                        src={mediaUrl}\n                        alt={metadata?.name || `Voucher #${tokenId}`}\n                        fill\n                        className=\"object-contain\"\n                        unoptimized\n                      />\n                    </div>\n                  ) : (\n                    <div className=\"text-center mb-4\">\n                      <div className=\"text-6xl mb-2\">\n                        {tokenId === 0 ? 'üé´' : tokenId === 1 ? 'üéüÔ∏è' : tokenId === 2 ? 'üèÜ' : 'üíé'}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Voucher Info */}\n                  <div className=\"text-center mb-4\">\n                    <h3 className=\"text-xl font-bold text-[#daa520] font-fredoka\">\n                      {metadata?.name || `Voucher #${tokenId}`}\n                    </h3>\n                    <p className=\"text-xs text-gray-500 mt-1\">Click to view details</p>\n                  </div>\n                </div>\n\n                {/* Not Listed Status */}\n                <div className=\"mt-4\">\n                  <div className=\"bg-gray-800/50 rounded-lg p-6 text-center\">\n                    <div className=\"text-4xl mb-2\">üì≠</div>\n                    <p className=\"text-gray-400 font-fredoka font-bold mb-1\">Not Listed</p>\n                    <p className=\"text-xs text-gray-500\">\n                      No active listings for this voucher\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n\n/**\n * List your vouchers for sale\n */\nfunction ListVouchers() {\n  const { vouchers, isLoading } = useUserVoucherBalances()\n  const approval = useKektvApproval()\n  const marketplace = useKektvMarketplace()\n  const { metadataMap, loading: metadataLoading } = useAllVoucherMetadata()\n  const [selectedVoucher, setSelectedVoucher] = useState<number | null>(null)\n  const [amount, setAmount] = useState('')\n  const [pricePerItem, setPricePerItem] = useState('')\n\n  // Watch for successful approval and refetch approval status\n  useEffect(() => {\n    if (approval.isSuccess) {\n      // Wait a bit for blockchain to update, then refetch\n      const timer = setTimeout(async () => {\n        await approval.refetch()\n        alert('Marketplace approved! You can now list vouchers.')\n      }, 2000)\n      return () => clearTimeout(timer)\n    }\n  }, [approval.isSuccess, approval.refetch])\n\n  const handleApprove = async () => {\n    try {\n      await approval.approveMarketplace()\n      // Success message now shown by useEffect after refetch\n    } catch (error) {\n      alert(`Approval failed: ${error instanceof Error ? error.message : 'Unknown error'}`)\n    }\n  }\n\n  const handleList = async () => {\n    if (selectedVoucher === null || !amount || !pricePerItem) {\n      alert('Please fill in all fields')\n      return\n    }\n\n    try {\n      await marketplace.listVoucher(\n        BigInt(selectedVoucher),\n        BigInt(amount),\n        pricePerItem\n      )\n      alert('Voucher listed successfully!')\n      setSelectedVoucher(null)\n      setAmount('')\n      setPricePerItem('')\n    } catch (error) {\n      alert(`Listing failed: ${error instanceof Error ? error.message : 'Unknown error'}`)\n    }\n  }\n\n  if (isLoading || metadataLoading) {\n    return (\n      <div className=\"text-center py-24\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#daa520] mx-auto mb-4\"></div>\n        <p className=\"text-gray-400\">Loading your vouchers...</p>\n      </div>\n    )\n  }\n\n  const ownedVouchers = vouchers.filter(v => v.balance > 0n)\n\n  if (ownedVouchers.length === 0) {\n    return (\n      <div className=\"text-center py-24\">\n        <div className=\"text-8xl mb-6\">üé´</div>\n        <h3 className=\"text-2xl font-bold text-[#daa520] mb-4 font-fredoka\">No Vouchers to List</h3>\n        <p className=\"text-gray-400 max-w-md mx-auto\">\n          You don&apos;t own any KEKTV vouchers yet. Mint or buy some to start trading!\n        </p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"max-w-2xl mx-auto space-y-6\">\n      {/* Approval Step */}\n      {approval.isLoading ? (\n        <div className=\"bg-blue-500/10 border border-blue-500/30 rounded-lg p-6\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-blue-500\"></div>\n            <p className=\"text-blue-400\">Checking marketplace approval status...</p>\n          </div>\n        </div>\n      ) : !approval.isApproved && (\n        <div className=\"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-6\">\n          <h3 className=\"text-xl font-bold text-yellow-400 mb-2 font-fredoka\">\n            üîê Marketplace Approval Required\n          </h3>\n          <p className=\"text-gray-400 mb-4\">\n            You need to approve the marketplace to transfer your vouchers. This is a one-time approval.\n          </p>\n          <button\n            onClick={handleApprove}\n            disabled={approval.isPending}\n            className=\"px-6 py-3 bg-yellow-500 text-black rounded-lg font-fredoka font-bold hover:bg-yellow-400 transition disabled:opacity-50\"\n          >\n            {approval.isPending ? 'Approving...' : 'Approve Marketplace'}\n          </button>\n        </div>\n      )}\n\n      {/* Listing Form */}\n      <div className=\"bg-gray-900/60 rounded-lg border border-[#daa520]/20 p-6\">\n        <h3 className=\"text-2xl font-bold text-[#daa520] mb-6 font-fredoka\">\n          List Vouchers for Sale\n        </h3>\n\n        <div className=\"space-y-4\">\n          {/* Select Voucher */}\n          <div>\n            <div className=\"grid grid-cols-1 gap-4\">\n              {ownedVouchers.map((voucher) => {\n                const metadata = metadataMap[voucher.id]\n                const mediaUrl = metadata?.animation_url || metadata?.image\n                const isSelected = selectedVoucher === voucher.id\n\n                return (\n                  <button\n                    key={voucher.id}\n                    onClick={() => setSelectedVoucher(voucher.id)}\n                    className={`\n                      rounded-xl border p-4 transition-all text-left\n                      ${isSelected\n                        ? 'bg-gradient-to-br from-[#daa520]/20 to-yellow-600/20 border-[#daa520] ring-2 ring-[#daa520]/50'\n                        : 'bg-gradient-to-br from-yellow-500/10 to-yellow-600/10 border-yellow-500/30 hover:border-[#daa520]/50'\n                      }\n                    `}\n                  >\n                    <div className=\"flex flex-col sm:flex-row gap-4\">\n                      {/* Voucher Image */}\n                      {mediaUrl ? (\n                        <div className=\"relative w-full sm:w-32 h-32 rounded-lg overflow-hidden bg-black/20 flex-shrink-0\">\n                          <Image\n                            src={mediaUrl}\n                            alt={metadata?.name || voucher.name}\n                            fill\n                            className=\"object-contain\"\n                            unoptimized\n                          />\n                        </div>\n                      ) : (\n                        <div className=\"w-full sm:w-32 h-32 flex items-center justify-center bg-black/20 rounded-lg flex-shrink-0\">\n                          <div className=\"text-6xl\">{voucher.icon}</div>\n                        </div>\n                      )}\n\n                      {/* Voucher Details */}\n                      <div className=\"flex-1 flex flex-col justify-between\">\n                        <div>\n                          <div className=\"flex items-start justify-between mb-2\">\n                            <h4 className=\"font-bold text-white text-lg font-fredoka\">\n                              {metadata?.name || voucher.name}\n                            </h4>\n                            <div className=\"px-3 py-1 rounded-lg bg-gradient-to-r from-[#daa520] to-yellow-600 text-black text-sm font-bold flex-shrink-0\">\n                              √ó{voucher.balance.toString()}\n                            </div>\n                          </div>\n                          <p className=\"text-sm text-gray-400 mb-2\">\n                            {metadata?.description || `Token ID #${voucher.id}`}\n                          </p>\n                        </div>\n\n                        {isSelected && (\n                          <div className=\"text-xs text-[#daa520] font-bold mt-2\">\n                            ‚úì Selected for listing\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </button>\n                )\n              })}\n            </div>\n          </div>\n\n          {/* Amount */}\n          <div>\n            <label className=\"block text-gray-400 mb-2\">Quantity to List</label>\n            <input\n              type=\"number\"\n              min=\"1\"\n              max={selectedVoucher !== null ? Number(ownedVouchers.find(v => v.id === selectedVoucher)?.balance) : undefined}\n              value={amount}\n              onChange={(e) => setAmount(e.target.value)}\n              placeholder=\"Enter quantity\"\n              className=\"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-[#daa520] focus:outline-none\"\n            />\n          </div>\n\n          {/* Price Per Item */}\n          <div>\n            <label className=\"block text-gray-400 mb-2\">Price Per Voucher (BASED)</label>\n            <input\n              type=\"number\"\n              min=\"1\"\n              value={pricePerItem}\n              onChange={(e) => setPricePerItem(e.target.value)}\n              placeholder=\"Enter price (e.g., 1000)\"\n              className=\"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-[#daa520] focus:outline-none\"\n            />\n          </div>\n\n          {/* Total Price Preview */}\n          {amount && pricePerItem && (\n            <div className=\"bg-[#daa520]/10 border border-[#daa520]/30 rounded-lg p-4\">\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-gray-400\">Total Sale Price:</span>\n                <span className=\"text-2xl font-bold text-[#daa520]\">\n                  {(Number(amount) * Number(pricePerItem)).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} BASED\n                </span>\n              </div>\n              <div className=\"text-xs text-gray-500 mt-2\">\n                You&apos;ll receive 97.5% after 2.5% platform fee\n              </div>\n            </div>\n          )}\n\n          {/* List Button */}\n          <button\n            onClick={handleList}\n            disabled={!approval.isApproved || marketplace.isPending || !selectedVoucher || !amount || !pricePerItem}\n            className={`\n              w-full py-4 rounded-lg font-fredoka font-bold text-lg transition-all\n              ${!approval.isApproved || marketplace.isPending || !selectedVoucher || !amount || !pricePerItem\n                ? 'bg-gray-700 text-gray-500 cursor-not-allowed'\n                : 'bg-gradient-to-r from-[#daa520] to-yellow-600 text-black hover:scale-105 shadow-lg shadow-[#daa520]/20'\n              }\n            `}\n          >\n            {!approval.isApproved ? 'üîê Approve Marketplace First' :\n              marketplace.isPending ? '‚è≥ Listing...' :\n              'üí∞ List for Sale'}\n          </button>\n        </div>\n      </div>\n\n      {/* Your Active Listings */}\n      <YourListings />\n    </div>\n  )\n}\n\n/**\n * Display user's active listings with cancel button\n */\nfunction YourListings() {\n  const { address } = useAccount()\n  const { listings, isLoading } = useKektvListings(address)\n  const marketplace = useKektvMarketplace()\n  const { metadataMap, loading: metadataLoading } = useAllVoucherMetadata()\n\n  const handleCancel = async (tokenId: number) => {\n    try {\n      await marketplace.cancelListing(BigInt(tokenId))\n      alert('Listing cancelled successfully!')\n    } catch (error) {\n      alert(`Cancellation failed: ${error instanceof Error ? error.message : 'Unknown error'}`)\n    }\n  }\n\n  if (isLoading || metadataLoading || listings.length === 0) {\n    return null\n  }\n\n  return (\n    <div className=\"bg-gray-900/60 rounded-lg border border-[#daa520]/20 p-6\">\n      <h3 className=\"text-xl font-bold text-[#daa520] mb-4 font-fredoka\">\n        Your Active Listings\n      </h3>\n      <div className=\"space-y-3\">\n        {listings.map((listing) => {\n          const metadata = metadataMap[listing.tokenId]\n          const mediaUrl = metadata?.animation_url || metadata?.image\n\n          return (\n            <div\n              key={listing.tokenId}\n              className=\"rounded-lg border border-[#daa520]/30 bg-gradient-to-br from-yellow-500/10 to-yellow-600/10 p-4 hover:border-[#daa520]/50 transition-all\"\n            >\n              <div className=\"flex flex-col sm:flex-row items-start sm:items-center gap-4\">\n                {/* Voucher Image */}\n                {mediaUrl ? (\n                  <div className=\"relative w-20 h-20 rounded-lg overflow-hidden bg-black/20 flex-shrink-0\">\n                    <Image\n                      src={mediaUrl}\n                      alt={metadata?.name || listing.voucherName}\n                      fill\n                      className=\"object-contain\"\n                      unoptimized\n                    />\n                  </div>\n                ) : (\n                  <div className=\"w-20 h-20 flex items-center justify-center bg-black/20 rounded-lg flex-shrink-0\">\n                    <div className=\"text-4xl\">{listing.voucherIcon}</div>\n                  </div>\n                )}\n\n                {/* Listing Details */}\n                <div className=\"flex-1\">\n                  <div className=\"font-bold text-white text-lg font-fredoka mb-1\">\n                    {metadata?.name || listing.voucherName}\n                  </div>\n                  <div className=\"text-sm text-gray-400\">\n                    <span className=\"text-white font-bold\">{listing.amount.toString()}</span> √ó {(Number(listing.pricePerItem) / 1e18).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} BASED each\n                  </div>\n                  <div className=\"text-xs text-[#daa520] mt-1\">\n                    Total: {(Number(listing.totalPrice) / 1e18).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} BASED\n                  </div>\n                </div>\n\n                {/* Cancel Button */}\n                <button\n                  onClick={() => handleCancel(listing.tokenId)}\n                  disabled={marketplace.isPending}\n                  className=\"px-4 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition disabled:opacity-50 font-fredoka font-bold whitespace-nowrap\"\n                >\n                  {marketplace.isPending ? 'Cancelling...' : 'Cancel Listing'}\n                </button>\n              </div>\n            </div>\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n\n/**\n * NFT Detail View - Shows individual NFT with metadata and trading history\n */\nfunction NFTDetailView({ tokenId, onBack }: { tokenId: number; onBack: () => void }) {\n  const { metadata, loading, error } = useVoucherMetadata(tokenId)\n  const { listings: allListings, isLoading: listingsLoading } = useKektvListings()\n  const { address, isConnected } = useAccount()\n  const marketplace = useKektvMarketplace()\n\n  // Filter listings for this specific tokenId and sort by price\n  const tokenListings = allListings\n    .filter(l => l.tokenId === tokenId)\n    .sort((a, b) => {\n      const priceA = BigInt(a.pricePerItem)\n      const priceB = BigInt(b.pricePerItem)\n      return priceA < priceB ? -1 : priceA > priceB ? 1 : 0\n    })\n\n  const handleBuy = async (listing: typeof allListings[number]) => {\n    if (!address) return\n\n    try {\n      await marketplace.buyVoucher(\n        listing.seller,\n        BigInt(listing.tokenId),\n        BigInt(listing.amount),\n        BigInt(listing.totalPrice)\n      )\n      alert('Purchase successful! Vouchers transferred to your wallet.')\n    } catch (error) {\n      alert(`Purchase failed: ${error instanceof Error ? error.message : 'Unknown error'}`)\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-24\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#daa520] mx-auto mb-4\"></div>\n        <p className=\"text-gray-400\">Loading NFT details...</p>\n      </div>\n    )\n  }\n\n  if (error || !metadata) {\n    return (\n      <div className=\"text-center py-24\">\n        <div className=\"text-8xl mb-6\">‚ùå</div>\n        <h3 className=\"text-2xl font-bold text-[#daa520] mb-4 font-fredoka\">\n          Error Loading NFT\n        </h3>\n        <p className=\"text-gray-400 mb-6\">{error || 'Failed to load NFT metadata'}</p>\n        <button\n          onClick={onBack}\n          className=\"px-6 py-3 bg-[#daa520] text-black rounded-lg font-fredoka font-bold hover:bg-yellow-600 transition\"\n        >\n          ‚Üê Back to Marketplace\n        </button>\n      </div>\n    )\n  }\n\n  const mediaUrl = metadata.animation_url || metadata.image\n\n  return (\n    <div className=\"max-w-4xl mx-auto space-y-6\">\n      {/* Back Button */}\n      <button\n        onClick={onBack}\n        className=\"px-4 py-2 bg-gray-800 text-[#daa520] rounded-lg font-fredoka font-bold hover:bg-gray-700 transition\"\n      >\n        ‚Üê Back to Marketplace\n      </button>\n\n      {/* NFT Header */}\n      <div className=\"text-center\">\n        <h1 className=\"text-4xl font-bold text-[#daa520] mb-2 font-fredoka\">\n          {metadata.name}\n        </h1>\n        <p className=\"text-gray-400\">Complete details and metadata for this NFT</p>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {/* Left: NFT Image */}\n        <div className=\"bg-gradient-to-br from-[#daa520]/10 to-yellow-600/10 rounded-lg border border-[#daa520]/20 p-6\">\n          {mediaUrl ? (\n            <div className=\"relative w-full aspect-square rounded-lg overflow-hidden bg-black/20\">\n              <Image\n                src={mediaUrl}\n                alt={metadata.name}\n                fill\n                className=\"object-contain\"\n                unoptimized\n              />\n            </div>\n          ) : (\n            <div className=\"w-full aspect-square flex items-center justify-center bg-black/20 rounded-lg\">\n              <div className=\"text-9xl\">üéüÔ∏è</div>\n            </div>\n          )}\n        </div>\n\n        {/* Right: Metadata */}\n        <div className=\"bg-gradient-to-br from-[#daa520]/10 to-yellow-600/10 rounded-lg border border-[#daa520]/20 p-6 space-y-4\">\n          {/* Description */}\n          {metadata.description && (\n            <div>\n              <h3 className=\"text-lg font-bold text-[#daa520] mb-2 font-fredoka\">Description</h3>\n              <p className=\"text-gray-300\">{metadata.description}</p>\n            </div>\n          )}\n\n          {/* Token ID */}\n          <div>\n            <h3 className=\"text-lg font-bold text-[#daa520] mb-2 font-fredoka\">Token ID</h3>\n            <p className=\"text-gray-300\">#{tokenId}</p>\n          </div>\n\n          {/* Attributes */}\n          {metadata.attributes && metadata.attributes.length > 0 && (\n            <div>\n              <h3 className=\"text-lg font-bold text-[#daa520] mb-2 font-fredoka\">Attributes</h3>\n              <div className=\"space-y-2\">\n                {metadata.attributes.map((attr, index) => (\n                  <div\n                    key={index}\n                    className=\"flex justify-between items-center bg-black/20 rounded-lg p-3\"\n                  >\n                    <span className=\"text-gray-400\">{attr.trait_type}</span>\n                    <span className=\"text-white font-bold\">{attr.value}</span>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Available Listings Section */}\n      <div className=\"bg-gradient-to-br from-[#daa520]/10 to-yellow-600/10 rounded-lg border border-[#daa520]/20 p-6\">\n        <h3 className=\"text-2xl font-bold text-[#daa520] mb-4 font-fredoka\">\n          üí∞ Available Listings {tokenListings.length > 0 && `(${tokenListings.length})`}\n        </h3>\n\n        {listingsLoading ? (\n          <div className=\"text-center py-8\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-[#daa520] mx-auto mb-2\"></div>\n            <p className=\"text-gray-400\">Loading listings...</p>\n          </div>\n        ) : tokenListings.length === 0 ? (\n          <p className=\"text-gray-400 text-center py-8\">\n            No active listings for this NFT. Check back later!\n          </p>\n        ) : (\n          <div className=\"space-y-3\">\n            {tokenListings.map((listing, index) => (\n              <div\n                key={`${listing.seller}-${listing.tokenId}-${index}`}\n                className=\"bg-black/20 rounded-lg p-4 border border-gray-700 hover:border-[#daa520]/40 transition\"\n              >\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  {/* Seller Info */}\n                  <div>\n                    <p className=\"text-xs text-gray-400 mb-1\">Seller</p>\n                    <p className=\"text-sm text-white font-mono\">\n                      {listing.seller.slice(0, 6)}...{listing.seller.slice(-4)}\n                      {listing.seller === address && (\n                        <span className=\"ml-2 text-xs text-[#daa520] font-bold\">(You)</span>\n                      )}\n                    </p>\n                  </div>\n\n                  {/* Price Info */}\n                  <div>\n                    <p className=\"text-xs text-gray-400 mb-1\">Price per NFT</p>\n                    <p className=\"text-sm text-white font-bold\">\n                      {(Number(listing.pricePerItem) / 1e18).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} BASED\n                    </p>\n                    <p className=\"text-xs text-gray-500\">\n                      Qty: {listing.amount.toString()} | Total: {(Number(listing.totalPrice) / 1e18).toFixed(2)} BASED\n                    </p>\n                  </div>\n\n                  {/* Buy Button */}\n                  <div className=\"flex items-center\">\n                    <button\n                      onClick={() => handleBuy(listing)}\n                      disabled={!isConnected || marketplace.isPending || listing.seller === address}\n                      className={`\n                        w-full py-2 px-4 rounded-lg font-fredoka font-bold text-sm transition-all\n                        ${!isConnected || listing.seller === address\n                          ? 'bg-gray-700 text-gray-500 cursor-not-allowed'\n                          : index === 0\n                            ? 'bg-gradient-to-r from-green-600 to-green-500 text-white hover:scale-105 shadow-lg shadow-green-600/20'\n                            : 'bg-gradient-to-r from-[#daa520] to-yellow-600 text-black hover:scale-105 shadow-lg shadow-[#daa520]/20'\n                        }\n                      `}\n                    >\n                      {!isConnected ? 'üîó Connect' :\n                        listing.seller === address ? 'Your Listing' :\n                        marketplace.isPending ? 'Buying...' :\n                        index === 0 ? '‚úÖ Best Price' : 'üí∞ Buy Now'}\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n\n            {/* Cheapest Price Indicator */}\n            {tokenListings.length > 1 && (\n              <div className=\"mt-3 p-3 bg-green-900/20 border border-green-600/30 rounded-lg\">\n                <p className=\"text-sm text-green-400 text-center\">\n                  üí° Tip: Listings are sorted by price. The top listing offers the best deal!\n                </p>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Trading History Section (Placeholder) */}\n      <div className=\"bg-gradient-to-br from-[#daa520]/10 to-yellow-600/10 rounded-lg border border-[#daa520]/20 p-6\">\n        <h3 className=\"text-2xl font-bold text-[#daa520] mb-4 font-fredoka\">\n          üìä Trading History\n        </h3>\n        <p className=\"text-gray-400 text-center py-8\">\n          Trading history feature coming soon! This will show all transactions, offers, and sales for this specific NFT.\n        </p>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 11430, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/components/ui/BlurredTitleSection.tsx"],"sourcesContent":["/**\n * Blurred Title Section Component\n *\n * Creates an elegant title section with a blurred background image\n * Features:\n * - Smooth optical blur effect on background image\n * - Layered design with text on top\n * - Responsive and elegant styling\n */\n\ninterface BlurredTitleSectionProps {\n  title: string\n  subtitle?: string\n  imageSrc?: string\n}\n\nexport function BlurredTitleSection({\n  title,\n  subtitle,\n  imageSrc = '/images/kekorama.jpg'\n}: BlurredTitleSectionProps) {\n  return (\n    <div className=\"relative mb-12 overflow-hidden rounded-2xl\">\n      {/* Background Layer - Blurred Image */}\n      <div className=\"absolute inset-0 z-0\">\n        {/* Image container with subtle blur */}\n        <div\n          className=\"relative h-full w-full\"\n          style={{\n            backgroundImage: `url(${imageSrc})`,\n            backgroundSize: 'cover',\n            backgroundPosition: 'center',\n            filter: 'blur(8px) brightness(0.8)',\n            opacity: 0.5,\n            transform: 'scale(1.05)', // Prevent blur edge artifacts\n          }}\n        />\n\n        {/* Subtle gradient overlay for text contrast */}\n        <div className=\"absolute inset-0 bg-gradient-to-b from-black/40 via-black/20 to-black/50\" />\n\n        {/* Light vignette effect */}\n        <div className=\"absolute inset-0 bg-gradient-radial from-transparent via-transparent to-black/40\" />\n      </div>\n\n      {/* Content Layer - Title and Subtitle */}\n      <div className=\"relative z-10 px-8 py-16 text-center\">\n        {/* Animated glow effect behind title */}\n        <div className=\"absolute left-1/2 top-1/2 h-32 w-96 -translate-x-1/2 -translate-y-1/2 rounded-full bg-[#3fb8bd]/20 blur-3xl\" />\n\n        {/* Title */}\n        <h1 className=\"font-fredoka relative mb-4 text-3xl font-bold text-[#3fb8bd] sm:text-4xl lg:text-5xl drop-shadow-2xl\">\n          <span className=\"relative inline-block\">\n            {title}\n            {/* Text glow effect */}\n            <span\n              className=\"absolute inset-0 blur-md opacity-50\"\n              style={{\n                color: '#3fb8bd',\n                zIndex: -1\n              }}\n            >\n              {title}\n            </span>\n          </span>\n        </h1>\n\n        {/* Subtitle */}\n        {subtitle && (\n          <p className=\"font-fredoka relative text-lg text-gray-200 sm:text-xl drop-shadow-lg\">\n            {subtitle}\n          </p>\n        )}\n\n        {/* Decorative line */}\n        <div className=\"mx-auto mt-6 h-1 w-24 rounded-full bg-gradient-to-r from-transparent via-[#3fb8bd] to-transparent opacity-50\" />\n      </div>\n\n      {/* Shimmer effect overlay */}\n      <div className=\"absolute inset-0 z-20 pointer-events-none\">\n        <div className=\"h-full w-full animate-shimmer bg-gradient-to-r from-transparent via-white/5 to-transparent\" />\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":"AAAA;;;;;;;;CAQC;;;;;;AAQM,SAAS,oBAAoB,EAClC,KAAK,EACL,QAAQ,EACR,WAAW,sBAAsB,EACR;IACzB,qBACE,mSAAC;QAAI,WAAU;;0BAEb,mSAAC;gBAAI,WAAU;;kCAEb,mSAAC;wBACC,WAAU;wBACV,OAAO;4BACL,iBAAiB,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;4BACnC,gBAAgB;4BAChB,oBAAoB;4BACpB,QAAQ;4BACR,SAAS;4BACT,WAAW;wBACb;;;;;;kCAIF,mSAAC;wBAAI,WAAU;;;;;;kCAGf,mSAAC;wBAAI,WAAU;;;;;;;;;;;;0BAIjB,mSAAC;gBAAI,WAAU;;kCAEb,mSAAC;wBAAI,WAAU;;;;;;kCAGf,mSAAC;wBAAG,WAAU;kCACZ,cAAA,mSAAC;4BAAK,WAAU;;gCACb;8CAED,mSAAC;oCACC,WAAU;oCACV,OAAO;wCACL,OAAO;wCACP,QAAQ,CAAC;oCACX;8CAEC;;;;;;;;;;;;;;;;;oBAMN,0BACC,mSAAC;wBAAE,WAAU;kCACV;;;;;;kCAKL,mSAAC;wBAAI,WAAU;;;;;;;;;;;;0BAIjB,mSAAC;gBAAI,WAAU;0BACb,cAAA,mSAAC;oBAAI,WAAU;;;;;;;;;;;;;;;;;AAIvB","debugId":null}},
    {"offset": {"line": 11571, "column": 0}, "map": {"version":3,"sources":["file:///Users/seman/Desktop/kektechbmad100/packages/frontend/app/marketplace/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { Header } from '@/components/layout/Header'\nimport { Footer } from '@/components/layout/Footer'\nimport { MintTab } from '@/components/marketplace/MintTab'\nimport { TradeTab } from '@/components/marketplace/TradeTab'\nimport { BlurredTitleSection } from '@/components/ui/BlurredTitleSection'\n\n/**\n * Marketplace Page\n *\n * Unified marketplace with four tabs:\n * - Mint: NFT minting interface\n * - Surprise: Surprise mechanics (coming soon)\n * - KEKTV: KEKTV voucher trading marketplace\n * - Limited Edition: Special limited edition items\n */\nexport default function MarketplacePage() {\n  const [activeTab, setActiveTab] = useState<'mint' | 'surprise' | 'kektv' | 'limited'>('mint')\n\n  return (\n    <div className=\"flex min-h-screen flex-col\">\n      <Header />\n\n      <main className=\"flex-1 bg-gradient-to-b from-black to-gray-950\">\n        <div className=\"container mx-auto px-4 py-12 sm:px-6 lg:px-8\">\n          {/* Page Header with Blurred Background */}\n          <BlurredTitleSection\n            title=\"ùïÇ∆éùïÇ‰∏Ö·µâÂåöüÖ∑ Marketplace\"\n            subtitle=\"Mint new NFTs or trade KEKTV vouchers\"\n          />\n\n          {/* Tab Navigation - Dashboard Style */}\n          <div className=\"mb-8 space-y-4\">\n            <div className=\"flex justify-center\">\n              <div className=\"inline-flex gap-2 rounded-xl bg-gray-900/60 p-1 border border-gray-800\">\n                <button\n                  onClick={() => setActiveTab('mint')}\n                  className={`\n                    px-8 py-3 rounded-lg font-fredoka font-bold transition-all duration-200\n                    ${activeTab === 'mint'\n                      ? 'bg-[#3fb8bd] text-black shadow-lg shadow-[#3fb8bd]/20'\n                      : 'text-[#3fb8bd] hover:text-white hover:bg-gray-800/50'\n                    }\n                  `}\n                >\n                  Mint\n                </button>\n                <button\n                  onClick={() => setActiveTab('surprise')}\n                  className={`\n                    px-8 py-3 rounded-lg font-fredoka font-bold transition-all duration-200 text-2xl\n                    ${activeTab === 'surprise'\n                      ? 'bg-[#4ecca7] shadow-lg shadow-[#4ecca7]/20'\n                      : 'hover:bg-gray-800/50'\n                    }\n                  `}\n                >\n                  üëÄ\n                </button>\n                <button\n                  onClick={() => setActiveTab('kektv')}\n                  className={`\n                    px-8 py-3 rounded-lg font-fredoka font-bold transition-all duration-200\n                    ${activeTab === 'kektv'\n                      ? 'bg-[#daa520] text-black shadow-lg shadow-[#daa520]/20'\n                      : 'text-[#daa520] hover:text-white hover:bg-gray-800/50'\n                    }\n                  `}\n                >\n                  ùïÇ∆éùïÇTV\n                </button>\n                <button\n                  onClick={() => setActiveTab('limited')}\n                  className={`\n                    px-8 py-3 rounded-lg font-fredoka font-bold transition-all duration-200\n                    ${activeTab === 'limited'\n                      ? 'bg-purple-500 text-white shadow-lg shadow-purple-500/20'\n                      : 'text-purple-400 hover:text-white hover:bg-gray-800/50'\n                    }\n                  `}\n                >\n                  Limited Edition\n                </button>\n              </div>\n            </div>\n          </div>\n\n          {/* Tab Content */}\n          <div className=\"mt-8\">\n            {activeTab === 'mint' && <MintTab />}\n            {activeTab === 'surprise' && (\n              <div className=\"text-center py-24\">\n                <div className=\"text-8xl mb-6\">üëÄ</div>\n                <h2 className=\"text-3xl font-bold text-[#4ecca7] mb-4 font-fredoka\">Surprise Mechanics</h2>\n                <p className=\"text-gray-400 max-w-md mx-auto\">\n                  Exciting surprise features coming soon! Stay tuned\n                </p>\n              </div>\n            )}\n            {activeTab === 'kektv' && <TradeTab />}\n            {activeTab === 'limited' && (\n              <div className=\"text-center py-24\">\n                <div className=\"text-8xl mb-6\">‚≠ê</div>\n                <h2 className=\"text-3xl font-bold text-purple-400 mb-4 font-fredoka\">Limited Edition</h2>\n                <p className=\"text-gray-400 max-w-md mx-auto\">\n                  Exclusive limited edition NFTs. Check back soon for rare drops!\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;AAkBe,SAAS;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,sQAAQ,EAA4C;IAEtF,qBACE,mSAAC;QAAI,WAAU;;0BACb,mSAAC,8LAAM;;;;;0BAEP,mSAAC;gBAAK,WAAU;0BACd,cAAA,mSAAC;oBAAI,WAAU;;sCAEb,mSAAC,oNAAmB;4BAClB,OAAM;4BACN,UAAS;;;;;;sCAIX,mSAAC;4BAAI,WAAU;sCACb,cAAA,mSAAC;gCAAI,WAAU;0CACb,cAAA,mSAAC;oCAAI,WAAU;;sDACb,mSAAC;4CACC,SAAS,IAAM,aAAa;4CAC5B,WAAW,CAAC;;oBAEV,EAAE,cAAc,SACZ,0DACA,uDACH;kBACH,CAAC;sDACF;;;;;;sDAGD,mSAAC;4CACC,SAAS,IAAM,aAAa;4CAC5B,WAAW,CAAC;;oBAEV,EAAE,cAAc,aACZ,+CACA,uBACH;kBACH,CAAC;sDACF;;;;;;sDAGD,mSAAC;4CACC,SAAS,IAAM,aAAa;4CAC5B,WAAW,CAAC;;oBAEV,EAAE,cAAc,UACZ,0DACA,uDACH;kBACH,CAAC;sDACF;;;;;;sDAGD,mSAAC;4CACC,SAAS,IAAM,aAAa;4CAC5B,WAAW,CAAC;;oBAEV,EAAE,cAAc,YACZ,4DACA,wDACH;kBACH,CAAC;sDACF;;;;;;;;;;;;;;;;;;;;;;sCAQP,mSAAC;4BAAI,WAAU;;gCACZ,cAAc,wBAAU,mSAAC,qMAAO;;;;;gCAChC,cAAc,4BACb,mSAAC;oCAAI,WAAU;;sDACb,mSAAC;4CAAI,WAAU;sDAAgB;;;;;;sDAC/B,mSAAC;4CAAG,WAAU;sDAAsD;;;;;;sDACpE,mSAAC;4CAAE,WAAU;sDAAiC;;;;;;;;;;;;gCAKjD,cAAc,yBAAW,mSAAC,uMAAQ;;;;;gCAClC,cAAc,2BACb,mSAAC;oCAAI,WAAU;;sDACb,mSAAC;4CAAI,WAAU;sDAAgB;;;;;;sDAC/B,mSAAC;4CAAG,WAAU;sDAAuD;;;;;;sDACrE,mSAAC;4CAAE,WAAU;sDAAiC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BASxD,mSAAC,8LAAM;;;;;;;;;;;AAGb","debugId":null}}]
}